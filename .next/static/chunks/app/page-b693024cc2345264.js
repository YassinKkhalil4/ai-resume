(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4033:function(e,n,s){Promise.resolve().then(s.bind(s,2542))},2542:function(e,n,s){"use strict";s.r(n),s.d(n,{default:function(){return S}});var a=s(7437),t=s(2265),i=s(551);function l(e){let{value:n,onChange:s}=e,[i,l]=(0,t.useState)(""),[c,o]=(0,t.useState)(!1);async function r(){if(i){o(!0);try{let e=await fetch("/api/tailor",{method:"POST",body:(()=>{let e=new FormData;return e.append("jd_url",i),e.append("mode","fetchOnly"),e})()}),n=await e.json();e.ok&&(null==n?void 0:n.jd_text)?s(n.jd_text):alert((null==n?void 0:n.error)||"Could not fetch that URL. Paste text instead.")}catch(e){alert((null==e?void 0:e.message)||"Failed to fetch URL.")}finally{o(!1)}}}return(0,a.jsxs)("div",{className:"grid gap-2",children:[(0,a.jsx)("textarea",{className:"input h-40",placeholder:"Paste the job description here…",value:n,onChange:e=>s(e.target.value)}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{className:"input",placeholder:"…or paste a job URL",value:i,onChange:e=>l(e.target.value)}),(0,a.jsx)("button",{className:"button-outline",onClick:r,disabled:c,children:c?"Fetching…":"Fetch URL"})]})]})}function c(e,n){var s,a;return'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  /* Force safe system fonts to avoid blank glyphs in serverless Chromium */\n  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif; color:#111; font-size: 11.5pt; line-height: 1.35; }\n  h2 { font-size: 12.5pt; margin: 0 0 6px; letter-spacing: 0.2px; }\n  .sec { margin: 16px 0; }\n  .role { font-weight: 600; }\n  ul { margin: 4px 0 0 16px; padding: 0; }\n  li { margin: 2px 0; }\n  .sep { height:1px; background:#eaeaea; margin:10px 0; }\n</style></head><body>\n  '.concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(o(e.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2><div class="sep"></div>\n    ').concat(e.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(o(e.role)," — ").concat(o(e.company),' <span style="color:#666; font-weight:400">(').concat(o(e.dates),")</span></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(o(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(n.includeSkills&&(null===(s=e.skills)||void 0===s?void 0:s.length)?'<div class="sec"><h2>Skills</h2><div>'.concat((e.skills||[]).join(" • "),"</div></div>"):"","\n  ").concat((null===(a=e.education)||void 0===a?void 0:a.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(o(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>")}function o(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function r(e,n){var s,a;return'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif; color:#111; font-size: 12pt; line-height: 1.35; }\n  h2 { font-size: 13pt; margin: 0 0 8px; }\n  .sec { margin: 14px 0; }\n  .row { display:flex; justify-content: space-between; }\n  .role { font-weight: 600; }\n  ul { margin: 6px 0 0 16px; padding: 0; }\n  li { margin: 4px 0; }\n  .chips span { display:inline-block; background:#f5f5f5; border-radius: 6px; padding: 2px 8px; margin: 0 6px 6px 0; font-size: 10pt; }\n  .divider { height:1px; background:#eee; margin:8px 0; }\n</style></head><body>\n  '.concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(d(e.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2><div class="divider"></div>\n    ').concat(e.experience.map(e=>'\n      <div class="entry">\n        <div class="row"><div class="role">'.concat(d(e.role)," — ").concat(d(e.company),'</div><div style="color:#666">').concat(d(e.dates),"</div></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(d(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(n.includeSkills&&(null===(s=e.skills)||void 0===s?void 0:s.length)?'<div class="sec"><h2>Skills</h2><div class="chips">'.concat((e.skills||[]).map(e=>"<span>".concat(d(e),"</span>")).join(""),"</div></div>"):"","\n  ").concat((null===(a=e.education)||void 0===a?void 0:a.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(d(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>")}function d(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function u(e,n){var s,a,t;return'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif; color:#111; font-size: 12pt; line-height: 1.35; }\n  h1,h2 { margin: 0 0 6px; }\n  h2 { font-size: 13pt; border-bottom: 1px solid #ddd; padding-bottom: 4px; }\n  .sec { margin: 14px 0; }\n  .role { font-weight: bold; }\n  ul { margin: 6px 0 0 16px; padding: 0; }\n  li { margin: 4px 0; }\n  .chips span { display:inline-block; border:1px solid #ccc; border-radius: 12px; padding: 2px 8px; margin: 0 6px 6px 0; font-size: 10pt; }\n</style></head><body>\n  '.concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(m(e.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2>\n    ').concat(e.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(m(e.role)," — ").concat(m(e.company),'</div>\n        <div class="dates" style="color:#666">').concat(m(e.dates),"</div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(m(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(n.includeSkills&&(null===(s=e.skills)||void 0===s?void 0:s.length)?'<div class="sec"><h2>Skills</h2><div class="chips">'.concat((e.skills||[]).map(e=>"<span>".concat(m(e),"</span>")).join(""),"</div></div>"):"","\n  ").concat((null===(a=e.education)||void 0===a?void 0:a.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(m(e),"</li>")).join(""),"</ul></div>"):"","\n  ").concat((null===(t=e.certifications)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Certifications</h2><ul>'.concat((e.certifications||[]).map(e=>"<li>".concat(m(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>")}function m(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function p(e,n){var s,a,t,i;let l=(null===(s=e.contact)||void 0===s?void 0:s.name)||"",c=(i=e.contact)?[i.email,i.phone,i.location,i.website].filter(Boolean):[];return'<!doctype html><html><head><meta charset="utf-8" /><style>'.concat('\n  body{font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif; color:#0b0b0b; font-size:11.5pt; line-height:1.38;}\n  .wrap{max-width:820px; margin:0 auto;}\n  .hdr{display:grid; grid-template-columns: 2fr 1fr; gap:16px; align-items:flex-end; border-bottom:2px solid #111; padding-bottom:10px; margin-bottom:14px}\n  .name{font-size:20pt; font-weight:700; letter-spacing:.2px}\n  .contact{font-size:10pt; color:#444; text-align:right}\n  h2{font-size:12.8pt; margin:14px 0 6px; letter-spacing:.2px}\n  .sec{margin: 6px 0 10px}\n  .role{font-weight:600}\n  ul{margin:4px 0 0 16px; padding:0}\n  li{margin:2px 0}\n  .meta{color:#666; font-weight:400}\n  ','</style></head><body><div class="wrap">\n  <div class="hdr">\n    <div class="name">').concat(h(l),'</div>\n    <div class="contact">').concat(c.join(" \xb7 "),"</div>\n  </div>\n  ").concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Executive Summary</h2><div>'.concat(h(e.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2>\n    ').concat(e.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(h(e.role)," — ").concat(h(e.company),' <span class="meta">(').concat(h(e.dates),")</span></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(h(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(n.includeSkills&&(null===(a=e.skills)||void 0===a?void 0:a.length)?'<div class="sec"><h2>Core Skills</h2><div>'.concat((e.skills||[]).join(" • "),"</div></div>"):"","\n  ").concat((null===(t=e.education)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(h(e),"</li>")).join(""),"</ul></div>"):"","\n  </div></body></html>")}function h(e){return(e||"").replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function x(e,n){var s,a,t;let i=e.contact||{};return'<!doctype html><html><head><meta charset="utf-8" /><style>'.concat('\n  body{font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, "Helvetica Neue", Helvetica, sans-serif; color:#111; font-size:11.5pt; line-height:1.4}\n  .wrap{max-width:820px; margin:0 auto}\n  h1{font-size:18pt; margin:0 0 6px; font-weight:700}\n  h2{font-size:12.5pt; margin:12px 0 6px}\n  .sec{margin: 6px 0 10px}\n  ul{margin:4px 0 0 16px; padding:0}\n  li{margin:2px 0}\n  .meta{color:#666}\n  ','</style></head><body><div class="wrap">\n    <h1>').concat(g(i.name||""),"</h1>\n    ").concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Research Summary</h2><div>'.concat(g(e.summary),"</div></div>"):"","\n    ").concat(v("Projects",(null===(s=e.projects)||void 0===s?void 0:s.map(e=>"".concat(g(e.name)," — ").concat(e.bullets.map(e=>g(e)).join("; "))))||[]),"\n    ").concat(v("Publications",e.publications||[]),"\n    ").concat(v("Teaching",e.teaching||[]),"\n    ").concat(v("Experience",(e.experience||[]).map(e=>"".concat(g(e.role)," — ").concat(g(e.company)," <span class=meta>(").concat(g(e.dates),")</span>"))),"\n    ").concat(n.includeSkills&&(null===(a=e.skills)||void 0===a?void 0:a.length)?'<div class="sec"><h2>Skills</h2><div>'.concat((e.skills||[]).join(" • "),"</div></div>"):"","\n    ").concat((null===(t=e.education)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(g(e),"</li>")).join(""),"</ul></div>"):"","\n  </div></body></html>")}function v(e,n){return n&&n.length?'<div class="sec"><h2>'.concat(e,"</h2><ul>").concat(n.map(e=>"<li>".concat(e,"</li>")).join(""),"</ul></div>"):""}function g(e){return(e||"").replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function f(e){let{diffs:n}=e,[s,i]=(0,t.useState)("all"),l=(0,t.useMemo)(()=>["all",...new Set(n.map(e=>e.role))],[n]),c=(0,t.useMemo)(()=>n.filter(e=>"all"===s||e.role===s),[n,s]);return(0,a.jsxs)("div",{className:"border rounded-md p-3 bg-gray-50 text-xs max-h-96 overflow-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"label",children:"Section"}),(0,a.jsx)("select",{className:"input w-auto",value:s,onChange:e=>i(e.target.value),children:l.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),0===c.length&&(0,a.jsx)("div",{className:"text-gray-500",children:"No changes."}),c.map((e,n)=>(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("div",{className:"font-medium",children:e.role}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label",children:"Original"}),(0,a.jsx)("ul",{className:"list-disc pl-4",children:e.original.map((e,n)=>(0,a.jsx)("li",{className:"line-through text-gray-500",children:e},n))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label",children:"Tailored"}),(0,a.jsx)("ul",{className:"list-disc pl-4",children:e.tailored.map((n,s)=>(0,a.jsx)("li",{className:"text-green-700 underline decoration-green-400",title:(e.reasons||[]).join(" • "),children:n},s))})]})]})]},n))]})}function b(e){var n;let{stats:s}=e,t=Math.round(100*((null==s?void 0:s.coverage)||0)),i=Math.round(100*((null==s?void 0:s.mustCoverage)||0)),l=Math.round(100*((null==s?void 0:s.niceCoverage)||0)),c=Math.round(100*((null==s?void 0:s.semanticCoverage)||0));return(0,a.jsxs)("div",{className:"border rounded-md p-3 bg-white",children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:"ATS Check"}),(0,a.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Keyword coverage and sanity checks."}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,a.jsx)("div",{className:"h-2 rounded",style:{width:t+"%",background:t>=80?"#10B981":t>=60?"#F59E0B":"#EF4444"}})}),(0,a.jsxs)("div",{className:"text-sm",children:[t,"% overall"]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Must-haves"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,a.jsx)("div",{className:"h-2 rounded",style:{width:i+"%",background:i>=80?"#10B981":i>=60?"#F59E0B":"#EF4444"}})}),(0,a.jsxs)("div",{className:"text-sm",children:[i,"%"]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Nice-to-haves"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,a.jsx)("div",{className:"h-2 rounded",style:{width:l+"%",background:l>=80?"#10B981":l>=60?"#F59E0B":"#EF4444"}})}),(0,a.jsxs)("div",{className:"text-sm",children:[l,"%"]})]}),(0,a.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Semantic coverage"}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,a.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,a.jsx)("div",{className:"h-2 rounded",style:{width:c+"%",background:c>=80?"#10B981":c>=60?"#F59E0B":"#EF4444"}})}),(0,a.jsxs)("div",{className:"text-sm",children:[c,"%"]})]}),(0,a.jsxs)("div",{className:"text-xs mb-2",children:[(0,a.jsx)("strong",{children:"Top missing:"})," ",((null==s?void 0:s.topMissing)||[]).slice(0,5).join(", ")||"—"]}),Array.isArray(null==s?void 0:s.gaps)&&s.gaps.length>0&&(0,a.jsxs)("div",{className:"text-xs mt-2",children:[(0,a.jsx)("div",{className:"label mb-1",children:"Gap map (nearest support)"}),(0,a.jsx)("ul",{className:"list-disc ml-4",children:s.gaps.slice(0,5).map((e,n)=>(0,a.jsxs)("li",{children:[(0,a.jsx)("strong",{children:e.requirement}),' → match "',e.nearestBullet,'" (score ',Math.round(100*(e.score||0))/100,")"]},n))})]}),(0,a.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label",children:"Matched"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:((null==s?void 0:s.matched)||[]).slice(0,20).map((e,n)=>(0,a.jsx)("span",{className:"badge border-green-300",children:e},n))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label",children:"Missing (relevant)"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:((null==s?void 0:s.missing)||[]).slice(0,20).map((e,n)=>(0,a.jsx)("span",{className:"badge border-red-300",children:e},n))})]})]}),(null==s?void 0:null===(n=s.warnings)||void 0===n?void 0:n.length)>0&&(0,a.jsx)("div",{className:"mt-3 text-xs text-red-600",children:s.warnings.map((e,n)=>(0,a.jsxs)("div",{children:["⚠️ ",e]},n))})]})}function j(e){let{sessionId:n,onClose:s}=e,[i,l]=(0,t.useState)("minimal"),[c,o]=(0,t.useState)("pdf"),[r,d]=(0,t.useState)(!0),[u,m]=(0,t.useState)(!0),[p,h]=(0,t.useState)(!1),[x,v]=(0,t.useState)(null);async function g(){h(!0);try{var e;let s=window.__TAILOR_SESSION__||null,a=await fetch("/api/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n,template:i,format:c,options:{includeSkills:r,includeSummary:u},session_snapshot:s})});if(!a.ok){let e=null;try{e=await a.json()}catch(e){}throw Error((null==e?void 0:e.message)||"Export HTTP ".concat(a.status))}let t=a.headers.get("content-type")||"",l=/^application\/pdf/i.test(t),o=/^application\/vnd\.openxmlformats/i.test(t);if(!l&&!o){let e=await a.text();throw Error("Malformed export response: ".concat(e.slice(0,300)))}e=await a.blob(),v(URL.createObjectURL(e))}catch(e){alert((null==e?void 0:e.message)||"Failed to export.")}finally{h(!1)}}return(0,a.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"card p-6 w-[560px] max-w-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("div",{className:"font-semibold",children:"Export"}),(0,a.jsx)("button",{className:"button-outline",onClick:s,children:"Close"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label mb-1",children:"Template"}),(0,a.jsxs)("select",{className:"input",value:i,onChange:e=>l(e.target.value),children:[(0,a.jsx)("option",{value:"classic",children:"Classic"}),(0,a.jsx)("option",{value:"modern",children:"Modern"}),(0,a.jsx)("option",{value:"minimal",children:"Minimal"}),(0,a.jsx)("option",{value:"executive",children:"Executive"}),(0,a.jsx)("option",{value:"academic",children:"Academic/Projects"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label mb-1",children:"Format"}),(0,a.jsxs)("select",{className:"input",value:c,onChange:e=>o(e.target.value),children:[(0,a.jsx)("option",{value:"pdf",children:"PDF"}),(0,a.jsx)("option",{value:"docx",children:"DOCX"})]})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex items-center gap-4",children:[(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked)}),"Include Summary"]}),(0,a.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)("input",{type:"checkbox",checked:r,onChange:e=>d(e.target.checked)}),"Include Skills"]})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,a.jsx)("button",{className:"button",onClick:g,disabled:p,children:p?"Exporting…":"Export"}),x&&(0,a.jsx)("a",{className:"button-outline",href:x,target:"_blank",rel:"noreferrer",children:"Download"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 mt-3",children:"DOCX exports instantly. PDF may take a few seconds. All exports are text-selectable and ATS-safe."})]})})}function y(e){var n;let{session:s}=e,[i,l]=(0,t.useState)(!1),[o,d]=(0,t.useState)("tailored"),[m,h]=(0,t.useState)("minimal"),[v,g]=(0,t.useState)(null),[y,N]=(0,t.useState)(!1),[w,k]=(0,t.useState)([]),S=(0,t.useMemo)(()=>s.preview_sections_json?C(s.preview_sections_json,m):"<p>No tailored content available</p>",[s,m]),_=(0,t.useMemo)(()=>s.original_sections_json?C(s.original_sections_json,m):"<p>No original content available</p>",[s,m]);function C(e,n){let s={includeSkills:!0,includeSummary:!0};return"classic"===n?u(e,s):"modern"===n?r(e,s):"executive"===n?p(e,s):"academic"===n?x(e,s):c(e,s)}async function E(){try{let e=await fetch("/api/diff",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:s.session_id,session_version:s.version,original_payload:s.original_sections_json,tailored_payload:s.preview_sections_json})}),n=await e.json();e.ok?k(n.diffs||[]):"stale_session"===n.code&&(console.warn("Session is stale, refreshing..."),alert("Session data is outdated. Please refresh the page."))}catch(e){console.error("Failed to load diffs:",e)}}async function M(){N(!0);try{let e=await fetch("/api/honesty",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:s.session_id,session_version:s.version,original_payload:s.original_sections_json,tailored_payload:s.preview_sections_json})}),n=await e.json();if(!e.ok){if("stale_session"===n.code){alert("Session data is outdated. Please refresh the page and try again.");return}throw Error((null==n?void 0:n.message)||"Honesty scan failed")}g(n)}catch(e){alert((null==e?void 0:e.message)||"Honesty scan failed")}finally{N(!1)}}return(0,t.useEffect)(()=>{try{window.__TAILOR_SESSION__=s}catch(e){}},[s]),(0,t.useEffect)(()=>{E()},[s]),(0,a.jsxs)("section",{className:"card p-6",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,a.jsx)("h2",{children:"Preview"}),(0,a.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,a.jsx)("button",{className:"button-outline ".concat("tailored"===o?"border-black":""),onClick:()=>d("tailored"),children:"Tailored"}),(0,a.jsx)("button",{className:"button-outline ".concat("original"===o?"border-black":""),onClick:()=>d("original"),children:"Original"}),(0,a.jsx)("button",{className:"button-outline",onClick:M,disabled:y,children:y?"Scanning...":"Honesty scan"}),(0,a.jsx)("button",{className:"button",onClick:()=>l(!0),children:"Export"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,a.jsx)("div",{className:"label",children:"Template"}),(0,a.jsxs)("select",{className:"input w-auto",value:m,onChange:e=>h(e.target.value),children:[(0,a.jsx)("option",{value:"classic",children:"Classic"}),(0,a.jsx)("option",{value:"modern",children:"Modern"}),(0,a.jsx)("option",{value:"minimal",children:"Minimal"}),(0,a.jsx)("option",{value:"executive",children:"Executive"}),(0,a.jsx)("option",{value:"academic",children:"Academic/Projects"})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"label mb-2",children:["Resume Preview (",o,")"]}),(0,a.jsx)("div",{className:"bg-gray-50 p-3 rounded overflow-auto text-xs h-96 border",dangerouslySetInnerHTML:{__html:"tailored"===o?S:_}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label mb-2",children:"Changes"}),(0,a.jsx)(f,{diffs:w}),(0,a.jsx)("div",{className:"mt-4",children:(0,a.jsx)(b,{stats:s.keyword_stats})}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"label mb-2",children:"Visual preview"}),(0,a.jsx)("iframe",{className:"w-full h-96 bg-white border rounded",srcDoc:function(){let e=s.preview_sections_json,n={includeSkills:!0,includeSummary:!0};return"classic"===m?u(e,n):"modern"===m?r(e,n):"executive"===m?p(e,n):"academic"===m?x(e,n):c(e,n)}()})]})]})]}),v&&(0,a.jsxs)("div",{className:"mt-4 border rounded-md p-3 bg-white",children:[(0,a.jsx)("div",{className:"font-medium mb-1",children:"Honesty scan"}),(null===(n=v.flags)||void 0===n?void 0:n.length)?v.flags.map((e,n)=>(0,a.jsxs)("div",{className:"mb-2 text-xs",children:[(0,a.jsxs)("div",{children:["⚠️ ",(0,a.jsx)("strong",{children:e.role}),": ",e.bullet]}),(0,a.jsxs)("div",{className:"text-gray-600",children:["Backed by: ",(e.backing||[]).join(" | ")||"No close match in original."]})]},n)):(0,a.jsx)("div",{className:"text-xs text-green-700",children:"All rewritten bullets appear supported by the original."})]}),i&&(0,a.jsx)(j,{sessionId:s.session_id,onClose:()=>l(!1)})]})}function N(e){let{validation:n,onAction:s,onDismiss:i}=e,[l,c]=(0,t.useState)(!1),o=n.hasExperience?n.experienceCount>0&&n.experienceCount<2?{type:"warning",title:"Limited Experience Found",message:"Only ".concat(n.experienceCount," work experience found. More experience will improve tailoring results."),actions:[{label:"Add More Experience",action:"add_experience"},{label:"Continue Anyway",action:"continue"}]}:n.hasSkills?{type:"success",title:"Resume Parsed Successfully",message:"Your resume has been parsed and is ready for tailoring.",actions:[{label:"Continue to Tailoring",action:"continue"}]}:{type:"warning",title:"Skills Section Missing",message:"No skills section detected. Adding skills will improve ATS compatibility.",actions:[{label:"Add Skills",action:"add_skills"},{label:"Continue Without Skills",action:"continue"}]}:{type:"error",title:"Experience Not Found",message:"We couldn't find any work experience in your resume. This is required for tailoring.",actions:[{label:"Paste Work History",action:"paste_experience"},{label:"Mark Lines as Experience",action:"mark_experience"},{label:"Try Different Resume",action:"upload_new"}]};if("success"===o.type)return null;let r="error"===o.type;return(0,a.jsx)("div",{className:"fixed top-0 left-0 right-0 z-50 ".concat(r?"bg-red-50 border-b border-red-200":"bg-yellow-50 border-b border-yellow-200"),children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-3",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex-shrink-0 ".concat(r?"text-red-400":"text-yellow-400"),children:r?(0,a.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,a.jsx)("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-sm font-medium ".concat(r?"text-red-800":"text-yellow-800"),children:o.title}),(0,a.jsx)("p",{className:"text-sm ".concat(r?"text-red-700":"text-yellow-700"),children:o.message})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[n.suggestions.length>0&&(0,a.jsxs)("button",{onClick:()=>c(!l),className:"text-sm font-medium ".concat(r?"text-red-600 hover:text-red-500":"text-yellow-600 hover:text-yellow-500"),children:[l?"Hide":"Show"," Suggestions"]}),i&&!r&&(0,a.jsx)("button",{onClick:i,className:"text-yellow-600 hover:text-yellow-500",children:(0,a.jsx)("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),l&&n.suggestions.length>0&&(0,a.jsx)("div",{className:"mt-3 pl-8",children:(0,a.jsx)("ul",{className:"list-disc list-inside space-y-1",children:n.suggestions.map((e,n)=>(0,a.jsx)("li",{className:"text-sm ".concat(r?"text-red-700":"text-yellow-700"),children:e},n))})}),(0,a.jsx)("div",{className:"mt-3 pl-8",children:(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:o.actions.map((e,n)=>(0,a.jsx)("button",{onClick:()=>s(e.action),className:"px-3 py-1 text-sm font-medium rounded-md ".concat(r?"bg-red-100 text-red-800 hover:bg-red-200":"bg-yellow-100 text-yellow-800 hover:bg-yellow-200"),children:e.label},n))})})]})})}function w(e){let{isOpen:n,onClose:s,onSubmit:i,originalText:l}=e,[c,o]=(0,t.useState)(l||""),[r,d]=(0,t.useState)(!1);if(!n)return null;let u=async()=>{if(c.trim()){d(!0);try{await i(c.trim()),s()}catch(e){console.error("Failed to submit experience:",e)}finally{d(!1)}}};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-2xl w-full mx-4 max-h-[80vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Add Work Experience"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Paste your work experience below. Include job titles, companies, dates, and bullet points describing your responsibilities and achievements."}),(0,a.jsx)("textarea",{value:c,onChange:e=>o(e.target.value),placeholder:"Example: Software Engineer at Google (2020-2023) • Developed scalable web applications using React and Node.js • Led a team of 5 engineers to deliver features on time • Improved application performance by 40%  Senior Developer at Microsoft (2018-2020) • Built microservices architecture for enterprise clients • Mentored junior developers and conducted code reviews • Reduced system downtime by 60%",className:"w-full h-64 p-3 border border-gray-300 rounded-md resize-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 text-gray-600 border border-gray-300 rounded hover:bg-gray-50",disabled:r,children:"Cancel"}),(0,a.jsx)("button",{onClick:u,disabled:!c.trim()||r,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:r?"Processing...":"Add Experience"})]})]})})}let k=s.n(i)()(()=>Promise.all([s.e(486),s.e(971),s.e(328)]).then(s.bind(s,5328)),{loadableGenerated:{webpack:()=>[5328]},ssr:!1});function S(){let[e,n]=(0,t.useState)(null),[s,i]=(0,t.useState)(""),[c,o]=(0,t.useState)("professional"),[r,d]=(0,t.useState)(null),[u,m]=(0,t.useState)(!1),[p,h]=(0,t.useState)(null),[x,v]=(0,t.useState)(!1),[g,f]=(0,t.useState)(!0),b=function(){let[e,n]=(0,t.useState)(!1),[s,a]=(0,t.useState)("");return(0,t.useEffect)(()=>{n(document.cookie.includes("invite="))},[]),{ok:e,code:s,setCode:a,submit:function(){s&&(document.cookie="invite=".concat(encodeURIComponent(s),"; path=/; max-age=2592000"),n(!0))}}}();async function j(){if(!e)return alert("Upload a resume and paste a job description.");if(!s)return alert("Paste a job description.");m(!0);try{let n=new FormData;n.append("resume_file",e),n.append("jd_text",s),n.append("tone",c);let a=await fetch("/api/tailor",{method:"POST",body:n}),t=await a.json();if(!a.ok){if("missing_experience"===t.code){h(t.validation),f(!0),m(!1);return}throw Error((null==t?void 0:t.message)||"Tailoring failed.")}d(t),h(t.validation),f(!1)}catch(e){alert((null==e?void 0:e.message)||"Failed to tailor.")}finally{m(!1)}}async function S(e){console.log("Experience submitted:",e),v(!1)}return b.ok?(0,a.jsxs)("main",{className:"grid gap-6",children:[p&&g&&(0,a.jsx)(N,{validation:p,onAction:function(e){switch(e){case"paste_experience":v(!0);break;case"mark_experience":alert("Line marking functionality coming soon!");break;case"upload_new":n(null),d(null),h(null),f(!1);break;case"continue":f(!1);break;default:console.log("Unknown action:",e)}},onDismiss:()=>f(!1)}),(0,a.jsxs)("section",{className:"card p-6",children:[(0,a.jsx)("h1",{className:"mb-1",children:"AI Resume Tailor"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload your resume and paste a job description to get a tailored version."}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label mb-2",children:"Resume"}),(0,a.jsx)(k,{onFileSelect:n}),e&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",e.name]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"label mb-2",children:"Job Description"}),(0,a.jsx)(l,{value:s,onChange:i})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("div",{className:"label mb-2",children:"Tone"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"button-outline ".concat("professional"===c?"border-black":""),onClick:()=>o("professional"),children:"Professional"}),(0,a.jsx)("button",{className:"button-outline ".concat("concise"===c?"border-black":""),onClick:()=>o("concise"),children:"Concise"}),(0,a.jsx)("button",{className:"button-outline ".concat("impact-heavy"===c?"border-black":""),onClick:()=>o("impact-heavy"),children:"Impact Heavy"})]})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)("button",{className:"button",onClick:j,disabled:u||!e||!s,children:u?"Tailoring...":"Tailor Resume"})})]}),r&&(0,a.jsx)(y,{session:r}),x&&(0,a.jsx)(w,{isOpen:x,onClose:()=>v(!1),onSubmit:S})]}):(0,a.jsx)("main",{className:"grid gap-6",children:(0,a.jsxs)("section",{className:"card p-6",children:[(0,a.jsx)("h1",{className:"mb-1",children:"Enter Invite Code"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Access is limited during beta. Enter your invite code to continue."}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{className:"input",placeholder:"Invite code",value:b.code,onChange:e=>b.setCode(e.target.value)}),(0,a.jsx)("button",{className:"button",onClick:b.submit,children:"Continue"})]}),b.error&&(0,a.jsx)("p",{className:"text-red-600 text-sm mt-2",children:b.error})]})})}},551:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return i}});let a=s(9920);s(7437),s(2265);let t=a._(s(148));function i(e,n){var s;let a={loading:e=>{let{error:n,isLoading:s,pastDelay:a}=e;return null}};"function"==typeof e&&(a.loader=e);let i={...a,...n};return(0,t.default)({...i,modules:null==(s=i.loadableGenerated)?void 0:s.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},912:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BailoutToCSR",{enumerable:!0,get:function(){return t}});let a=s(5592);function t(e){let{reason:n,children:s}=e;if("undefined"==typeof window)throw new a.BailoutToCSRError(n);return s}},148:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return r}});let a=s(7437),t=s(2265),i=s(912),l=s(1481);function c(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},r=function(e){let n={...o,...e},s=(0,t.lazy)(()=>n.loader().then(c)),r=n.loading;function d(e){let c=r?(0,a.jsx)(r,{isLoading:!0,pastDelay:!0,error:null}):null,o=n.ssr?(0,a.jsxs)(a.Fragment,{children:["undefined"==typeof window?(0,a.jsx)(l.PreloadCss,{moduleIds:n.modules}):null,(0,a.jsx)(s,{...e})]}):(0,a.jsx)(i.BailoutToCSR,{reason:"next/dynamic",children:(0,a.jsx)(s,{...e})});return(0,a.jsx)(t.Suspense,{fallback:c,children:o})}return d.displayName="LoadableComponent",d}},1481:function(e,n,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PreloadCss",{enumerable:!0,get:function(){return i}});let a=s(7437),t=s(8512);function i(e){let{moduleIds:n}=e;if("undefined"!=typeof window)return null;let s=(0,t.getExpectedRequestStore)("next/dynamic css"),i=[];if(s.reactLoadableManifest&&n){let e=s.reactLoadableManifest;for(let s of n){if(!e[s])continue;let n=e[s].files.filter(e=>e.endsWith(".css"));i.push(...n)}}return 0===i.length?null:(0,a.jsx)(a.Fragment,{children:i.map(e=>(0,a.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[478,23,744],function(){return e(e.s=4033)}),_N_E=e.O()}]);