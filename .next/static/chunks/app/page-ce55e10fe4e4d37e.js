(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4033:function(e,n,a){Promise.resolve().then(a.bind(a,8423))},8423:function(e,n,a){"use strict";a.r(n),a.d(n,{default:function(){return b}});var t=a(7437),i=a(2265),l=a(551),s=a.n(l);function c(e){let{value:n,onChange:a}=e,[l,s]=(0,i.useState)(""),[c,o]=(0,i.useState)(!1);async function d(){if(l){o(!0);try{let e=await fetch("/api/tailor",{method:"POST",body:(()=>{let e=new FormData;return e.append("jd_url",l),e.append("mode","fetchOnly"),e})()}),n=await e.json();e.ok&&(null==n?void 0:n.jd_text)?a(n.jd_text):alert((null==n?void 0:n.error)||"Could not fetch that URL. Paste text instead.")}catch(e){alert((null==e?void 0:e.message)||"Failed to fetch URL.")}finally{o(!1)}}}return(0,t.jsxs)("div",{className:"grid gap-2",children:[(0,t.jsx)("textarea",{className:"input h-40",placeholder:"Paste the job description here…",value:n,onChange:e=>a(e.target.value)}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{className:"input",placeholder:"…or paste a job URL",value:l,onChange:e=>s(e.target.value)}),(0,t.jsx)("button",{className:"button-outline",onClick:d,disabled:c,children:c?"Fetching…":"Fetch URL"})]})]})}function o(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function d(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function r(e){return e.replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function u(e){return(e||"").replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function m(e,n){return n&&n.length?'<div class="sec"><h2>'.concat(e,"</h2><ul>").concat(n.map(e=>"<li>".concat(e,"</li>")).join(""),"</ul></div>"):""}function h(e){return(e||"").replace(/[&<>]/g,e=>({"&":"&amp;","<":"&lt;",">":"&gt;"})[e])}function p(e){let{diffs:n}=e,[a,l]=(0,i.useState)("all"),s=(0,i.useMemo)(()=>["all",...new Set(n.map(e=>e.role))],[n]),c=(0,i.useMemo)(()=>n.filter(e=>"all"===a||e.role===a),[n,a]);return(0,t.jsxs)("div",{className:"border rounded-md p-3 bg-gray-50 text-xs max-h-96 overflow-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("span",{className:"label",children:"Section"}),(0,t.jsx)("select",{className:"input w-auto",value:a,onChange:e=>l(e.target.value),children:s.map(e=>(0,t.jsx)("option",{value:e,children:e},e))})]}),0===c.length&&(0,t.jsx)("div",{className:"text-gray-500",children:"No changes."}),c.map((e,n)=>(0,t.jsxs)("div",{className:"mb-4",children:[(0,t.jsx)("div",{className:"font-medium",children:e.role}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label",children:"Original"}),(0,t.jsx)("ul",{className:"list-disc pl-4",children:e.original.map((e,n)=>(0,t.jsx)("li",{className:"line-through text-gray-500",children:e},n))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label",children:"Tailored"}),(0,t.jsx)("ul",{className:"list-disc pl-4",children:e.tailored.map((n,a)=>(0,t.jsx)("li",{className:"text-green-700 underline decoration-green-400",title:(e.reasons||[]).join(" • "),children:n},a))})]})]})]},n))]})}function x(e){var n;let{stats:a}=e,i=Math.round(100*((null==a?void 0:a.coverage)||0)),l=Math.round(100*((null==a?void 0:a.mustCoverage)||0)),s=Math.round(100*((null==a?void 0:a.niceCoverage)||0)),c=Math.round(100*((null==a?void 0:a.semanticCoverage)||0));return(0,t.jsxs)("div",{className:"border rounded-md p-3 bg-white",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"ATS Check"}),(0,t.jsx)("div",{className:"text-sm text-gray-600 mb-2",children:"Keyword coverage and sanity checks."}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,t.jsx)("div",{className:"h-2 rounded",style:{width:i+"%",background:i>=80?"#10B981":i>=60?"#F59E0B":"#EF4444"}})}),(0,t.jsxs)("div",{className:"text-sm",children:[i,"% overall"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Must-haves"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,t.jsx)("div",{className:"h-2 rounded",style:{width:l+"%",background:l>=80?"#10B981":l>=60?"#F59E0B":"#EF4444"}})}),(0,t.jsxs)("div",{className:"text-sm",children:[l,"%"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Nice-to-haves"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,t.jsx)("div",{className:"h-2 rounded",style:{width:s+"%",background:s>=80?"#10B981":s>=60?"#F59E0B":"#EF4444"}})}),(0,t.jsxs)("div",{className:"text-sm",children:[s,"%"]})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-600",children:"Semantic coverage"}),(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"w-full bg-gray-100 h-2 rounded",children:(0,t.jsx)("div",{className:"h-2 rounded",style:{width:c+"%",background:c>=80?"#10B981":c>=60?"#F59E0B":"#EF4444"}})}),(0,t.jsxs)("div",{className:"text-sm",children:[c,"%"]})]}),(0,t.jsxs)("div",{className:"text-xs mb-2",children:[(0,t.jsx)("strong",{children:"Top missing:"})," ",((null==a?void 0:a.topMissing)||[]).slice(0,5).join(", ")||"—"]}),Array.isArray(null==a?void 0:a.gaps)&&a.gaps.length>0&&(0,t.jsxs)("div",{className:"text-xs mt-2",children:[(0,t.jsx)("div",{className:"label mb-1",children:"Gap map (nearest support)"}),(0,t.jsx)("ul",{className:"list-disc ml-4",children:a.gaps.slice(0,5).map((e,n)=>(0,t.jsxs)("li",{children:[(0,t.jsx)("strong",{children:e.requirement}),' → match "',e.nearestBullet,'" (score ',Math.round(100*(e.score||0))/100,")"]},n))})]}),(0,t.jsxs)("div",{className:"mt-3 grid grid-cols-2 gap-3 text-xs",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label",children:"Matched"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:((null==a?void 0:a.matched)||[]).slice(0,20).map((e,n)=>(0,t.jsx)("span",{className:"badge border-green-300",children:e},n))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label",children:"Missing (relevant)"}),(0,t.jsx)("div",{className:"flex flex-wrap gap-1",children:((null==a?void 0:a.missing)||[]).slice(0,20).map((e,n)=>(0,t.jsx)("span",{className:"badge border-red-300",children:e},n))})]})]}),(null==a?void 0:null===(n=a.warnings)||void 0===n?void 0:n.length)>0&&(0,t.jsx)("div",{className:"mt-3 text-xs text-red-600",children:a.warnings.map((e,n)=>(0,t.jsxs)("div",{children:["⚠️ ",e]},n))})]})}function v(e){let{sessionId:n,onClose:a}=e,[l,s]=(0,i.useState)("minimal"),[c,o]=(0,i.useState)("pdf"),[d,r]=(0,i.useState)(!0),[u,m]=(0,i.useState)(!0),[h,p]=(0,i.useState)(!1),[x,v]=(0,i.useState)(null);async function g(){p(!0);try{let e=await fetch("/api/export",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:n,template:l,format:c,options:{includeSkills:d,includeSummary:u},session_snapshot:window.__TAILOR_SESSION__||null})});if(!e.ok){let n=null;try{n=await e.json()}catch(e){}throw Error((null==n?void 0:n.message)||"Export HTTP ".concat(e.status))}let a=e.headers.get("content-type")||"";if(!/^(application\/pdf|application\/vnd\.openxmlformats-.*docx)/i.test(a)){let n="";try{n=await e.text()}catch(e){}throw Error("Malformed export response: ".concat(null==n?void 0:n.slice(0,500)))}let t=await e.blob(),i=URL.createObjectURL(t);v(i)}catch(e){alert((null==e?void 0:e.message)||"Failed to export.")}finally{p(!1)}}return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"card p-6 w-[560px] max-w-full",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("div",{className:"font-semibold",children:"Export"}),(0,t.jsx)("button",{className:"button-outline",onClick:a,children:"Close"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label mb-1",children:"Template"}),(0,t.jsxs)("select",{className:"input",value:l,onChange:e=>s(e.target.value),children:[(0,t.jsx)("option",{value:"classic",children:"Classic"}),(0,t.jsx)("option",{value:"modern",children:"Modern"}),(0,t.jsx)("option",{value:"minimal",children:"Minimal"}),(0,t.jsx)("option",{value:"executive",children:"Executive"}),(0,t.jsx)("option",{value:"academic",children:"Academic/Projects"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label mb-1",children:"Format"}),(0,t.jsxs)("select",{className:"input",value:c,onChange:e=>o(e.target.value),children:[(0,t.jsx)("option",{value:"pdf",children:"PDF"}),(0,t.jsx)("option",{value:"docx",children:"DOCX"})]})]})]}),(0,t.jsxs)("div",{className:"mt-3 flex items-center gap-4",children:[(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:u,onChange:e=>m(e.target.checked)}),"Include Summary"]}),(0,t.jsxs)("label",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:d,onChange:e=>r(e.target.checked)}),"Include Skills"]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsx)("button",{className:"button",onClick:g,disabled:h,children:h?"Exporting…":"Export"}),x&&(0,t.jsx)("a",{className:"button-outline",href:x,target:"_blank",rel:"noreferrer",children:"Download"})]}),(0,t.jsx)("div",{className:"text-xs text-gray-500 mt-3",children:"DOCX exports instantly. PDF may take a few seconds. All exports are text-selectable and ATS-safe."})]})})}function g(e){var n;let{session:a}=e,[l,s]=(0,i.useState)(!1),[c,g]=(0,i.useState)("tailored"),[f,j]=(0,i.useState)("minimal"),[b,y]=(0,i.useState)(null),[N,w]=(0,i.useState)(!1),k=(0,i.useMemo)(()=>JSON.stringify(a.preview_sections_json,null,2),[a]),S=(0,i.useMemo)(()=>JSON.stringify(a.original_sections_json,null,2),[a]);return window.__TAILOR_SESSION__=a,(0,t.jsxs)("section",{className:"card p-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,t.jsx)("h2",{children:"Preview"}),(0,t.jsxs)("div",{className:"ml-auto flex items-center gap-2",children:[(0,t.jsx)("button",{className:"button-outline ".concat("tailored"===c?"border-black":""),onClick:()=>g("tailored"),children:"Tailored"}),(0,t.jsx)("button",{className:"button-outline ".concat("original"===c?"border-black":""),onClick:()=>g("original"),children:"Original"}),(0,t.jsx)("button",{className:"button-outline",onClick:async()=>{w(!0);try{let e=await fetch("/api/honesty",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({session_id:a.session_id})}),n=await e.json();if(!e.ok)throw Error((null==n?void 0:n.error)||"Honesty scan failed");y(n)}catch(e){alert((null==e?void 0:e.message)||"Honesty scan failed")}finally{w(!1)}},children:"Honesty scan"}),(0,t.jsx)("button",{className:"button",onClick:()=>s(!0),children:"Export"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,t.jsx)("div",{className:"label",children:"Template"}),(0,t.jsxs)("select",{className:"input w-auto",value:f,onChange:e=>j(e.target.value),children:[(0,t.jsx)("option",{value:"classic",children:"Classic"}),(0,t.jsx)("option",{value:"modern",children:"Modern"}),(0,t.jsx)("option",{value:"minimal",children:"Minimal"}),(0,t.jsx)("option",{value:"executive",children:"Executive"}),(0,t.jsx)("option",{value:"academic",children:"Academic/Projects"})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"label mb-2",children:["JSON structure (",c,")"]}),(0,t.jsx)("pre",{className:"bg-gray-50 p-3 rounded overflow-auto text-xs h-96",children:"tailored"===c?k:S})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"label mb-2",children:"Changes"}),(0,t.jsx)(p,{diffs:a.diffs||[]}),(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(x,{stats:a.keyword_stats})}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("div",{className:"label mb-2",children:"Visual preview"}),(0,t.jsx)("iframe",{className:"w-full h-96 bg-white border rounded",srcDoc:function(){var e,n,t,i,l,s,c;let p=a.preview_sections_json,x={includeSkills:!0,includeSummary:!0};return"classic"===f?'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  body { font-family: Arial, Helvetica, sans-serif; color:#111; font-size: 12pt; line-height: 1.35; }\n  h1,h2 { margin: 0 0 6px; }\n  h2 { font-size: 13pt; border-bottom: 1px solid #ddd; padding-bottom: 4px; }\n  .sec { margin: 14px 0; }\n  .role { font-weight: bold; }\n  ul { margin: 6px 0 0 16px; padding: 0; }\n  li { margin: 4px 0; }\n  .chips span { display:inline-block; border:1px solid #ccc; border-radius: 12px; padding: 2px 8px; margin: 0 6px 6px 0; font-size: 10pt; }\n</style></head><body>\n  '.concat(x.includeSummary&&p.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(r(p.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2>\n    ').concat(p.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(r(e.role)," — ").concat(r(e.company),'</div>\n        <div class="dates" style="color:#666">').concat(r(e.dates),"</div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(r(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(x.includeSkills&&(null===(e=p.skills)||void 0===e?void 0:e.length)?'<div class="sec"><h2>Skills</h2><div class="chips">'.concat((p.skills||[]).map(e=>"<span>".concat(r(e),"</span>")).join(""),"</div></div>"):"","\n  ").concat((null===(n=p.education)||void 0===n?void 0:n.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((p.education||[]).map(e=>"<li>".concat(r(e),"</li>")).join(""),"</ul></div>"):"","\n  ").concat((null===(t=p.certifications)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Certifications</h2><ul>'.concat((p.certifications||[]).map(e=>"<li>".concat(r(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>"):"modern"===f?'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  body { font-family: Inter, Arial, Helvetica, sans-serif; color:#111; font-size: 12pt; line-height: 1.35; }\n  h2 { font-size: 13pt; margin: 0 0 8px; }\n  .sec { margin: 14px 0; }\n  .row { display:flex; justify-content: space-between; }\n  .role { font-weight: 600; }\n  ul { margin: 6px 0 0 16px; padding: 0; }\n  li { margin: 4px 0; }\n  .chips span { display:inline-block; background:#f5f5f5; border-radius: 6px; padding: 2px 8px; margin: 0 6px 6px 0; font-size: 10pt; }\n  .divider { height:1px; background:#eee; margin:8px 0; }\n</style></head><body>\n  '.concat(x.includeSummary&&p.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(d(p.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2><div class="divider"></div>\n    ').concat(p.experience.map(e=>'\n      <div class="entry">\n        <div class="row"><div class="role">'.concat(d(e.role)," — ").concat(d(e.company),'</div><div style="color:#666">').concat(d(e.dates),"</div></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(d(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(x.includeSkills&&(null===(i=p.skills)||void 0===i?void 0:i.length)?'<div class="sec"><h2>Skills</h2><div class="chips">'.concat((p.skills||[]).map(e=>"<span>".concat(d(e),"</span>")).join(""),"</div></div>"):"","\n  ").concat((null===(l=p.education)||void 0===l?void 0:l.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((p.education||[]).map(e=>"<li>".concat(d(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>"):"executive"===f?function(e,n){var a,t,i,l;let s=(null===(a=e.contact)||void 0===a?void 0:a.name)||"",c=(l=e.contact)?[l.email,l.phone,l.location,l.website].filter(Boolean):[];return'<!doctype html><html><head><meta charset="utf-8" /><style>'.concat("\n  body{font-family: Arial, Helvetica, sans-serif; color:#0b0b0b; font-size:11.5pt; line-height:1.38;}\n  .wrap{max-width:820px; margin:0 auto;}\n  .hdr{display:grid; grid-template-columns: 2fr 1fr; gap:16px; align-items:flex-end; border-bottom:2px solid #111; padding-bottom:10px; margin-bottom:14px}\n  .name{font-size:20pt; font-weight:700; letter-spacing:.2px}\n  .contact{font-size:10pt; color:#444; text-align:right}\n  h2{font-size:12.8pt; margin:14px 0 6px; letter-spacing:.2px}\n  .sec{margin: 6px 0 10px}\n  .role{font-weight:600}\n  ul{margin:4px 0 0 16px; padding:0}\n  li{margin:2px 0}\n  .meta{color:#666; font-weight:400}\n  ",'</style></head><body><div class="wrap">\n  <div class="hdr">\n    <div class="name">').concat(u(s),'</div>\n    <div class="contact">').concat(c.join(" \xb7 "),"</div>\n  </div>\n  ").concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Executive Summary</h2><div>'.concat(u(e.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2>\n    ').concat(e.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(u(e.role)," — ").concat(u(e.company),' <span class="meta">(').concat(u(e.dates),")</span></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(u(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(n.includeSkills&&(null===(t=e.skills)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Core Skills</h2><div>'.concat((e.skills||[]).join(" • "),"</div></div>"):"","\n  ").concat((null===(i=e.education)||void 0===i?void 0:i.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(u(e),"</li>")).join(""),"</ul></div>"):"","\n  </div></body></html>")}(p,x):"academic"===f?function(e,n){var a,t,i;let l=e.contact||{};return'<!doctype html><html><head><meta charset="utf-8" /><style>'.concat("\n  body{font-family: Arial, Helvetica, sans-serif; color:#111; font-size:11.5pt; line-height:1.4}\n  .wrap{max-width:820px; margin:0 auto}\n  h1{font-size:18pt; margin:0 0 6px; font-weight:700}\n  h2{font-size:12.5pt; margin:12px 0 6px}\n  .sec{margin: 6px 0 10px}\n  ul{margin:4px 0 0 16px; padding:0}\n  li{margin:2px 0}\n  .meta{color:#666}\n  ",'</style></head><body><div class="wrap">\n    <h1>').concat(h(l.name||""),"</h1>\n    ").concat(n.includeSummary&&e.summary?'<div class="sec"><h2>Research Summary</h2><div>'.concat(h(e.summary),"</div></div>"):"","\n    ").concat(m("Projects",(null===(a=e.projects)||void 0===a?void 0:a.map(e=>"".concat(h(e.name)," — ").concat(e.bullets.map(e=>h(e)).join("; "))))||[]),"\n    ").concat(m("Publications",e.publications||[]),"\n    ").concat(m("Teaching",e.teaching||[]),"\n    ").concat(m("Experience",(e.experience||[]).map(e=>"".concat(h(e.role)," — ").concat(h(e.company)," <span class=meta>(").concat(h(e.dates),")</span>"))),"\n    ").concat(n.includeSkills&&(null===(t=e.skills)||void 0===t?void 0:t.length)?'<div class="sec"><h2>Skills</h2><div>'.concat((e.skills||[]).join(" • "),"</div></div>"):"","\n    ").concat((null===(i=e.education)||void 0===i?void 0:i.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((e.education||[]).map(e=>"<li>".concat(h(e),"</li>")).join(""),"</ul></div>"):"","\n  </div></body></html>")}(p,x):'<!doctype html>\n<html><head><meta charset="utf-8" /><style>\n  /* Force safe system fonts to avoid blank glyphs in serverless Chromium */\n  body { font-family: Arial, Helvetica, sans-serif; color:#111; font-size: 11.5pt; line-height: 1.35; }\n  h2 { font-size: 12.5pt; margin: 0 0 6px; letter-spacing: 0.2px; }\n  .sec { margin: 16px 0; }\n  .role { font-weight: 600; }\n  ul { margin: 4px 0 0 16px; padding: 0; }\n  li { margin: 2px 0; }\n  .sep { height:1px; background:#eaeaea; margin:10px 0; }\n</style></head><body>\n  '.concat(x.includeSummary&&p.summary?'<div class="sec"><h2>Summary</h2><div>'.concat(o(p.summary),"</div></div>"):"",'\n  <div class="sec"><h2>Experience</h2><div class="sep"></div>\n    ').concat(p.experience.map(e=>'\n      <div class="entry">\n        <div class="role">'.concat(o(e.role)," — ").concat(o(e.company),' <span style="color:#666; font-weight:400">(').concat(o(e.dates),")</span></div>\n        <ul>").concat(e.bullets.map(e=>"<li>".concat(o(e),"</li>")).join(""),"</ul>\n      </div>\n    ")).join(""),"\n  </div>\n  ").concat(x.includeSkills&&(null===(s=p.skills)||void 0===s?void 0:s.length)?'<div class="sec"><h2>Skills</h2><div>'.concat((p.skills||[]).join(" • "),"</div></div>"):"","\n  ").concat((null===(c=p.education)||void 0===c?void 0:c.length)?'<div class="sec"><h2>Education</h2><ul>'.concat((p.education||[]).map(e=>"<li>".concat(o(e),"</li>")).join(""),"</ul></div>"):"","\n</body></html>")}()})]})]})]}),b&&(0,t.jsxs)("div",{className:"mt-4 border rounded-md p-3 bg-white",children:[(0,t.jsx)("div",{className:"font-medium mb-1",children:"Honesty scan"}),(null===(n=b.flags)||void 0===n?void 0:n.length)?b.flags.map((e,n)=>(0,t.jsxs)("div",{className:"mb-2 text-xs",children:[(0,t.jsxs)("div",{children:["⚠️ ",(0,t.jsx)("strong",{children:e.role}),": ",e.bullet]}),(0,t.jsxs)("div",{className:"text-gray-600",children:["Backed by: ",(e.backing||[]).join(" | ")||"No close match in original."]})]},n)):(0,t.jsx)("div",{className:"text-xs text-green-700",children:"All rewritten bullets appear supported by the original."})]}),l&&(0,t.jsx)(v,{sessionId:a.session_id,onClose:()=>s(!1)})]})}let f=s()(()=>Promise.all([a.e(486),a.e(971),a.e(328)]).then(a.bind(a,5328)),{loadableGenerated:{webpack:()=>[5328]},ssr:!1}),j=s()(()=>a.e(727).then(a.bind(a,4727)),{loadableGenerated:{webpack:()=>[4727]},ssr:!1});function b(){let[e,n]=(0,i.useState)(null),[l,s]=(0,i.useState)(""),[o,d]=(0,i.useState)("professional"),[r,u]=(0,i.useState)(null),[m,h]=(0,i.useState)(!1),p=function(){let[e,n]=(0,i.useState)(!1),[a,t]=(0,i.useState)("");return(0,i.useEffect)(()=>{n(document.cookie.includes("invite="))},[]),{ok:e,code:a,setCode:t,submit:function(){a&&(document.cookie="invite=".concat(encodeURIComponent(a),"; path=/; max-age=2592000"),n(!0))}}}(),[x,v]=(0,i.useState)(""),b=(0,i.useRef)(!1);async function y(e){try{if(!(e.type.includes("pdf")||e.name.toLowerCase().endsWith(".pdf")))return"";let n=(await a.e(728).then(a.t.bind(a,7728,23))).default||await a.e(728).then(a.t.bind(a,7728,23)),{getPdfJs:t}=await Promise.all([a.e(83),a.e(246)]).then(a.bind(a,3246)),i=await t(),l=await e.arrayBuffer(),s=await i.getDocument({data:l}).promise,c=await s.getPage(1),o=c.getViewport({scale:1.5}),d=document.createElement("canvas"),r=d.getContext("2d");d.width=o.width,d.height=o.height,await c.render({canvasContext:r,viewport:o}).promise;let u=d.toDataURL("image/png"),{data:{text:m}}=await n.recognize(u,"eng");return(m||"").trim()}catch(e){return""}}async function N(){if(!e&&!x)return alert("Upload a resume or run OCR, and paste a job description.");if(!l)return alert("Paste a job description.");h(!0);try{var n,a;if(e&&((null===(n=e.type)||void 0===n?void 0:n.includes("pdf"))||(null===(a=e.name)||void 0===a?void 0:a.toLowerCase().endsWith(".pdf")))&&!b.current){b.current=!0;let n=await y(e);n&&n.length>50&&v(n)}let t=new FormData;e&&t.append("resume_file",e),!e&&x&&t.append("resume_text",x),t.append("jd_text",l),t.append("tone",o);let i=await fetch("/api/tailor",{method:"POST",body:t}),s=await i.json();if(!i.ok){if((null==s?void 0:s.code)==="scanned_pdf"&&e&&!b.current){b.current=!0;let n=await y(e);if(n&&n.length>50){v(n);let e=new FormData;e.append("resume_text",n),e.append("jd_text",l),e.append("tone",o);let a=await fetch("/api/tailor",{method:"POST",body:e}),t=await a.json();if(!a.ok)throw Error((null==t?void 0:t.error)||"Tailoring failed.");u(t);return}}if((null==s?void 0:s.code)==="scanned_pdf"&&e){let n=await y(e);if(n&&n.length>50){let e=new FormData;e.append("resume_text",n),e.append("jd_text",l),e.append("tone",o);let a=await fetch("/api/tailor",{method:"POST",body:e}),t=await a.json();if(!a.ok)throw Error((null==t?void 0:t.error)||"Tailoring failed.");u(t);return}}throw Error((null==s?void 0:s.error)||"Tailoring failed.")}if((null==s?void 0:s.code)==="scanned_pdf"&&e){let n=await y(e);if(n&&n.length>50){let e=new FormData;e.append("resume_text",n),e.append("jd_text",l),e.append("tone",o);let a=await fetch("/api/tailor",{method:"POST",body:e}),t=await a.json();if(!a.ok)throw Error((null==t?void 0:t.error)||"Tailoring failed.");u(t);return}}u(s)}catch(e){alert((null==e?void 0:e.message)||"Failed to tailor.")}finally{h(!1)}}return p.ok?(0,t.jsxs)("main",{className:"grid gap-6",children:[(0,t.jsxs)("section",{className:"card p-6",children:[(0,t.jsx)("h1",{className:"mb-1",children:"Tailor your resume to any job"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Upload resume → paste job → click Tailor. Bullets rewritten with integrity guardrails. Export ATS-safe PDF/DOCX."}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"1) Upload Resume (PDF, DOCX, or TXT)"}),(0,t.jsx)(f,{onFile:n}),(0,t.jsx)(j,{onText:v})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"label",children:"2) Paste Job Listing (URL or plain text)"}),(0,t.jsx)(c,{value:l,onChange:s})]})]}),(0,t.jsxs)("div",{className:"mt-4 flex items-center gap-3",children:[(0,t.jsx)("label",{className:"label",children:"Tone"}),(0,t.jsxs)("select",{className:"input w-auto",value:o,onChange:e=>d(e.target.value),children:[(0,t.jsx)("option",{value:"professional",children:"Professional"}),(0,t.jsx)("option",{value:"concise",children:"Concise"}),(0,t.jsx)("option",{value:"impact-heavy",children:"Impact-heavy"})]}),(0,t.jsx)("button",{className:"button ml-auto",onClick:N,disabled:m,children:m?"Tailoring…":"Tailor"})]})]}),r&&(0,t.jsx)(g,{session:r})]}):(0,t.jsx)("main",{className:"grid gap-6",children:(0,t.jsxs)("section",{className:"card p-6",children:[(0,t.jsx)("h1",{className:"mb-1",children:"Enter Invite Code"}),(0,t.jsx)("p",{className:"text-gray-600 mb-4",children:"Access is limited during beta. Enter your invite code to continue."}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)("input",{className:"input",placeholder:"Invite code",value:p.code,onChange:e=>p.setCode(e.target.value)}),(0,t.jsx)("button",{className:"button",onClick:p.submit,children:"Continue"})]})]})})}},551:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return l}});let t=a(9920);a(7437),a(2265);let i=t._(a(148));function l(e,n){var a;let t={loading:e=>{let{error:n,isLoading:a,pastDelay:t}=e;return null}};"function"==typeof e&&(t.loader=e);let l={...t,...n};return(0,i.default)({...l,modules:null==(a=l.loadableGenerated)?void 0:a.modules})}("function"==typeof n.default||"object"==typeof n.default&&null!==n.default)&&void 0===n.default.__esModule&&(Object.defineProperty(n.default,"__esModule",{value:!0}),Object.assign(n.default,n),e.exports=n.default)},912:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"BailoutToCSR",{enumerable:!0,get:function(){return i}});let t=a(5592);function i(e){let{reason:n,children:a}=e;if("undefined"==typeof window)throw new t.BailoutToCSRError(n);return a}},148:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return d}});let t=a(7437),i=a(2265),l=a(912),s=a(1481);function c(e){return{default:e&&"default"in e?e.default:e}}let o={loader:()=>Promise.resolve(c(()=>null)),loading:null,ssr:!0},d=function(e){let n={...o,...e},a=(0,i.lazy)(()=>n.loader().then(c)),d=n.loading;function r(e){let c=d?(0,t.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,o=n.ssr?(0,t.jsxs)(t.Fragment,{children:["undefined"==typeof window?(0,t.jsx)(s.PreloadCss,{moduleIds:n.modules}):null,(0,t.jsx)(a,{...e})]}):(0,t.jsx)(l.BailoutToCSR,{reason:"next/dynamic",children:(0,t.jsx)(a,{...e})});return(0,t.jsx)(i.Suspense,{fallback:c,children:o})}return r.displayName="LoadableComponent",r}},1481:function(e,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"PreloadCss",{enumerable:!0,get:function(){return l}});let t=a(7437),i=a(8512);function l(e){let{moduleIds:n}=e;if("undefined"!=typeof window)return null;let a=(0,i.getExpectedRequestStore)("next/dynamic css"),l=[];if(a.reactLoadableManifest&&n){let e=a.reactLoadableManifest;for(let a of n){if(!e[a])continue;let n=e[a].files.filter(e=>e.endsWith(".css"));l.push(...n)}}return 0===l.length?null:(0,t.jsx)(t.Fragment,{children:l.map(e=>(0,t.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:a.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[478,23,744],function(){return e(e.s=4033)}),_N_E=e.O()}]);