"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/tailor/route";
exports.ids = ["app/api/tailor/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftailor%2Froute&page=%2Fapi%2Ftailor%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftailor%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftailor%2Froute&page=%2Fapi%2Ftailor%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftailor%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_yassinkhalil_Downloads_ai_resume_tailor_v2_full_app_api_tailor_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/tailor/route.ts */ \"(rsc)/./app/api/tailor/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/tailor/route\",\n        pathname: \"/api/tailor\",\n        filename: \"route\",\n        bundlePath: \"app/api/tailor/route\"\n    },\n    resolvedPagePath: \"/Users/yassinkhalil/Downloads/ai-resume-tailor_v2_full/app/api/tailor/route.ts\",\n    nextConfigOutput,\n    userland: _Users_yassinkhalil_Downloads_ai_resume_tailor_v2_full_app_api_tailor_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/tailor/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ0YWlsb3IlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnRhaWxvciUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnRhaWxvciUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnlhc3NpbmtoYWxpbCUyRkRvd25sb2FkcyUyRmFpLXJlc3VtZS10YWlsb3JfdjJfZnVsbCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ5YXNzaW5raGFsaWwlMkZEb3dubG9hZHMlMkZhaS1yZXN1bWUtdGFpbG9yX3YyX2Z1bGwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktcmVzdW1lLXRhaWxvci8/OTZlNSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMveWFzc2lua2hhbGlsL0Rvd25sb2Fkcy9haS1yZXN1bWUtdGFpbG9yX3YyX2Z1bGwvYXBwL2FwaS90YWlsb3Ivcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3RhaWxvci9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3RhaWxvclwiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvdGFpbG9yL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3lhc3NpbmtoYWxpbC9Eb3dubG9hZHMvYWktcmVzdW1lLXRhaWxvcl92Ml9mdWxsL2FwcC9hcGkvdGFpbG9yL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS90YWlsb3Ivcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftailor%2Froute&page=%2Fapi%2Ftailor%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftailor%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/tailor/route.ts":
/*!*********************************!*\
  !*** ./app/api/tailor/route.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_parsers__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/parsers */ \"(rsc)/./lib/parsers.ts\");\n/* harmony import */ var _lib_ai_response_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/ai-response-parser */ \"(rsc)/./lib/ai-response-parser.ts\");\n/* harmony import */ var _lib_ats__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/ats */ \"(rsc)/./lib/ats.ts\");\n/* harmony import */ var _lib_sessions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/sessions */ \"(rsc)/./lib/sessions.ts\");\n/* harmony import */ var _lib_guards__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../lib/guards */ \"(rsc)/./lib/guards.ts\");\n/* harmony import */ var _lib_config__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../../../lib/config */ \"(rsc)/./lib/config.ts\");\n/* harmony import */ var _lib_telemetry__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../../../lib/telemetry */ \"(rsc)/./lib/telemetry.ts\");\n/* harmony import */ var _lib_ai_error_handler__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ../../../lib/ai-error-handler */ \"(rsc)/./lib/ai-error-handler.ts\");\n/* harmony import */ var _lib_parsing_validation__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ../../../lib/parsing-validation */ \"(rsc)/./lib/parsing-validation.ts\");\n\n\n\n\n\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nconst maxDuration = 30;\nasync function POST(req) {\n    console.log(\"Tailor API called:\", {\n        method: req.method,\n        url: req.url,\n        timestamp: new Date().toISOString()\n    });\n    let session_id;\n    let resume_file = null;\n    let jd_text_raw = \"\";\n    let tone = \"professional\";\n    try {\n        const guard = (0,_lib_guards__WEBPACK_IMPORTED_MODULE_5__.enforceGuards)(req);\n        if (!guard.ok) {\n            console.log(\"Guard check failed:\", guard.res);\n            return guard.res;\n        }\n        const cfg = (0,_lib_config__WEBPACK_IMPORTED_MODULE_6__.getConfig)();\n        if (cfg.pauseTailor) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"tailor_paused\",\n                message: \"Tailoring functionality is temporarily disabled\"\n            }, {\n                status: 503\n            });\n        }\n        console.log(\"Guard check passed\");\n        const trace = (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_7__.startTrace)({\n            route: \"tailor\"\n        });\n        console.log(\"Trace started\");\n        const ct = req.headers.get(\"content-type\") || \"\";\n        if (!ct.includes(\"multipart/form-data\")) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"invalid_content_type\",\n                message: \"Request must be multipart/form-data\"\n            }, {\n                status: 415\n            });\n        }\n        const form = await req.formData();\n        session_id = form.get(\"session_id\")?.toString();\n        resume_file = form.get(\"resume_file\");\n        jd_text_raw = form.get(\"jd_text\")?.toString() || \"\";\n        tone = form.get(\"tone\")?.toString() || \"professional\";\n        console.log(\"Processing request:\", {\n            hasResumeFile: !!resume_file,\n            jdTextLength: jd_text_raw.length,\n            tone\n        });\n        if (!resume_file) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            code: \"missing_resume\",\n            message: \"Missing resume input\"\n        }, {\n            status: 400\n        });\n        if (!jd_text_raw) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            code: \"missing_jd\",\n            message: \"Missing jd_text\"\n        }, {\n            status: 400\n        });\n        const parsed = await (0,_lib_parsers__WEBPACK_IMPORTED_MODULE_1__.extractTextFromFile)(resume_file);\n        const resumeText = parsed.text;\n        const ext = parsed.ext;\n        if (ext === \"pdf\" && (!resumeText || resumeText.trim().length < 50)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"scanned_pdf\",\n                message: \"Your PDF appears to be image-only (scanned). Please upload a DOCX or a text-based PDF.\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Parsing resume...\");\n        const original = (0,_lib_parsers__WEBPACK_IMPORTED_MODULE_1__.heuristicParseResume)(resumeText);\n        console.log(\"Resume parsed successfully:\", {\n            hasSummary: !!original.summary,\n            skillsCount: original.skills?.length || 0,\n            experienceCount: original.experience?.length || 0,\n            educationCount: original.education?.length || 0,\n            certificationsCount: original.certifications?.length || 0\n        });\n        // Validate parsing results\n        const validation = (0,_lib_parsing_validation__WEBPACK_IMPORTED_MODULE_9__.validateParsingResult)(original);\n        console.log(\"Parsing validation:\", validation);\n        // Check if we should block due to missing experience\n        if ((0,_lib_parsing_validation__WEBPACK_IMPORTED_MODULE_9__.shouldShowExperienceBanner)(validation)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"missing_experience\",\n                message: \"No work experience detected in your resume\",\n                validation,\n                original_sections_json: original,\n                suggestions: [\n                    \"Paste your work history manually\",\n                    \"Try uploading a different resume format\",\n                    \"Check if your resume has experience section headings\"\n                ]\n            }, {\n                status: 422\n            }) // Unprocessable Entity\n            ;\n        }\n        console.log(\"Tailoring resume...\");\n        const { tailored, tokens } = await (0,_lib_ai_response_parser__WEBPACK_IMPORTED_MODULE_2__.getTailoredResume)(original, jd_text_raw, tone);\n        console.log(\"Resume tailored successfully:\", {\n            hasSummary: !!tailored.summary,\n            skillsCount: tailored.skills_section?.length || 0,\n            experienceCount: tailored.experience?.length || 0\n        });\n        console.log(\"Running ATS check...\");\n        const keywordStats = (0,_lib_ats__WEBPACK_IMPORTED_MODULE_3__.atsCheck)(original, jd_text_raw);\n        console.log(\"ATS check completed:\", {\n            coverage: keywordStats.coverage,\n            matchedKeywords: keywordStats.matched?.length || 0,\n            missingKeywords: keywordStats.missing?.length || 0\n        });\n        console.log(\"Creating session...\");\n        const session = (0,_lib_sessions__WEBPACK_IMPORTED_MODULE_4__.createSession)(original, tailored, jd_text_raw, keywordStats);\n        console.log(\"Session created:\", session.id);\n        // Log successful request telemetry\n        (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_7__.logRequestTelemetry)({\n            req_id: trace.id,\n            route: \"tailor\",\n            timing: Date.now() - trace.startTime,\n            final_status: \"success\",\n            additional_metrics: {\n                resume_length: resumeText.length,\n                jd_length: jd_text_raw.length,\n                tone,\n                tokens_used: tokens,\n                ats_coverage: keywordStats.coverage,\n                original_experience_count: original.experience?.length || 0,\n                tailored_experience_count: tailored.experience?.length || 0,\n                validation_errors: validation.errors.length,\n                validation_warnings: validation.warnings.length\n            }\n        });\n        trace.end(true, {\n            session_id: session.id,\n            tokens,\n            ats_coverage: keywordStats.coverage\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            session_id: session.id,\n            version: session.version,\n            original_sections_json: original,\n            preview_sections_json: tailored,\n            keyword_stats: keywordStats,\n            tokens_used: tokens,\n            message: \"Resume tailored successfully\",\n            validation,\n            parsing_details: {\n                original_sections_found: {\n                    summary: !!original.summary,\n                    skills: (original.skills?.length || 0) > 0,\n                    experience: (original.experience?.length || 0) > 0,\n                    education: (original.education?.length || 0) > 0,\n                    certifications: (original.certifications?.length || 0) > 0\n                },\n                tailored_sections_generated: {\n                    summary: !!tailored.summary,\n                    skills: (tailored.skills_section?.length || 0) > 0,\n                    experience: (tailored.experience?.length || 0) > 0\n                }\n            }\n        });\n    } catch (error) {\n        console.error(\"Tailor API error:\", error);\n        console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        // Create detailed error information\n        const errorDetails = {\n            route: \"tailor\",\n            session_id: session_id || \"unknown\",\n            hasResumeFile: !!resume_file,\n            jdLength: jd_text_raw.length,\n            tone: tone || \"unknown\",\n            errorMessage: error instanceof Error ? error.message : String(error),\n            errorStack: error instanceof Error ? error.stack : undefined\n        };\n        // Log the error with context\n        (0,_lib_telemetry__WEBPACK_IMPORTED_MODULE_7__.logError)(error, errorDetails);\n        // Create user-friendly error message\n        const userMessage = (0,_lib_ai_error_handler__WEBPACK_IMPORTED_MODULE_8__.createUserFriendlyError)(error, errorDetails);\n        // Ensure we always return a proper JSON response\n        try {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"server_error\",\n                message: userMessage,\n                details:  true ? String(error) : 0,\n                timestamp: new Date().toISOString(),\n                error_type: error instanceof Error ? error.constructor.name : \"UnknownError\"\n            }, {\n                status: 500\n            });\n        } catch (jsonError) {\n            console.error(\"Failed to create JSON response:\", jsonError);\n            // Fallback to JSON response even if JSON creation fails\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"server_error\",\n                message: \"An unexpected error occurred\"\n            }, {\n                status: 500\n            });\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RTtnQkFDVEMsU0FBU0MsS0FBeUIsR0FBZ0JMLE9BQU9OLFNBQVNRLENBQVNBO2dCQUMzRXpGLFdBQVcsSUFBSUMsT0FBT0MsV0FBVztnQkFDakMyRixZQUFZWixpQkFBaUJDLFFBQVFELE1BQU1hLFdBQVcsQ0FBQ0MsSUFBSSxHQUFHO1lBQ2hFLEdBQUc7Z0JBQUVoRixRQUFRO1lBQUk7UUFDbkIsRUFBRSxPQUFPaUYsV0FBVztZQUNsQnBHLFFBQVFxRixLQUFLLENBQUMsbUNBQW1DZTtZQUNqRCx3REFBd0Q7WUFDeEQsT0FBT3ZILHFEQUFZQSxDQUFDbUMsSUFBSSxDQUFDO2dCQUN2QkMsTUFBTTtnQkFDTkMsU0FBUztZQUNYLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNuQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vYXBwL2FwaS90YWlsb3Ivcm91dGUudHM/ZTQxOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBleHRyYWN0VGV4dEZyb21GaWxlLCBoZXVyaXN0aWNQYXJzZVJlc3VtZSB9IGZyb20gJy4uLy4uLy4uL2xpYi9wYXJzZXJzJ1xuaW1wb3J0IHsgZ2V0VGFpbG9yZWRSZXN1bWUgfSBmcm9tICcuLi8uLi8uLi9saWIvYWktcmVzcG9uc2UtcGFyc2VyJ1xuaW1wb3J0IHsgYXRzQ2hlY2sgfSBmcm9tICcuLi8uLi8uLi9saWIvYXRzJ1xuaW1wb3J0IHsgY3JlYXRlU2Vzc2lvbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9zZXNzaW9ucydcbmltcG9ydCB7IGVuZm9yY2VHdWFyZHMgfSBmcm9tICcuLi8uLi8uLi9saWIvZ3VhcmRzJ1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi4vLi4vLi4vbGliL2NvbmZpZydcbmltcG9ydCB7IHN0YXJ0VHJhY2UsIGxvZ1JlcXVlc3RUZWxlbWV0cnksIGxvZ0Vycm9yIH0gZnJvbSAnLi4vLi4vLi4vbGliL3RlbGVtZXRyeSdcbmltcG9ydCB7IGNyZWF0ZVVzZXJGcmllbmRseUVycm9yLCBsb2dBSUVycm9yIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FpLWVycm9yLWhhbmRsZXInXG5pbXBvcnQgeyB2YWxpZGF0ZVBhcnNpbmdSZXN1bHQsIHNob3VsZFNob3dFeHBlcmllbmNlQmFubmVyIH0gZnJvbSAnLi4vLi4vLi4vbGliL3BhcnNpbmctdmFsaWRhdGlvbidcbmltcG9ydCB7IFRvbmUgfSBmcm9tICcuLi8uLi8uLi9saWIvdHlwZXMnXG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ25vZGVqcyc7XG5leHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJztcbmV4cG9ydCBjb25zdCBtYXhEdXJhdGlvbiA9IDMwO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnNvbGUubG9nKCdUYWlsb3IgQVBJIGNhbGxlZDonLCB7XG4gICAgbWV0aG9kOiByZXEubWV0aG9kLFxuICAgIHVybDogcmVxLnVybCxcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxuICB9KVxuXG4gIGxldCBzZXNzaW9uX2lkOiBzdHJpbmcgfCB1bmRlZmluZWRcbiAgbGV0IHJlc3VtZV9maWxlOiBGaWxlIHwgbnVsbCA9IG51bGxcbiAgbGV0IGpkX3RleHRfcmF3OiBzdHJpbmcgPSAnJ1xuICBsZXQgdG9uZTogVG9uZSA9ICdwcm9mZXNzaW9uYWwnXG5cbiAgdHJ5IHtcbiAgICBjb25zdCBndWFyZCA9IGVuZm9yY2VHdWFyZHMocmVxKVxuICAgIGlmICghZ3VhcmQub2spIHtcbiAgICAgIGNvbnNvbGUubG9nKCdHdWFyZCBjaGVjayBmYWlsZWQ6JywgZ3VhcmQucmVzKVxuICAgICAgcmV0dXJuIGd1YXJkLnJlc1xuICAgIH1cbiAgICBjb25zdCBjZmcgPSBnZXRDb25maWcoKVxuICAgIGlmIChjZmcucGF1c2VUYWlsb3IpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICd0YWlsb3JfcGF1c2VkJywgbWVzc2FnZTogJ1RhaWxvcmluZyBmdW5jdGlvbmFsaXR5IGlzIHRlbXBvcmFyaWx5IGRpc2FibGVkJyB9LCB7IHN0YXR1czogNTAzIH0pXG4gICAgfVxuICAgIGNvbnNvbGUubG9nKCdHdWFyZCBjaGVjayBwYXNzZWQnKVxuXG4gICAgY29uc3QgdHJhY2UgPSBzdGFydFRyYWNlKHsgcm91dGU6ICd0YWlsb3InIH0pXG4gICAgY29uc29sZS5sb2coJ1RyYWNlIHN0YXJ0ZWQnKVxuXG4gICAgY29uc3QgY3QgPSByZXEuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpIHx8ICcnXG4gICAgaWYgKCFjdC5pbmNsdWRlcygnbXVsdGlwYXJ0L2Zvcm0tZGF0YScpKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBjb2RlOiAnaW52YWxpZF9jb250ZW50X3R5cGUnLCBtZXNzYWdlOiAnUmVxdWVzdCBtdXN0IGJlIG11bHRpcGFydC9mb3JtLWRhdGEnIH0sIHsgc3RhdHVzOiA0MTUgfSlcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtID0gYXdhaXQgcmVxLmZvcm1EYXRhKClcbiAgICBzZXNzaW9uX2lkID0gZm9ybS5nZXQoJ3Nlc3Npb25faWQnKT8udG9TdHJpbmcoKVxuICAgIHJlc3VtZV9maWxlID0gZm9ybS5nZXQoJ3Jlc3VtZV9maWxlJykgYXMgdW5rbm93biBhcyBGaWxlIHwgbnVsbFxuICAgIGpkX3RleHRfcmF3ID0gZm9ybS5nZXQoJ2pkX3RleHQnKT8udG9TdHJpbmcoKSB8fCAnJ1xuICAgIHRvbmUgPSAoZm9ybS5nZXQoJ3RvbmUnKT8udG9TdHJpbmcoKSBhcyBUb25lKSB8fCAncHJvZmVzc2lvbmFsJ1xuICAgIGNvbnNvbGUubG9nKCdQcm9jZXNzaW5nIHJlcXVlc3Q6JywgeyBcbiAgICAgIGhhc1Jlc3VtZUZpbGU6ICEhcmVzdW1lX2ZpbGUsIFxuICAgICAgamRUZXh0TGVuZ3RoOiBqZF90ZXh0X3Jhdy5sZW5ndGgsXG4gICAgICB0b25lIFxuICAgIH0pXG5cbiAgICBpZiAoIXJlc3VtZV9maWxlKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBjb2RlOiAnbWlzc2luZ19yZXN1bWUnLCBtZXNzYWdlOiAnTWlzc2luZyByZXN1bWUgaW5wdXQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICBpZiAoIWpkX3RleHRfcmF3KSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBjb2RlOiAnbWlzc2luZ19qZCcsIG1lc3NhZ2U6ICdNaXNzaW5nIGpkX3RleHQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcblxuICAgIGNvbnN0IHBhcnNlZCA9IGF3YWl0IGV4dHJhY3RUZXh0RnJvbUZpbGUocmVzdW1lX2ZpbGUpXG4gICAgY29uc3QgcmVzdW1lVGV4dCA9IHBhcnNlZC50ZXh0XG4gICAgY29uc3QgZXh0ID0gcGFyc2VkLmV4dFxuICAgIFxuICAgIGlmIChleHQgPT09ICdwZGYnICYmICghcmVzdW1lVGV4dCB8fCByZXN1bWVUZXh0LnRyaW0oKS5sZW5ndGggPCA1MCkpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICdzY2FubmVkX3BkZicsIG1lc3NhZ2U6ICdZb3VyIFBERiBhcHBlYXJzIHRvIGJlIGltYWdlLW9ubHkgKHNjYW5uZWQpLiBQbGVhc2UgdXBsb2FkIGEgRE9DWCBvciBhIHRleHQtYmFzZWQgUERGLicgfSwgeyBzdGF0dXM6IDQwMCB9KVxuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdQYXJzaW5nIHJlc3VtZS4uLicpXG4gICAgY29uc3Qgb3JpZ2luYWwgPSBoZXVyaXN0aWNQYXJzZVJlc3VtZShyZXN1bWVUZXh0KVxuICAgIGNvbnNvbGUubG9nKCdSZXN1bWUgcGFyc2VkIHN1Y2Nlc3NmdWxseTonLCB7XG4gICAgICBoYXNTdW1tYXJ5OiAhIW9yaWdpbmFsLnN1bW1hcnksXG4gICAgICBza2lsbHNDb3VudDogb3JpZ2luYWwuc2tpbGxzPy5sZW5ndGggfHwgMCxcbiAgICAgIGV4cGVyaWVuY2VDb3VudDogb3JpZ2luYWwuZXhwZXJpZW5jZT8ubGVuZ3RoIHx8IDAsXG4gICAgICBlZHVjYXRpb25Db3VudDogb3JpZ2luYWwuZWR1Y2F0aW9uPy5sZW5ndGggfHwgMCxcbiAgICAgIGNlcnRpZmljYXRpb25zQ291bnQ6IG9yaWdpbmFsLmNlcnRpZmljYXRpb25zPy5sZW5ndGggfHwgMFxuICAgIH0pXG5cbiAgICAvLyBWYWxpZGF0ZSBwYXJzaW5nIHJlc3VsdHNcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gdmFsaWRhdGVQYXJzaW5nUmVzdWx0KG9yaWdpbmFsKVxuICAgIGNvbnNvbGUubG9nKCdQYXJzaW5nIHZhbGlkYXRpb246JywgdmFsaWRhdGlvbilcblxuICAgIC8vIENoZWNrIGlmIHdlIHNob3VsZCBibG9jayBkdWUgdG8gbWlzc2luZyBleHBlcmllbmNlXG4gICAgaWYgKHNob3VsZFNob3dFeHBlcmllbmNlQmFubmVyKHZhbGlkYXRpb24pKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBjb2RlOiAnbWlzc2luZ19leHBlcmllbmNlJyxcbiAgICAgICAgbWVzc2FnZTogJ05vIHdvcmsgZXhwZXJpZW5jZSBkZXRlY3RlZCBpbiB5b3VyIHJlc3VtZScsXG4gICAgICAgIHZhbGlkYXRpb24sXG4gICAgICAgIG9yaWdpbmFsX3NlY3Rpb25zX2pzb246IG9yaWdpbmFsLFxuICAgICAgICBzdWdnZXN0aW9uczogW1xuICAgICAgICAgICdQYXN0ZSB5b3VyIHdvcmsgaGlzdG9yeSBtYW51YWxseScsXG4gICAgICAgICAgJ1RyeSB1cGxvYWRpbmcgYSBkaWZmZXJlbnQgcmVzdW1lIGZvcm1hdCcsXG4gICAgICAgICAgJ0NoZWNrIGlmIHlvdXIgcmVzdW1lIGhhcyBleHBlcmllbmNlIHNlY3Rpb24gaGVhZGluZ3MnXG4gICAgICAgIF1cbiAgICAgIH0sIHsgc3RhdHVzOiA0MjIgfSkgLy8gVW5wcm9jZXNzYWJsZSBFbnRpdHlcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnVGFpbG9yaW5nIHJlc3VtZS4uLicpXG4gICAgY29uc3QgeyB0YWlsb3JlZCwgdG9rZW5zIH0gPSBhd2FpdCBnZXRUYWlsb3JlZFJlc3VtZShvcmlnaW5hbCwgamRfdGV4dF9yYXcsIHRvbmUpXG4gICAgY29uc29sZS5sb2coJ1Jlc3VtZSB0YWlsb3JlZCBzdWNjZXNzZnVsbHk6Jywge1xuICAgICAgaGFzU3VtbWFyeTogISF0YWlsb3JlZC5zdW1tYXJ5LFxuICAgICAgc2tpbGxzQ291bnQ6IHRhaWxvcmVkLnNraWxsc19zZWN0aW9uPy5sZW5ndGggfHwgMCxcbiAgICAgIGV4cGVyaWVuY2VDb3VudDogdGFpbG9yZWQuZXhwZXJpZW5jZT8ubGVuZ3RoIHx8IDBcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ1J1bm5pbmcgQVRTIGNoZWNrLi4uJylcbiAgICBjb25zdCBrZXl3b3JkU3RhdHMgPSBhdHNDaGVjayhvcmlnaW5hbCwgamRfdGV4dF9yYXcpXG4gICAgY29uc29sZS5sb2coJ0FUUyBjaGVjayBjb21wbGV0ZWQ6Jywge1xuICAgICAgY292ZXJhZ2U6IGtleXdvcmRTdGF0cy5jb3ZlcmFnZSxcbiAgICAgIG1hdGNoZWRLZXl3b3Jkczoga2V5d29yZFN0YXRzLm1hdGNoZWQ/Lmxlbmd0aCB8fCAwLFxuICAgICAgbWlzc2luZ0tleXdvcmRzOiBrZXl3b3JkU3RhdHMubWlzc2luZz8ubGVuZ3RoIHx8IDBcbiAgICB9KVxuXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHNlc3Npb24uLi4nKVxuICAgIGNvbnN0IHNlc3Npb24gPSBjcmVhdGVTZXNzaW9uKG9yaWdpbmFsLCB0YWlsb3JlZCwgamRfdGV4dF9yYXcsIGtleXdvcmRTdGF0cylcbiAgICBjb25zb2xlLmxvZygnU2Vzc2lvbiBjcmVhdGVkOicsIHNlc3Npb24uaWQpXG5cbiAgICAvLyBMb2cgc3VjY2Vzc2Z1bCByZXF1ZXN0IHRlbGVtZXRyeVxuICAgIGxvZ1JlcXVlc3RUZWxlbWV0cnkoe1xuICAgICAgcmVxX2lkOiB0cmFjZS5pZCxcbiAgICAgIHJvdXRlOiAndGFpbG9yJyxcbiAgICAgIHRpbWluZzogRGF0ZS5ub3coKSAtICh0cmFjZSBhcyBhbnkpLnN0YXJ0VGltZSxcbiAgICAgIGZpbmFsX3N0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgYWRkaXRpb25hbF9tZXRyaWNzOiB7IFxuICAgICAgICByZXN1bWVfbGVuZ3RoOiByZXN1bWVUZXh0Lmxlbmd0aCxcbiAgICAgICAgamRfbGVuZ3RoOiBqZF90ZXh0X3Jhdy5sZW5ndGgsXG4gICAgICAgIHRvbmUsXG4gICAgICAgIHRva2Vuc191c2VkOiB0b2tlbnMsXG4gICAgICAgIGF0c19jb3ZlcmFnZToga2V5d29yZFN0YXRzLmNvdmVyYWdlLFxuICAgICAgICBvcmlnaW5hbF9leHBlcmllbmNlX2NvdW50OiBvcmlnaW5hbC5leHBlcmllbmNlPy5sZW5ndGggfHwgMCxcbiAgICAgICAgdGFpbG9yZWRfZXhwZXJpZW5jZV9jb3VudDogdGFpbG9yZWQuZXhwZXJpZW5jZT8ubGVuZ3RoIHx8IDAsXG4gICAgICAgIHZhbGlkYXRpb25fZXJyb3JzOiB2YWxpZGF0aW9uLmVycm9ycy5sZW5ndGgsXG4gICAgICAgIHZhbGlkYXRpb25fd2FybmluZ3M6IHZhbGlkYXRpb24ud2FybmluZ3MubGVuZ3RoXG4gICAgICB9XG4gICAgfSlcblxuICAgIHRyYWNlLmVuZCh0cnVlLCB7IHNlc3Npb25faWQ6IHNlc3Npb24uaWQsIHRva2VucywgYXRzX2NvdmVyYWdlOiBrZXl3b3JkU3RhdHMuY292ZXJhZ2UgfSlcbiAgICBcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xuICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbi5pZCxcbiAgICAgIHZlcnNpb246IHNlc3Npb24udmVyc2lvbixcbiAgICAgIG9yaWdpbmFsX3NlY3Rpb25zX2pzb246IG9yaWdpbmFsLFxuICAgICAgcHJldmlld19zZWN0aW9uc19qc29uOiB0YWlsb3JlZCxcbiAgICAgIGtleXdvcmRfc3RhdHM6IGtleXdvcmRTdGF0cyxcbiAgICAgIHRva2Vuc191c2VkOiB0b2tlbnMsXG4gICAgICBtZXNzYWdlOiAnUmVzdW1lIHRhaWxvcmVkIHN1Y2Nlc3NmdWxseScsXG4gICAgICB2YWxpZGF0aW9uLFxuICAgICAgcGFyc2luZ19kZXRhaWxzOiB7XG4gICAgICAgIG9yaWdpbmFsX3NlY3Rpb25zX2ZvdW5kOiB7XG4gICAgICAgICAgc3VtbWFyeTogISFvcmlnaW5hbC5zdW1tYXJ5LFxuICAgICAgICAgIHNraWxsczogKG9yaWdpbmFsLnNraWxscz8ubGVuZ3RoIHx8IDApID4gMCxcbiAgICAgICAgICBleHBlcmllbmNlOiAob3JpZ2luYWwuZXhwZXJpZW5jZT8ubGVuZ3RoIHx8IDApID4gMCxcbiAgICAgICAgICBlZHVjYXRpb246IChvcmlnaW5hbC5lZHVjYXRpb24/Lmxlbmd0aCB8fCAwKSA+IDAsXG4gICAgICAgICAgY2VydGlmaWNhdGlvbnM6IChvcmlnaW5hbC5jZXJ0aWZpY2F0aW9ucz8ubGVuZ3RoIHx8IDApID4gMFxuICAgICAgICB9LFxuICAgICAgICB0YWlsb3JlZF9zZWN0aW9uc19nZW5lcmF0ZWQ6IHtcbiAgICAgICAgICBzdW1tYXJ5OiAhIXRhaWxvcmVkLnN1bW1hcnksXG4gICAgICAgICAgc2tpbGxzOiAodGFpbG9yZWQuc2tpbGxzX3NlY3Rpb24/Lmxlbmd0aCB8fCAwKSA+IDAsXG4gICAgICAgICAgZXhwZXJpZW5jZTogKHRhaWxvcmVkLmV4cGVyaWVuY2U/Lmxlbmd0aCB8fCAwKSA+IDBcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pXG5cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdUYWlsb3IgQVBJIGVycm9yOicsIGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScpXG4gICAgXG4gICAgLy8gQ3JlYXRlIGRldGFpbGVkIGVycm9yIGluZm9ybWF0aW9uXG4gICAgY29uc3QgZXJyb3JEZXRhaWxzID0ge1xuICAgICAgcm91dGU6ICd0YWlsb3InLFxuICAgICAgc2Vzc2lvbl9pZDogc2Vzc2lvbl9pZCB8fCAndW5rbm93bicsXG4gICAgICBoYXNSZXN1bWVGaWxlOiAhIXJlc3VtZV9maWxlLFxuICAgICAgamRMZW5ndGg6IGpkX3RleHRfcmF3Lmxlbmd0aCxcbiAgICAgIHRvbmU6IHRvbmUgfHwgJ3Vua25vd24nLFxuICAgICAgZXJyb3JNZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgICBlcnJvclN0YWNrOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3Iuc3RhY2sgOiB1bmRlZmluZWRcbiAgICB9XG4gICAgXG4gICAgLy8gTG9nIHRoZSBlcnJvciB3aXRoIGNvbnRleHRcbiAgICBsb2dFcnJvcihlcnJvciBhcyBFcnJvciwgZXJyb3JEZXRhaWxzKVxuICAgIFxuICAgIC8vIENyZWF0ZSB1c2VyLWZyaWVuZGx5IGVycm9yIG1lc3NhZ2VcbiAgICBjb25zdCB1c2VyTWVzc2FnZSA9IGNyZWF0ZVVzZXJGcmllbmRseUVycm9yKGVycm9yIGFzIEVycm9yLCBlcnJvckRldGFpbHMpXG4gICAgXG4gICAgLy8gRW5zdXJlIHdlIGFsd2F5cyByZXR1cm4gYSBwcm9wZXIgSlNPTiByZXNwb25zZVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgY29kZTogJ3NlcnZlcl9lcnJvcicsIFxuICAgICAgICBtZXNzYWdlOiB1c2VyTWVzc2FnZSxcbiAgICAgICAgZGV0YWlsczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCcgPyBTdHJpbmcoZXJyb3IpIDogdW5kZWZpbmVkLFxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgZXJyb3JfdHlwZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLmNvbnN0cnVjdG9yLm5hbWUgOiAnVW5rbm93bkVycm9yJ1xuICAgICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgIH0gY2F0Y2ggKGpzb25FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGNyZWF0ZSBKU09OIHJlc3BvbnNlOicsIGpzb25FcnJvcilcbiAgICAgIC8vIEZhbGxiYWNrIHRvIEpTT04gcmVzcG9uc2UgZXZlbiBpZiBKU09OIGNyZWF0aW9uIGZhaWxzXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgY29kZTogJ3NlcnZlcl9lcnJvcicsIFxuICAgICAgICBtZXNzYWdlOiAnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCdcbiAgICAgIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJleHRyYWN0VGV4dEZyb21GaWxlIiwiaGV1cmlzdGljUGFyc2VSZXN1bWUiLCJnZXRUYWlsb3JlZFJlc3VtZSIsImF0c0NoZWNrIiwiY3JlYXRlU2Vzc2lvbiIsImVuZm9yY2VHdWFyZHMiLCJnZXRDb25maWciLCJzdGFydFRyYWNlIiwibG9nUmVxdWVzdFRlbGVtZXRyeSIsImxvZ0Vycm9yIiwiY3JlYXRlVXNlckZyaWVuZGx5RXJyb3IiLCJ2YWxpZGF0ZVBhcnNpbmdSZXN1bHQiLCJzaG91bGRTaG93RXhwZXJpZW5jZUJhbm5lciIsInJ1bnRpbWUiLCJkeW5hbWljIiwibWF4RHVyYXRpb24iLCJQT1NUIiwicmVxIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsInVybCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInNlc3Npb25faWQiLCJyZXN1bWVfZmlsZSIsImpkX3RleHRfcmF3IiwidG9uZSIsImd1YXJkIiwib2siLCJyZXMiLCJjZmciLCJwYXVzZVRhaWxvciIsImpzb24iLCJjb2RlIiwibWVzc2FnZSIsInN0YXR1cyIsInRyYWNlIiwicm91dGUiLCJjdCIsImhlYWRlcnMiLCJnZXQiLCJpbmNsdWRlcyIsImZvcm0iLCJmb3JtRGF0YSIsInRvU3RyaW5nIiwiaGFzUmVzdW1lRmlsZSIsImpkVGV4dExlbmd0aCIsImxlbmd0aCIsInBhcnNlZCIsInJlc3VtZVRleHQiLCJ0ZXh0IiwiZXh0IiwidHJpbSIsIm9yaWdpbmFsIiwiaGFzU3VtbWFyeSIsInN1bW1hcnkiLCJza2lsbHNDb3VudCIsInNraWxscyIsImV4cGVyaWVuY2VDb3VudCIsImV4cGVyaWVuY2UiLCJlZHVjYXRpb25Db3VudCIsImVkdWNhdGlvbiIsImNlcnRpZmljYXRpb25zQ291bnQiLCJjZXJ0aWZpY2F0aW9ucyIsInZhbGlkYXRpb24iLCJvcmlnaW5hbF9zZWN0aW9uc19qc29uIiwic3VnZ2VzdGlvbnMiLCJ0YWlsb3JlZCIsInRva2VucyIsInNraWxsc19zZWN0aW9uIiwia2V5d29yZFN0YXRzIiwiY292ZXJhZ2UiLCJtYXRjaGVkS2V5d29yZHMiLCJtYXRjaGVkIiwibWlzc2luZ0tleXdvcmRzIiwibWlzc2luZyIsInNlc3Npb24iLCJpZCIsInJlcV9pZCIsInRpbWluZyIsIm5vdyIsInN0YXJ0VGltZSIsImZpbmFsX3N0YXR1cyIsImFkZGl0aW9uYWxfbWV0cmljcyIsInJlc3VtZV9sZW5ndGgiLCJqZF9sZW5ndGgiLCJ0b2tlbnNfdXNlZCIsImF0c19jb3ZlcmFnZSIsIm9yaWdpbmFsX2V4cGVyaWVuY2VfY291bnQiLCJ0YWlsb3JlZF9leHBlcmllbmNlX2NvdW50IiwidmFsaWRhdGlvbl9lcnJvcnMiLCJlcnJvcnMiLCJ2YWxpZGF0aW9uX3dhcm5pbmdzIiwid2FybmluZ3MiLCJlbmQiLCJ2ZXJzaW9uIiwicHJldmlld19zZWN0aW9uc19qc29uIiwia2V5d29yZF9zdGF0cyIsInBhcnNpbmdfZGV0YWlscyIsIm9yaWdpbmFsX3NlY3Rpb25zX2ZvdW5kIiwidGFpbG9yZWRfc2VjdGlvbnNfZ2VuZXJhdGVkIiwiZXJyb3IiLCJFcnJvciIsInN0YWNrIiwiZXJyb3JEZXRhaWxzIiwiamRMZW5ndGgiLCJlcnJvck1lc3NhZ2UiLCJTdHJpbmciLCJlcnJvclN0YWNrIiwidW5kZWZpbmVkIiwidXNlck1lc3NhZ2UiLCJkZXRhaWxzIiwicHJvY2VzcyIsImVycm9yX3R5cGUiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJqc29uRXJyb3IiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/tailor/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai-error-handler.ts":
/*!*********************************!*\
  !*** ./lib/ai-error-handler.ts ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createDetailedErrorMessage: () => (/* binding */ createDetailedErrorMessage),\n/* harmony export */   createUserFriendlyError: () => (/* binding */ createUserFriendlyError),\n/* harmony export */   logAIError: () => (/* binding */ logAIError),\n/* harmony export */   validateAIResponse: () => (/* binding */ validateAIResponse)\n/* harmony export */ });\n/* harmony import */ var _telemetry__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./telemetry */ \"(rsc)/./lib/telemetry.ts\");\n\nfunction logAIError(details) {\n    const errorMessage = `AI Error (Attempt ${details.context.attempt}/${details.context.maxRetries}): ${details.error.message}`;\n    console.error(errorMessage, {\n        error: details.error,\n        context: details.context,\n        stack: details.error.stack\n    });\n    // Log to telemetry system\n    (0,_telemetry__WEBPACK_IMPORTED_MODULE_0__.logError)(details.error, details.context);\n    return errorMessage;\n}\nfunction createDetailedErrorMessage(error, context) {\n    const baseMessage = error.message;\n    if (error.message.includes(\"JSON\")) {\n        return `${baseMessage}. This usually means the AI returned malformed JSON. Please try again.`;\n    }\n    if (error.message.includes(\"schema\")) {\n        return `${baseMessage}. The AI response didn't match the expected format. Please try again.`;\n    }\n    if (error.message.includes(\"Empty response\")) {\n        return `${baseMessage}. The AI service may be temporarily unavailable. Please try again in a moment.`;\n    }\n    if (error.message.includes(\"timeout\")) {\n        return `${baseMessage}. The request took too long to process. Please try again.`;\n    }\n    return `${baseMessage}. Please try again or contact support if the issue persists.`;\n}\nfunction validateAIResponse(response) {\n    const errors = [];\n    if (!response || typeof response !== \"object\") {\n        errors.push(\"Response is not an object\");\n        return {\n            valid: false,\n            errors\n        };\n    }\n    // Check required fields\n    if (!response.summary || typeof response.summary !== \"string\") {\n        errors.push(\"Missing or invalid summary field\");\n    }\n    if (!response.skills_section || !Array.isArray(response.skills_section)) {\n        errors.push(\"Missing or invalid skills_section field\");\n    }\n    if (!response.experience || !Array.isArray(response.experience)) {\n        errors.push(\"Missing or invalid experience field\");\n    }\n    // Validate experience structure\n    if (response.experience && Array.isArray(response.experience)) {\n        response.experience.forEach((exp, index)=>{\n            if (!exp.company || typeof exp.company !== \"string\") {\n                errors.push(`Experience ${index}: Missing or invalid company field`);\n            }\n            if (!exp.role || typeof exp.role !== \"string\") {\n                errors.push(`Experience ${index}: Missing or invalid role field`);\n            }\n            if (!exp.bullets || !Array.isArray(exp.bullets)) {\n                errors.push(`Experience ${index}: Missing or invalid bullets field`);\n            }\n        });\n    }\n    return {\n        valid: errors.length === 0,\n        errors\n    };\n}\nfunction createUserFriendlyError(error, context) {\n    const errorType = classifyError(error);\n    switch(errorType){\n        case \"JSON_PARSE_ERROR\":\n            return \"The AI response was malformed. Please try again.\";\n        case \"SCHEMA_VALIDATION_ERROR\":\n            return \"The AI response format was unexpected. Please try again.\";\n        case \"EMPTY_RESPONSE_ERROR\":\n            return \"The AI service returned an empty response. Please try again.\";\n        case \"TIMEOUT_ERROR\":\n            return \"The request timed out. Please try again.\";\n        case \"NETWORK_ERROR\":\n            return \"Network error occurred. Please check your connection and try again.\";\n        case \"RATE_LIMIT_ERROR\":\n            return \"Too many requests. Please wait a moment and try again.\";\n        default:\n            return \"An unexpected error occurred. Please try again.\";\n    }\n}\nfunction classifyError(error) {\n    const message = error.message.toLowerCase();\n    if (message.includes(\"json\") || message.includes(\"parse\")) {\n        return \"JSON_PARSE_ERROR\";\n    }\n    if (message.includes(\"schema\") || message.includes(\"validation\")) {\n        return \"SCHEMA_VALIDATION_ERROR\";\n    }\n    if (message.includes(\"empty\") || message.includes(\"no content\")) {\n        return \"EMPTY_RESPONSE_ERROR\";\n    }\n    if (message.includes(\"timeout\") || message.includes(\"timed out\")) {\n        return \"TIMEOUT_ERROR\";\n    }\n    if (message.includes(\"network\") || message.includes(\"connection\")) {\n        return \"NETWORK_ERROR\";\n    }\n    if (message.includes(\"rate limit\") || message.includes(\"too many requests\")) {\n        return \"RATE_LIMIT_ERROR\";\n    }\n    return \"UNKNOWN_ERROR\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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ci50cz83NzJiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGxvZ0Vycm9yIH0gZnJvbSAnLi90ZWxlbWV0cnknXG5cbmV4cG9ydCBpbnRlcmZhY2UgQUlFcnJvckRldGFpbHMge1xuICBlcnJvcjogRXJyb3JcbiAgY29udGV4dDoge1xuICAgIGF0dGVtcHQ6IG51bWJlclxuICAgIG1heFJldHJpZXM6IG51bWJlclxuICAgIG9yaWdpbmFsUmVzcG9uc2U/OiBhbnlcbiAgICBjbGVhbmVkUmVzcG9uc2U/OiBzdHJpbmdcbiAgICB2YWxpZGF0aW9uRXJyb3JzPzogc3RyaW5nW11cbiAgICBjb2VyY2lvbkF0dGVtcHRzPzogc3RyaW5nW11cbiAgICBvcmlnaW5hbFJlc3VtZT86IGFueVxuICAgIGpvYkRlc2NyaXB0aW9uPzogc3RyaW5nXG4gICAgdG9uZT86IHN0cmluZ1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dBSUVycm9yKGRldGFpbHM6IEFJRXJyb3JEZXRhaWxzKSB7XG4gIGNvbnN0IGVycm9yTWVzc2FnZSA9IGBBSSBFcnJvciAoQXR0ZW1wdCAke2RldGFpbHMuY29udGV4dC5hdHRlbXB0fS8ke2RldGFpbHMuY29udGV4dC5tYXhSZXRyaWVzfSk6ICR7ZGV0YWlscy5lcnJvci5tZXNzYWdlfWBcbiAgXG4gIGNvbnNvbGUuZXJyb3IoZXJyb3JNZXNzYWdlLCB7XG4gICAgZXJyb3I6IGRldGFpbHMuZXJyb3IsXG4gICAgY29udGV4dDogZGV0YWlscy5jb250ZXh0LFxuICAgIHN0YWNrOiBkZXRhaWxzLmVycm9yLnN0YWNrXG4gIH0pXG4gIFxuICAvLyBMb2cgdG8gdGVsZW1ldHJ5IHN5c3RlbVxuICBsb2dFcnJvcihkZXRhaWxzLmVycm9yLCBkZXRhaWxzLmNvbnRleHQpXG4gIFxuICByZXR1cm4gZXJyb3JNZXNzYWdlXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVEZXRhaWxlZEVycm9yTWVzc2FnZShlcnJvcjogRXJyb3IsIGNvbnRleHQ6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IGJhc2VNZXNzYWdlID0gZXJyb3IubWVzc2FnZVxuICBcbiAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ0pTT04nKSkge1xuICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX0uIFRoaXMgdXN1YWxseSBtZWFucyB0aGUgQUkgcmV0dXJuZWQgbWFsZm9ybWVkIEpTT04uIFBsZWFzZSB0cnkgYWdhaW4uYFxuICB9XG4gIFxuICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnc2NoZW1hJykpIHtcbiAgICByZXR1cm4gYCR7YmFzZU1lc3NhZ2V9LiBUaGUgQUkgcmVzcG9uc2UgZGlkbid0IG1hdGNoIHRoZSBleHBlY3RlZCBmb3JtYXQuIFBsZWFzZSB0cnkgYWdhaW4uYFxuICB9XG4gIFxuICBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnRW1wdHkgcmVzcG9uc2UnKSkge1xuICAgIHJldHVybiBgJHtiYXNlTWVzc2FnZX0uIFRoZSBBSSBzZXJ2aWNlIG1heSBiZSB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZS4gUGxlYXNlIHRyeSBhZ2FpbiBpbiBhIG1vbWVudC5gXG4gIH1cbiAgXG4gIGlmIChlcnJvci5tZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykpIHtcbiAgICByZXR1cm4gYCR7YmFzZU1lc3NhZ2V9LiBUaGUgcmVxdWVzdCB0b29rIHRvbyBsb25nIHRvIHByb2Nlc3MuIFBsZWFzZSB0cnkgYWdhaW4uYFxuICB9XG4gIFxuICByZXR1cm4gYCR7YmFzZU1lc3NhZ2V9LiBQbGVhc2UgdHJ5IGFnYWluIG9yIGNvbnRhY3Qgc3VwcG9ydCBpZiB0aGUgaXNzdWUgcGVyc2lzdHMuYFxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVBSVJlc3BvbnNlKHJlc3BvbnNlOiBhbnkpOiB7IHZhbGlkOiBib29sZWFuLCBlcnJvcnM6IHN0cmluZ1tdIH0ge1xuICBjb25zdCBlcnJvcnM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmICghcmVzcG9uc2UgfHwgdHlwZW9mIHJlc3BvbnNlICE9PSAnb2JqZWN0Jykge1xuICAgIGVycm9ycy5wdXNoKCdSZXNwb25zZSBpcyBub3QgYW4gb2JqZWN0JylcbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9ycyB9XG4gIH1cbiAgXG4gIC8vIENoZWNrIHJlcXVpcmVkIGZpZWxkc1xuICBpZiAoIXJlc3BvbnNlLnN1bW1hcnkgfHwgdHlwZW9mIHJlc3BvbnNlLnN1bW1hcnkgIT09ICdzdHJpbmcnKSB7XG4gICAgZXJyb3JzLnB1c2goJ01pc3Npbmcgb3IgaW52YWxpZCBzdW1tYXJ5IGZpZWxkJylcbiAgfVxuICBcbiAgaWYgKCFyZXNwb25zZS5za2lsbHNfc2VjdGlvbiB8fCAhQXJyYXkuaXNBcnJheShyZXNwb25zZS5za2lsbHNfc2VjdGlvbikpIHtcbiAgICBlcnJvcnMucHVzaCgnTWlzc2luZyBvciBpbnZhbGlkIHNraWxsc19zZWN0aW9uIGZpZWxkJylcbiAgfVxuICBcbiAgaWYgKCFyZXNwb25zZS5leHBlcmllbmNlIHx8ICFBcnJheS5pc0FycmF5KHJlc3BvbnNlLmV4cGVyaWVuY2UpKSB7XG4gICAgZXJyb3JzLnB1c2goJ01pc3Npbmcgb3IgaW52YWxpZCBleHBlcmllbmNlIGZpZWxkJylcbiAgfVxuICBcbiAgLy8gVmFsaWRhdGUgZXhwZXJpZW5jZSBzdHJ1Y3R1cmVcbiAgaWYgKHJlc3BvbnNlLmV4cGVyaWVuY2UgJiYgQXJyYXkuaXNBcnJheShyZXNwb25zZS5leHBlcmllbmNlKSkge1xuICAgIHJlc3BvbnNlLmV4cGVyaWVuY2UuZm9yRWFjaCgoZXhwOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIGlmICghZXhwLmNvbXBhbnkgfHwgdHlwZW9mIGV4cC5jb21wYW55ICE9PSAnc3RyaW5nJykge1xuICAgICAgICBlcnJvcnMucHVzaChgRXhwZXJpZW5jZSAke2luZGV4fTogTWlzc2luZyBvciBpbnZhbGlkIGNvbXBhbnkgZmllbGRgKVxuICAgICAgfVxuICAgICAgaWYgKCFleHAucm9sZSB8fCB0eXBlb2YgZXhwLnJvbGUgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBFeHBlcmllbmNlICR7aW5kZXh9OiBNaXNzaW5nIG9yIGludmFsaWQgcm9sZSBmaWVsZGApXG4gICAgICB9XG4gICAgICBpZiAoIWV4cC5idWxsZXRzIHx8ICFBcnJheS5pc0FycmF5KGV4cC5idWxsZXRzKSkge1xuICAgICAgICBlcnJvcnMucHVzaChgRXhwZXJpZW5jZSAke2luZGV4fTogTWlzc2luZyBvciBpbnZhbGlkIGJ1bGxldHMgZmllbGRgKVxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgXG4gIHJldHVybiB7IHZhbGlkOiBlcnJvcnMubGVuZ3RoID09PSAwLCBlcnJvcnMgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlVXNlckZyaWVuZGx5RXJyb3IoZXJyb3I6IEVycm9yLCBjb250ZXh0OiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBlcnJvclR5cGUgPSBjbGFzc2lmeUVycm9yKGVycm9yKVxuICBcbiAgc3dpdGNoIChlcnJvclR5cGUpIHtcbiAgICBjYXNlICdKU09OX1BBUlNFX0VSUk9SJzpcbiAgICAgIHJldHVybiAnVGhlIEFJIHJlc3BvbnNlIHdhcyBtYWxmb3JtZWQuIFBsZWFzZSB0cnkgYWdhaW4uJ1xuICAgIFxuICAgIGNhc2UgJ1NDSEVNQV9WQUxJREFUSU9OX0VSUk9SJzpcbiAgICAgIHJldHVybiAnVGhlIEFJIHJlc3BvbnNlIGZvcm1hdCB3YXMgdW5leHBlY3RlZC4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gICAgXG4gICAgY2FzZSAnRU1QVFlfUkVTUE9OU0VfRVJST1InOlxuICAgICAgcmV0dXJuICdUaGUgQUkgc2VydmljZSByZXR1cm5lZCBhbiBlbXB0eSByZXNwb25zZS4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gICAgXG4gICAgY2FzZSAnVElNRU9VVF9FUlJPUic6XG4gICAgICByZXR1cm4gJ1RoZSByZXF1ZXN0IHRpbWVkIG91dC4gUGxlYXNlIHRyeSBhZ2Fpbi4nXG4gICAgXG4gICAgY2FzZSAnTkVUV09SS19FUlJPUic6XG4gICAgICByZXR1cm4gJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSBjaGVjayB5b3VyIGNvbm5lY3Rpb24gYW5kIHRyeSBhZ2Fpbi4nXG4gICAgXG4gICAgY2FzZSAnUkFURV9MSU1JVF9FUlJPUic6XG4gICAgICByZXR1cm4gJ1RvbyBtYW55IHJlcXVlc3RzLiBQbGVhc2Ugd2FpdCBhIG1vbWVudCBhbmQgdHJ5IGFnYWluLidcbiAgICBcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuICdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLidcbiAgfVxufVxuXG5mdW5jdGlvbiBjbGFzc2lmeUVycm9yKGVycm9yOiBFcnJvcik6IHN0cmluZyB7XG4gIGNvbnN0IG1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlLnRvTG93ZXJDYXNlKClcbiAgXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdqc29uJykgfHwgbWVzc2FnZS5pbmNsdWRlcygncGFyc2UnKSkge1xuICAgIHJldHVybiAnSlNPTl9QQVJTRV9FUlJPUidcbiAgfVxuICBcbiAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoJ3NjaGVtYScpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ3ZhbGlkYXRpb24nKSkge1xuICAgIHJldHVybiAnU0NIRU1BX1ZBTElEQVRJT05fRVJST1InXG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCdlbXB0eScpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ25vIGNvbnRlbnQnKSkge1xuICAgIHJldHVybiAnRU1QVFlfUkVTUE9OU0VfRVJST1InXG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCd0aW1lb3V0JykgfHwgbWVzc2FnZS5pbmNsdWRlcygndGltZWQgb3V0JykpIHtcbiAgICByZXR1cm4gJ1RJTUVPVVRfRVJST1InXG4gIH1cbiAgXG4gIGlmIChtZXNzYWdlLmluY2x1ZGVzKCduZXR3b3JrJykgfHwgbWVzc2FnZS5pbmNsdWRlcygnY29ubmVjdGlvbicpKSB7XG4gICAgcmV0dXJuICdORVRXT1JLX0VSUk9SJ1xuICB9XG4gIFxuICBpZiAobWVzc2FnZS5pbmNsdWRlcygncmF0ZSBsaW1pdCcpIHx8IG1lc3NhZ2UuaW5jbHVkZXMoJ3RvbyBtYW55IHJlcXVlc3RzJykpIHtcbiAgICByZXR1cm4gJ1JBVEVfTElNSVRfRVJST1InXG4gIH1cbiAgXG4gIHJldHVybiAnVU5LTk9XTl9FUlJPUidcbn1cbiJdLCJuYW1lcyI6WyJsb2dFcnJvciIsImxvZ0FJRXJyb3IiLCJkZXRhaWxzIiwiZXJyb3JNZXNzYWdlIiwiY29udGV4dCIsImF0dGVtcHQiLCJtYXhSZXRyaWVzIiwiZXJyb3IiLCJtZXNzYWdlIiwiY29uc29sZSIsInN0YWNrIiwiY3JlYXRlRGV0YWlsZWRFcnJvck1lc3NhZ2UiLCJiYXNlTWVzc2FnZSIsImluY2x1ZGVzIiwidmFsaWRhdGVBSVJlc3BvbnNlIiwicmVzcG9uc2UiLCJlcnJvcnMiLCJwdXNoIiwidmFsaWQiLCJzdW1tYXJ5Iiwic2tpbGxzX3NlY3Rpb24iLCJBcnJheSIsImlzQXJyYXkiLCJleHBlcmllbmNlIiwiZm9yRWFjaCIsImV4cCIsImluZGV4IiwiY29tcGFueSIsInJvbGUiLCJidWxsZXRzIiwibGVuZ3RoIiwiY3JlYXRlVXNlckZyaWVuZGx5RXJyb3IiLCJlcnJvclR5cGUiLCJjbGFzc2lmeUVycm9yIiwidG9Mb3dlckNhc2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai-error-handler.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai-response-parser.ts":
/*!***********************************!*\
  !*** ./lib/ai-response-parser.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractBulletsFromFreeText: () => (/* binding */ extractBulletsFromFreeText),\n/* harmony export */   getTailoredResume: () => (/* binding */ getTailoredResume),\n/* harmony export */   parseAIResponse: () => (/* binding */ parseAIResponse)\n/* harmony export */ });\n/* harmony import */ var _schemas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schemas */ \"(rsc)/./lib/schemas.ts\");\n/* harmony import */ var _telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./telemetry */ \"(rsc)/./lib/telemetry.ts\");\n/* harmony import */ var _jd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./jd */ \"(rsc)/./lib/jd.ts\");\n/* harmony import */ var _openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openai */ \"(rsc)/./lib/openai.ts\");\n/* harmony import */ var _prompts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prompts */ \"(rsc)/./lib/prompts.ts\");\n\n\n\n\n\nasync function parseAIResponse(raw, maxRetries = 3) {\n    let lastError = null;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            // Clean the response\n            const cleaned = cleanAIResponse(raw);\n            // Try to parse\n            const parsed = JSON.parse(cleaned);\n            // Validate and coerce into schema\n            const validated = await validateAndCoerceResponse(parsed, attempt);\n            // Log successful parsing\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, true, undefined, raw.length);\n            return validated;\n        } catch (error) {\n            lastError = error;\n            console.warn(`AI response parsing attempt ${attempt} failed:`, error);\n            // Log failed attempt with detailed error\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, false, error.message, raw.length);\n            if (attempt < maxRetries) {\n                // Wait before retry\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * attempt));\n            }\n        }\n    }\n    // Log final failure with detailed error information\n    (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(maxRetries, false, lastError?.message, raw.length);\n    throw new Error(`Failed to parse AI response after ${maxRetries} attempts: ${lastError?.message}`);\n}\nasync function validateAndCoerceResponse(parsed, attempt) {\n    try {\n        // First try direct validation\n        return _schemas__WEBPACK_IMPORTED_MODULE_0__.TailoredResultSchema.parse(parsed);\n    } catch (validationError) {\n        console.log(`Direct validation failed (attempt ${attempt}), attempting coercion:`, validationError);\n        // Attempt to coerce the response into the correct schema\n        const coerced = coerceToSchema(parsed);\n        try {\n            // Validate the coerced response\n            return _schemas__WEBPACK_IMPORTED_MODULE_0__.TailoredResultSchema.parse(coerced);\n        } catch (coercionError) {\n            console.error(\"Coercion also failed:\", coercionError);\n            // Log detailed failure information\n            const failureDetails = {\n                originalResponse: parsed,\n                coercedResponse: coerced,\n                validationError: validationError.message,\n                coercionError: coercionError.message,\n                attempt\n            };\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(new Error(\"Schema validation and coercion failed\"), failureDetails);\n            throw new Error(`Schema validation failed: ${validationError.message}. Coercion failed: ${coercionError.message}`);\n        }\n    }\n}\nfunction coerceToSchema(parsed) {\n    const coerced = {};\n    // Coerce summary\n    if (parsed.summary && typeof parsed.summary === \"string\") {\n        coerced.summary = parsed.summary.trim() || \"Professional summary not available\";\n    } else if (parsed.summary && typeof parsed.summary === \"object\") {\n        // If summary is an object, try to extract text\n        coerced.summary = extractTextFromObject(parsed.summary) || \"Professional summary not available\";\n    } else {\n        coerced.summary = \"Professional summary not available\";\n    }\n    // Coerce skills_section\n    if (Array.isArray(parsed.skills_section)) {\n        coerced.skills_section = parsed.skills_section.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else if (parsed.skills_section && typeof parsed.skills_section === \"string\") {\n        // If skills is a string, split it\n        coerced.skills_section = parsed.skills_section.split(/[,;|\\n]/).map((s)=>s.trim()).filter((s)=>s.length > 0);\n    } else if (parsed.skills && Array.isArray(parsed.skills)) {\n        // Alternative field name\n        coerced.skills_section = parsed.skills.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else {\n        coerced.skills_section = [];\n    }\n    // Coerce experience\n    if (Array.isArray(parsed.experience)) {\n        coerced.experience = parsed.experience.map((exp)=>coerceExperience(exp)).filter(Boolean);\n    } else if (parsed.experience && typeof parsed.experience === \"object\") {\n        // If experience is an object, try to convert to array\n        coerced.experience = [\n            coerceExperience(parsed.experience)\n        ].filter(Boolean);\n    } else {\n        coerced.experience = [];\n    }\n    return coerced;\n}\nfunction coerceExperience(exp) {\n    if (!exp || typeof exp !== \"object\") return null;\n    const coerced = {};\n    // Coerce company\n    if (typeof exp.company === \"string\") {\n        coerced.company = exp.company.trim() || \"Unknown Company\";\n    } else if (exp.company && typeof exp.company === \"object\") {\n        coerced.company = extractTextFromObject(exp.company) || \"Unknown Company\";\n    } else {\n        coerced.company = \"Unknown Company\";\n    }\n    // Coerce role\n    if (typeof exp.role === \"string\") {\n        coerced.role = exp.role.trim() || \"Unknown Role\";\n    } else if (exp.role && typeof exp.role === \"object\") {\n        coerced.role = extractTextFromObject(exp.role) || \"Unknown Role\";\n    } else {\n        coerced.role = \"Unknown Role\";\n    }\n    // Coerce bullets\n    if (Array.isArray(exp.bullets)) {\n        coerced.bullets = exp.bullets.filter((bullet)=>typeof bullet === \"string\" && bullet.trim().length > 0).map((bullet)=>bullet.trim());\n    } else if (exp.bullets && typeof exp.bullets === \"string\") {\n        // If bullets is a string, split it\n        coerced.bullets = exp.bullets.split(/[\\n]/).map((b)=>b.trim()).filter((b)=>b.length > 0);\n    } else if (exp.description && typeof exp.description === \"string\") {\n        // Alternative field name\n        coerced.bullets = exp.description.split(/[\\n]/).map((b)=>b.trim()).filter((b)=>b.length > 0);\n    } else {\n        coerced.bullets = [];\n    }\n    return coerced;\n}\nfunction extractTextFromObject(obj) {\n    if (typeof obj === \"string\") return obj;\n    if (typeof obj === \"number\") return obj.toString();\n    if (Array.isArray(obj)) return obj.map(extractTextFromObject).filter(Boolean).join(\" \");\n    if (obj && typeof obj === \"object\") {\n        // Try common text fields\n        const textFields = [\n            \"text\",\n            \"content\",\n            \"value\",\n            \"description\",\n            \"title\"\n        ];\n        for (const field of textFields){\n            if (obj[field] && typeof obj[field] === \"string\") {\n                return obj[field];\n            }\n        }\n        // Fallback to first string value\n        for (const [key, value] of Object.entries(obj)){\n            if (typeof value === \"string\" && value.trim().length > 0) {\n                return value;\n            }\n        }\n    }\n    return null;\n}\nfunction cleanAIResponse(raw) {\n    // Remove any text before the first {\n    const firstBrace = raw.indexOf(\"{\");\n    if (firstBrace > 0) {\n        raw = raw.substring(firstBrace);\n    }\n    // Remove any text after the last }\n    const lastBrace = raw.lastIndexOf(\"}\");\n    if (lastBrace > 0 && lastBrace < raw.length - 1) {\n        raw = raw.substring(0, lastBrace + 1);\n    }\n    // Fix common JSON issues\n    raw = raw.replace(/\\n/g, \" \") // Replace newlines with spaces\n    .replace(/\\s+/g, \" \") // Normalize whitespace\n    .replace(/,(\\s*[}\\]])/g, \"$1\") // Remove trailing commas\n    .replace(/([^\\\\])\\\\([^\"\\\\\\/bfnrt])/g, \"$1\\\\\\\\$2\") // Fix unescaped backslashes\n    .replace(/([^\\\\])\\\\([^\"\\\\\\/bfnrt])/g, \"$1\\\\\\\\$2\") // Fix unescaped backslashes (second pass)\n    .replace(/\"/g, '\"') // Fix smart quotes\n    .replace(/'/g, \"'\") // Fix smart apostrophes\n    ;\n    return raw;\n}\nasync function getTailoredResume(original, jdText, tone) {\n    const maxRetries = 3;\n    let lastError = null;\n    // Enhanced validation - check if we have meaningful data to work with\n    if (!original.experience || original.experience.length === 0) {\n        console.warn(\"No experience data available for tailoring, attempting extraction from free text\");\n        return await handleMissingExperience(original, jdText, tone);\n    }\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            const messages = [\n                {\n                    role: \"system\",\n                    content: _prompts__WEBPACK_IMPORTED_MODULE_4__.SYSTEM_PROMPT\n                },\n                {\n                    role: \"user\",\n                    content: (0,_prompts__WEBPACK_IMPORTED_MODULE_4__.makeUserPrompt)({\n                        resume_json: original,\n                        job_text: jdText,\n                        tone\n                    })\n                }\n            ];\n            const chat = await (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)().chat.completions.create({\n                model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n                messages,\n                temperature: 0.2,\n                response_format: {\n                    type: \"json_object\"\n                },\n                max_tokens: 4000 // Ensure we don't get truncated responses\n            });\n            const raw = chat.choices[0]?.message?.content || \"{}\";\n            if (!raw || raw.trim() === \"\") {\n                throw new Error(\"Empty response from AI\");\n            }\n            // Parse and validate with detailed error reporting\n            const tailored = await parseAIResponse(raw);\n            // Additional validation - ensure we got meaningful content\n            if (!tailored || typeof tailored !== \"object\") {\n                throw new Error(\"AI response is not a valid object\");\n            }\n            // If experience is missing or empty, try to preserve original\n            if (!tailored.experience || tailored.experience.length === 0) {\n                console.warn(\"AI response missing experience, preserving original experience\");\n                tailored.experience = original.experience || [];\n            }\n            // Extract token usage\n            const tokens = chat.usage?.total_tokens || 0;\n            // Log successful AI request\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, true, undefined, raw.length);\n            return {\n                tailored,\n                tokens\n            };\n        } catch (error) {\n            lastError = error;\n            console.warn(`AI request attempt ${attempt} failed:`, error);\n            console.warn(\"Error details:\", {\n                message: error.message,\n                stack: error.stack,\n                originalExperienceLength: original.experience?.length || 0,\n                jdLength: jdText.length,\n                attempt\n            });\n            // Log failed attempt with detailed context\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, false, error.message);\n            if (attempt < maxRetries) {\n                // Wait before retry with exponential backoff\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * Math.pow(2, attempt - 1)));\n            }\n        }\n    }\n    // Final fallback: return original resume with minimal changes\n    console.error(\"All AI attempts failed, returning fallback response\");\n    console.error(\"Last error:\", lastError?.message);\n    (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(new Error(\"All AI attempts failed\"), {\n        original,\n        jdText,\n        tone,\n        lastError: lastError?.message,\n        attempts: maxRetries\n    });\n    return {\n        tailored: createFallbackResponse(original, jdText),\n        tokens: 0\n    };\n}\nasync function handleMissingExperience(original, jdText, tone) {\n    console.log(\"Handling missing experience - attempting extraction from free text\");\n    try {\n        // First, try to extract experience from free text\n        const extractionPrompt = `Extract work experience from the following resume text. Return a JSON object with an \"experience\" array. Each experience should have \"company\", \"role\", and \"bullets\" fields.\n\nResume text: ${JSON.stringify(original)}\n\nReturn only valid JSON.`;\n        const extractionChat = await (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)().chat.completions.create({\n            model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are an expert at extracting structured data from resume text. Return only valid JSON.\"\n                },\n                {\n                    role: \"user\",\n                    content: extractionPrompt\n                }\n            ],\n            temperature: 0.1,\n            response_format: {\n                type: \"json_object\"\n            },\n            max_tokens: 2000\n        });\n        const extractionRaw = extractionChat.choices[0]?.message?.content || \"{}\";\n        const extractedData = JSON.parse(extractionRaw);\n        if (extractedData.experience && Array.isArray(extractedData.experience) && extractedData.experience.length > 0) {\n            console.log(\"Successfully extracted experience from free text\");\n            // Now tailor the extracted experience\n            const tailored = await getTailoredResume({\n                ...original,\n                experience: extractedData.experience\n            }, jdText, tone);\n            return tailored;\n        }\n    } catch (error) {\n        console.error(\"Failed to extract experience from free text:\", error);\n    }\n    // If extraction fails, return fallback\n    return {\n        tailored: createFallbackResponse(original, jdText),\n        tokens: 0\n    };\n}\nfunction createFallbackResponse(original, jdText) {\n    // Extract keywords from job description\n    const keywords = (0,_jd__WEBPACK_IMPORTED_MODULE_2__.extractKeywords)(jdText, 10);\n    // Create a minimal tailored response that preserves original data\n    return {\n        summary: original.summary || \"Experienced professional with relevant skills and experience.\",\n        skills_section: original.skills || [],\n        experience: original.experience || []\n    };\n}\n/**\n * Extract structured experience from free-form text using AI\n */ async function extractBulletsFromFreeText(freeText) {\n    if (!freeText || freeText.trim().length === 0) {\n        return [];\n    }\n    const openai = (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)();\n    if (!openai) {\n        console.warn(\"OpenAI not available for bullet extraction\");\n        return [];\n    }\n    const prompt = `Given the following free-form text describing work experience, extract it into a JSON array of roles. Each role should have 'company', 'role', 'dates' (optional, can be empty string), and 'bullets' (an array of strings). If no specific role or company is clear, group related bullets under a generic \"Experience\" role.\n\nExample:\nText: \"Company A (2020-2022) - Software Engineer. Developed X, Implemented Y. Company B (2018-2020) - Junior Dev. Assisted with Z.\"\nOutput:\n[\n  {\n    \"company\": \"Company A\",\n    \"role\": \"Software Engineer\",\n    \"dates\": \"2020-2022\",\n    \"bullets\": [\"Developed X\", \"Implemented Y\"]\n  },\n  {\n    \"company\": \"Company B\",\n    \"role\": \"Junior Dev\",\n    \"dates\": \"2018-2020\",\n    \"bullets\": [\"Assisted with Z\"]\n  }\n]\n\nText: \"${freeText}\"\nOutput:`;\n    try {\n        const chatCompletion = await openai.chat.completions.create({\n            model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            }\n        });\n        const rawResponse = chatCompletion.choices[0].message.content;\n        if (!rawResponse) {\n            throw new Error(\"AI returned an empty response for bullet extraction\");\n        }\n        const parsed = JSON.parse(rawResponse);\n        // Validate the structure\n        if (Array.isArray(parsed)) {\n            return parsed.map((role)=>({\n                    company: (role.company || \"\").trim() || \"Unknown Company\",\n                    role: (role.role || \"\").trim() || \"Unknown Role\",\n                    dates: (role.dates || \"\").trim() || \"\",\n                    bullets: Array.isArray(role.bullets) ? role.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n                }));\n        } else if (parsed.experience && Array.isArray(parsed.experience)) {\n            return parsed.experience.map((role)=>({\n                    company: (role.company || \"\").trim() || \"Unknown Company\",\n                    role: (role.role || \"\").trim() || \"Unknown Role\",\n                    dates: (role.dates || \"\").trim() || \"\",\n                    bullets: Array.isArray(role.bullets) ? role.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n                }));\n        } else {\n            throw new Error(\"Unexpected response format from AI\");\n        }\n    } catch (error) {\n        console.error(\"Error extracting bullets from free text:\", error);\n        (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(error, {\n            context: \"bullet_extraction\"\n        });\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxJQUFLQSxFQUFFbkIsSUFBSSxNQUFNLEVBQUU7Z0JBQ3ZJO1FBQ0YsT0FBTztZQUNMLE1BQU0sSUFBSVYsTUFBTTtRQUNsQjtJQUVGLEVBQUUsT0FBT1AsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNENBQTRDQTtRQUMxRHBCLG9EQUFRQSxDQUFDb0IsT0FBZ0I7WUFBRStGLFNBQVM7UUFBb0I7UUFDeEQsT0FBTyxFQUFFO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvYWktcmVzcG9uc2UtcGFyc2VyLnRzP2UxYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGFpbG9yZWRSZXN1bHRTY2hlbWEsIHR5cGUgVGFpbG9yZWRSZXN1bHRUeXBlIH0gZnJvbSAnLi9zY2hlbWFzJ1xuaW1wb3J0IHsgUmVzdW1lSlNPTiB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBsb2dBSVJlc3BvbnNlLCBsb2dFcnJvciB9IGZyb20gJy4vdGVsZW1ldHJ5J1xuaW1wb3J0IHsgZXh0cmFjdEtleXdvcmRzIH0gZnJvbSAnLi9qZCdcbmltcG9ydCB7IGdldE9wZW5BSSwgT1BFTkFJX01PREVMIH0gZnJvbSAnLi9vcGVuYWknXG5pbXBvcnQgeyBTWVNURU1fUFJPTVBULCBtYWtlVXNlclByb21wdCB9IGZyb20gJy4vcHJvbXB0cydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhcnNlQUlSZXNwb25zZShyYXc6IHN0cmluZywgbWF4UmV0cmllczogbnVtYmVyID0gMyk6IFByb21pc2U8VGFpbG9yZWRSZXN1bHRUeXBlPiB7XG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICAvLyBDbGVhbiB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbkFJUmVzcG9uc2UocmF3KVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gcGFyc2VcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZClcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgYW5kIGNvZXJjZSBpbnRvIHNjaGVtYVxuICAgICAgY29uc3QgdmFsaWRhdGVkID0gYXdhaXQgdmFsaWRhdGVBbmRDb2VyY2VSZXNwb25zZShwYXJzZWQsIGF0dGVtcHQpXG4gICAgICBcbiAgICAgIC8vIExvZyBzdWNjZXNzZnVsIHBhcnNpbmdcbiAgICAgIGxvZ0FJUmVzcG9uc2UoYXR0ZW1wdCwgdHJ1ZSwgdW5kZWZpbmVkLCByYXcubGVuZ3RoKVxuICAgICAgXG4gICAgICByZXR1cm4gdmFsaWRhdGVkXG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGFzdEVycm9yID0gZXJyb3IgYXMgRXJyb3JcbiAgICAgIGNvbnNvbGUud2FybihgQUkgcmVzcG9uc2UgcGFyc2luZyBhdHRlbXB0ICR7YXR0ZW1wdH0gZmFpbGVkOmAsIGVycm9yKVxuICAgICAgXG4gICAgICAvLyBMb2cgZmFpbGVkIGF0dGVtcHQgd2l0aCBkZXRhaWxlZCBlcnJvclxuICAgICAgbG9nQUlSZXNwb25zZShhdHRlbXB0LCBmYWxzZSwgZXJyb3IubWVzc2FnZSwgcmF3Lmxlbmd0aClcbiAgICAgIFxuICAgICAgaWYgKGF0dGVtcHQgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwICogYXR0ZW1wdCkpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBMb2cgZmluYWwgZmFpbHVyZSB3aXRoIGRldGFpbGVkIGVycm9yIGluZm9ybWF0aW9uXG4gIGxvZ0FJUmVzcG9uc2UobWF4UmV0cmllcywgZmFsc2UsIGxhc3RFcnJvcj8ubWVzc2FnZSwgcmF3Lmxlbmd0aClcbiAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UgYWZ0ZXIgJHttYXhSZXRyaWVzfSBhdHRlbXB0czogJHtsYXN0RXJyb3I/Lm1lc3NhZ2V9YClcbn1cblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBbmRDb2VyY2VSZXNwb25zZShwYXJzZWQ6IGFueSwgYXR0ZW1wdDogbnVtYmVyKTogUHJvbWlzZTxUYWlsb3JlZFJlc3VsdFR5cGU+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCB0cnkgZGlyZWN0IHZhbGlkYXRpb25cbiAgICByZXR1cm4gVGFpbG9yZWRSZXN1bHRTY2hlbWEucGFyc2UocGFyc2VkKVxuICB9IGNhdGNoICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhgRGlyZWN0IHZhbGlkYXRpb24gZmFpbGVkIChhdHRlbXB0ICR7YXR0ZW1wdH0pLCBhdHRlbXB0aW5nIGNvZXJjaW9uOmAsIHZhbGlkYXRpb25FcnJvcilcbiAgICBcbiAgICAvLyBBdHRlbXB0IHRvIGNvZXJjZSB0aGUgcmVzcG9uc2UgaW50byB0aGUgY29ycmVjdCBzY2hlbWFcbiAgICBjb25zdCBjb2VyY2VkID0gY29lcmNlVG9TY2hlbWEocGFyc2VkKVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgY29lcmNlZCByZXNwb25zZVxuICAgICAgcmV0dXJuIFRhaWxvcmVkUmVzdWx0U2NoZW1hLnBhcnNlKGNvZXJjZWQpXG4gICAgfSBjYXRjaCAoY29lcmNpb25FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQ29lcmNpb24gYWxzbyBmYWlsZWQ6JywgY29lcmNpb25FcnJvcilcbiAgICAgIFxuICAgICAgLy8gTG9nIGRldGFpbGVkIGZhaWx1cmUgaW5mb3JtYXRpb25cbiAgICAgIGNvbnN0IGZhaWx1cmVEZXRhaWxzID0ge1xuICAgICAgICBvcmlnaW5hbFJlc3BvbnNlOiBwYXJzZWQsXG4gICAgICAgIGNvZXJjZWRSZXNwb25zZTogY29lcmNlZCxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uRXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29lcmNpb25FcnJvcjogY29lcmNpb25FcnJvci5tZXNzYWdlLFxuICAgICAgICBhdHRlbXB0XG4gICAgICB9XG4gICAgICBcbiAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcignU2NoZW1hIHZhbGlkYXRpb24gYW5kIGNvZXJjaW9uIGZhaWxlZCcpLCBmYWlsdXJlRGV0YWlscylcbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWQ6ICR7dmFsaWRhdGlvbkVycm9yLm1lc3NhZ2V9LiBDb2VyY2lvbiBmYWlsZWQ6ICR7Y29lcmNpb25FcnJvci5tZXNzYWdlfWApXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvZXJjZVRvU2NoZW1hKHBhcnNlZDogYW55KTogYW55IHtcbiAgY29uc3QgY29lcmNlZDogYW55ID0ge31cbiAgXG4gIC8vIENvZXJjZSBzdW1tYXJ5XG4gIGlmIChwYXJzZWQuc3VtbWFyeSAmJiB0eXBlb2YgcGFyc2VkLnN1bW1hcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgY29lcmNlZC5zdW1tYXJ5ID0gcGFyc2VkLnN1bW1hcnkudHJpbSgpIHx8ICdQcm9mZXNzaW9uYWwgc3VtbWFyeSBub3QgYXZhaWxhYmxlJ1xuICB9IGVsc2UgaWYgKHBhcnNlZC5zdW1tYXJ5ICYmIHR5cGVvZiBwYXJzZWQuc3VtbWFyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBJZiBzdW1tYXJ5IGlzIGFuIG9iamVjdCwgdHJ5IHRvIGV4dHJhY3QgdGV4dFxuICAgIGNvZXJjZWQuc3VtbWFyeSA9IGV4dHJhY3RUZXh0RnJvbU9iamVjdChwYXJzZWQuc3VtbWFyeSkgfHwgJ1Byb2Zlc3Npb25hbCBzdW1tYXJ5IG5vdCBhdmFpbGFibGUnXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5zdW1tYXJ5ID0gJ1Byb2Zlc3Npb25hbCBzdW1tYXJ5IG5vdCBhdmFpbGFibGUnXG4gIH1cbiAgXG4gIC8vIENvZXJjZSBza2lsbHNfc2VjdGlvblxuICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQuc2tpbGxzX3NlY3Rpb24pKSB7XG4gICAgY29lcmNlZC5za2lsbHNfc2VjdGlvbiA9IHBhcnNlZC5za2lsbHNfc2VjdGlvbi5maWx0ZXIoc2tpbGwgPT4gXG4gICAgICB0eXBlb2Ygc2tpbGwgPT09ICdzdHJpbmcnICYmIHNraWxsLnRyaW0oKS5sZW5ndGggPiAwXG4gICAgKS5tYXAoc2tpbGwgPT4gc2tpbGwudHJpbSgpKVxuICB9IGVsc2UgaWYgKHBhcnNlZC5za2lsbHNfc2VjdGlvbiAmJiB0eXBlb2YgcGFyc2VkLnNraWxsc19zZWN0aW9uID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIHNraWxscyBpcyBhIHN0cmluZywgc3BsaXQgaXRcbiAgICBjb2VyY2VkLnNraWxsc19zZWN0aW9uID0gcGFyc2VkLnNraWxsc19zZWN0aW9uXG4gICAgICAuc3BsaXQoL1ssO3zigKJcXG5dLylcbiAgICAgIC5tYXAocyA9PiBzLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApXG4gIH0gZWxzZSBpZiAocGFyc2VkLnNraWxscyAmJiBBcnJheS5pc0FycmF5KHBhcnNlZC5za2lsbHMpKSB7XG4gICAgLy8gQWx0ZXJuYXRpdmUgZmllbGQgbmFtZVxuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBwYXJzZWQuc2tpbGxzLmZpbHRlcihza2lsbCA9PiBcbiAgICAgIHR5cGVvZiBza2lsbCA9PT0gJ3N0cmluZycgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDBcbiAgICApLm1hcChza2lsbCA9PiBza2lsbC50cmltKCkpXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5za2lsbHNfc2VjdGlvbiA9IFtdXG4gIH1cbiAgXG4gIC8vIENvZXJjZSBleHBlcmllbmNlXG4gIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZC5leHBlcmllbmNlKSkge1xuICAgIGNvZXJjZWQuZXhwZXJpZW5jZSA9IHBhcnNlZC5leHBlcmllbmNlLm1hcChleHAgPT4gY29lcmNlRXhwZXJpZW5jZShleHApKS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIGlmIChwYXJzZWQuZXhwZXJpZW5jZSAmJiB0eXBlb2YgcGFyc2VkLmV4cGVyaWVuY2UgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gSWYgZXhwZXJpZW5jZSBpcyBhbiBvYmplY3QsIHRyeSB0byBjb252ZXJ0IHRvIGFycmF5XG4gICAgY29lcmNlZC5leHBlcmllbmNlID0gW2NvZXJjZUV4cGVyaWVuY2UocGFyc2VkLmV4cGVyaWVuY2UpXS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLmV4cGVyaWVuY2UgPSBbXVxuICB9XG4gIFxuICByZXR1cm4gY29lcmNlZFxufVxuXG5mdW5jdGlvbiBjb2VyY2VFeHBlcmllbmNlKGV4cDogYW55KTogYW55IHtcbiAgaWYgKCFleHAgfHwgdHlwZW9mIGV4cCAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsXG4gIFxuICBjb25zdCBjb2VyY2VkOiBhbnkgPSB7fVxuICBcbiAgLy8gQ29lcmNlIGNvbXBhbnlcbiAgaWYgKHR5cGVvZiBleHAuY29tcGFueSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2VyY2VkLmNvbXBhbnkgPSBleHAuY29tcGFueS50cmltKCkgfHwgJ1Vua25vd24gQ29tcGFueSdcbiAgfSBlbHNlIGlmIChleHAuY29tcGFueSAmJiB0eXBlb2YgZXhwLmNvbXBhbnkgPT09ICdvYmplY3QnKSB7XG4gICAgY29lcmNlZC5jb21wYW55ID0gZXh0cmFjdFRleHRGcm9tT2JqZWN0KGV4cC5jb21wYW55KSB8fCAnVW5rbm93biBDb21wYW55J1xuICB9IGVsc2Uge1xuICAgIGNvZXJjZWQuY29tcGFueSA9ICdVbmtub3duIENvbXBhbnknXG4gIH1cbiAgXG4gIC8vIENvZXJjZSByb2xlXG4gIGlmICh0eXBlb2YgZXhwLnJvbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgY29lcmNlZC5yb2xlID0gZXhwLnJvbGUudHJpbSgpIHx8ICdVbmtub3duIFJvbGUnXG4gIH0gZWxzZSBpZiAoZXhwLnJvbGUgJiYgdHlwZW9mIGV4cC5yb2xlID09PSAnb2JqZWN0Jykge1xuICAgIGNvZXJjZWQucm9sZSA9IGV4dHJhY3RUZXh0RnJvbU9iamVjdChleHAucm9sZSkgfHwgJ1Vua25vd24gUm9sZSdcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLnJvbGUgPSAnVW5rbm93biBSb2xlJ1xuICB9XG4gIFxuICAvLyBDb2VyY2UgYnVsbGV0c1xuICBpZiAoQXJyYXkuaXNBcnJheShleHAuYnVsbGV0cykpIHtcbiAgICBjb2VyY2VkLmJ1bGxldHMgPSBleHAuYnVsbGV0cy5maWx0ZXIoYnVsbGV0ID0+IFxuICAgICAgdHlwZW9mIGJ1bGxldCA9PT0gJ3N0cmluZycgJiYgYnVsbGV0LnRyaW0oKS5sZW5ndGggPiAwXG4gICAgKS5tYXAoYnVsbGV0ID0+IGJ1bGxldC50cmltKCkpXG4gIH0gZWxzZSBpZiAoZXhwLmJ1bGxldHMgJiYgdHlwZW9mIGV4cC5idWxsZXRzID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIGJ1bGxldHMgaXMgYSBzdHJpbmcsIHNwbGl0IGl0XG4gICAgY29lcmNlZC5idWxsZXRzID0gZXhwLmJ1bGxldHNcbiAgICAgIC5zcGxpdCgvW+KAolxcbl0vKVxuICAgICAgLm1hcChiID0+IGIudHJpbSgpKVxuICAgICAgLmZpbHRlcihiID0+IGIubGVuZ3RoID4gMClcbiAgfSBlbHNlIGlmIChleHAuZGVzY3JpcHRpb24gJiYgdHlwZW9mIGV4cC5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBBbHRlcm5hdGl2ZSBmaWVsZCBuYW1lXG4gICAgY29lcmNlZC5idWxsZXRzID0gZXhwLmRlc2NyaXB0aW9uXG4gICAgICAuc3BsaXQoL1vigKJcXG5dLylcbiAgICAgIC5tYXAoYiA9PiBiLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoYiA9PiBiLmxlbmd0aCA+IDApXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5idWxsZXRzID0gW11cbiAgfVxuICBcbiAgcmV0dXJuIGNvZXJjZWRcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRleHRGcm9tT2JqZWN0KG9iajogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgcmV0dXJuIG9ialxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ251bWJlcicpIHJldHVybiBvYmoudG9TdHJpbmcoKVxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChleHRyYWN0VGV4dEZyb21PYmplY3QpLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJylcbiAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIC8vIFRyeSBjb21tb24gdGV4dCBmaWVsZHNcbiAgICBjb25zdCB0ZXh0RmllbGRzID0gWyd0ZXh0JywgJ2NvbnRlbnQnLCAndmFsdWUnLCAnZGVzY3JpcHRpb24nLCAndGl0bGUnXVxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgdGV4dEZpZWxkcykge1xuICAgICAgaWYgKG9ialtmaWVsZF0gJiYgdHlwZW9mIG9ialtmaWVsZF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBvYmpbZmllbGRdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHN0cmluZyB2YWx1ZVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBjbGVhbkFJUmVzcG9uc2UocmF3OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBSZW1vdmUgYW55IHRleHQgYmVmb3JlIHRoZSBmaXJzdCB7XG4gIGNvbnN0IGZpcnN0QnJhY2UgPSByYXcuaW5kZXhPZigneycpXG4gIGlmIChmaXJzdEJyYWNlID4gMCkge1xuICAgIHJhdyA9IHJhdy5zdWJzdHJpbmcoZmlyc3RCcmFjZSlcbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGFueSB0ZXh0IGFmdGVyIHRoZSBsYXN0IH1cbiAgY29uc3QgbGFzdEJyYWNlID0gcmF3Lmxhc3RJbmRleE9mKCd9JylcbiAgaWYgKGxhc3RCcmFjZSA+IDAgJiYgbGFzdEJyYWNlIDwgcmF3Lmxlbmd0aCAtIDEpIHtcbiAgICByYXcgPSByYXcuc3Vic3RyaW5nKDAsIGxhc3RCcmFjZSArIDEpXG4gIH1cbiAgXG4gIC8vIEZpeCBjb21tb24gSlNPTiBpc3N1ZXNcbiAgcmF3ID0gcmF3XG4gICAgLnJlcGxhY2UoL1xcbi9nLCAnICcpIC8vIFJlcGxhY2UgbmV3bGluZXMgd2l0aCBzcGFjZXNcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgLnJlcGxhY2UoLywoXFxzKlt9XFxdXSkvZywgJyQxJykgLy8gUmVtb3ZlIHRyYWlsaW5nIGNvbW1hc1xuICAgIC5yZXBsYWNlKC8oW15cXFxcXSlcXFxcKFteXCJcXFxcXFwvYmZucnRdKS9nLCAnJDFcXFxcXFxcXCQyJykgLy8gRml4IHVuZXNjYXBlZCBiYWNrc2xhc2hlc1xuICAgIC5yZXBsYWNlKC8oW15cXFxcXSlcXFxcKFteXCJcXFxcXFwvYmZucnRdKS9nLCAnJDFcXFxcXFxcXCQyJykgLy8gRml4IHVuZXNjYXBlZCBiYWNrc2xhc2hlcyAoc2Vjb25kIHBhc3MpXG4gICAgLnJlcGxhY2UoL1wiL2csICdcIicpIC8vIEZpeCBzbWFydCBxdW90ZXNcbiAgICAucmVwbGFjZSgvJy9nLCBcIidcIikgLy8gRml4IHNtYXJ0IGFwb3N0cm9waGVzXG4gIFxuICByZXR1cm4gcmF3XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUYWlsb3JlZFJlc3VtZShcbiAgb3JpZ2luYWw6IFJlc3VtZUpTT04sIFxuICBqZFRleHQ6IHN0cmluZywgXG4gIHRvbmU6ICdwcm9mZXNzaW9uYWwnIHwgJ2NvbmNpc2UnIHwgJ2ltcGFjdC1oZWF2eSdcbik6IFByb21pc2U8eyB0YWlsb3JlZDogVGFpbG9yZWRSZXN1bHRUeXBlLCB0b2tlbnM6IG51bWJlciB9PiB7XG4gIGNvbnN0IG1heFJldHJpZXMgPSAzXG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcbiAgXG4gIC8vIEVuaGFuY2VkIHZhbGlkYXRpb24gLSBjaGVjayBpZiB3ZSBoYXZlIG1lYW5pbmdmdWwgZGF0YSB0byB3b3JrIHdpdGhcbiAgaWYgKCFvcmlnaW5hbC5leHBlcmllbmNlIHx8IG9yaWdpbmFsLmV4cGVyaWVuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS53YXJuKCdObyBleHBlcmllbmNlIGRhdGEgYXZhaWxhYmxlIGZvciB0YWlsb3JpbmcsIGF0dGVtcHRpbmcgZXh0cmFjdGlvbiBmcm9tIGZyZWUgdGV4dCcpXG4gICAgcmV0dXJuIGF3YWl0IGhhbmRsZU1pc3NpbmdFeHBlcmllbmNlKG9yaWdpbmFsLCBqZFRleHQsIHRvbmUpXG4gIH1cbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJyBhcyBjb25zdCwgY29udGVudDogU1lTVEVNX1BST01QVCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJyBhcyBjb25zdCwgY29udGVudDogbWFrZVVzZXJQcm9tcHQoeyByZXN1bWVfanNvbjogb3JpZ2luYWwsIGpvYl90ZXh0OiBqZFRleHQsIHRvbmUgfSkgfVxuICAgICAgXVxuXG4gICAgICBjb25zdCBjaGF0ID0gYXdhaXQgZ2V0T3BlbkFJKCkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogT1BFTkFJX01PREVMLFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgfSxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCAvLyBFbnN1cmUgd2UgZG9uJ3QgZ2V0IHRydW5jYXRlZCByZXNwb25zZXNcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJhdyA9IGNoYXQuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nXG4gICAgICBcbiAgICAgIGlmICghcmF3IHx8IHJhdy50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRW1wdHkgcmVzcG9uc2UgZnJvbSBBSScpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIGFuZCB2YWxpZGF0ZSB3aXRoIGRldGFpbGVkIGVycm9yIHJlcG9ydGluZ1xuICAgICAgY29uc3QgdGFpbG9yZWQgPSBhd2FpdCBwYXJzZUFJUmVzcG9uc2UocmF3KVxuICAgICAgXG4gICAgICAvLyBBZGRpdGlvbmFsIHZhbGlkYXRpb24gLSBlbnN1cmUgd2UgZ290IG1lYW5pbmdmdWwgY29udGVudFxuICAgICAgaWYgKCF0YWlsb3JlZCB8fCB0eXBlb2YgdGFpbG9yZWQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQUkgcmVzcG9uc2UgaXMgbm90IGEgdmFsaWQgb2JqZWN0JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgZXhwZXJpZW5jZSBpcyBtaXNzaW5nIG9yIGVtcHR5LCB0cnkgdG8gcHJlc2VydmUgb3JpZ2luYWxcbiAgICAgIGlmICghdGFpbG9yZWQuZXhwZXJpZW5jZSB8fCB0YWlsb3JlZC5leHBlcmllbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0FJIHJlc3BvbnNlIG1pc3NpbmcgZXhwZXJpZW5jZSwgcHJlc2VydmluZyBvcmlnaW5hbCBleHBlcmllbmNlJylcbiAgICAgICAgdGFpbG9yZWQuZXhwZXJpZW5jZSA9IG9yaWdpbmFsLmV4cGVyaWVuY2UgfHwgW11cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB0b2tlbiB1c2FnZVxuICAgICAgY29uc3QgdG9rZW5zID0gY2hhdC51c2FnZT8udG90YWxfdG9rZW5zIHx8IDBcbiAgICAgIFxuICAgICAgLy8gTG9nIHN1Y2Nlc3NmdWwgQUkgcmVxdWVzdFxuICAgICAgbG9nQUlSZXNwb25zZShhdHRlbXB0LCB0cnVlLCB1bmRlZmluZWQsIHJhdy5sZW5ndGgpXG4gICAgICBcbiAgICAgIHJldHVybiB7IHRhaWxvcmVkLCB0b2tlbnMgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yIGFzIEVycm9yXG4gICAgICBjb25zb2xlLndhcm4oYEFJIHJlcXVlc3QgYXR0ZW1wdCAke2F0dGVtcHR9IGZhaWxlZDpgLCBlcnJvcilcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgICAgb3JpZ2luYWxFeHBlcmllbmNlTGVuZ3RoOiBvcmlnaW5hbC5leHBlcmllbmNlPy5sZW5ndGggfHwgMCxcbiAgICAgICAgamRMZW5ndGg6IGpkVGV4dC5sZW5ndGgsXG4gICAgICAgIGF0dGVtcHRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIExvZyBmYWlsZWQgYXR0ZW1wdCB3aXRoIGRldGFpbGVkIGNvbnRleHRcbiAgICAgIGxvZ0FJUmVzcG9uc2UoYXR0ZW1wdCwgZmFsc2UsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBcbiAgICAgIGlmIChhdHRlbXB0IDwgbWF4UmV0cmllcykge1xuICAgICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeSB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSkpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLy8gRmluYWwgZmFsbGJhY2s6IHJldHVybiBvcmlnaW5hbCByZXN1bWUgd2l0aCBtaW5pbWFsIGNoYW5nZXNcbiAgY29uc29sZS5lcnJvcignQWxsIEFJIGF0dGVtcHRzIGZhaWxlZCwgcmV0dXJuaW5nIGZhbGxiYWNrIHJlc3BvbnNlJylcbiAgY29uc29sZS5lcnJvcignTGFzdCBlcnJvcjonLCBsYXN0RXJyb3I/Lm1lc3NhZ2UpXG4gIGxvZ0Vycm9yKG5ldyBFcnJvcignQWxsIEFJIGF0dGVtcHRzIGZhaWxlZCcpLCB7IFxuICAgIG9yaWdpbmFsLCBcbiAgICBqZFRleHQsIFxuICAgIHRvbmUsIFxuICAgIGxhc3RFcnJvcjogbGFzdEVycm9yPy5tZXNzYWdlLFxuICAgIGF0dGVtcHRzOiBtYXhSZXRyaWVzXG4gIH0pXG4gIFxuICByZXR1cm4geyB0YWlsb3JlZDogY3JlYXRlRmFsbGJhY2tSZXNwb25zZShvcmlnaW5hbCwgamRUZXh0KSwgdG9rZW5zOiAwIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWlzc2luZ0V4cGVyaWVuY2UoXG4gIG9yaWdpbmFsOiBSZXN1bWVKU09OLCBcbiAgamRUZXh0OiBzdHJpbmcsIFxuICB0b25lOiAncHJvZmVzc2lvbmFsJyB8ICdjb25jaXNlJyB8ICdpbXBhY3QtaGVhdnknXG4pOiBQcm9taXNlPHsgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0VHlwZSwgdG9rZW5zOiBudW1iZXIgfT4ge1xuICBjb25zb2xlLmxvZygnSGFuZGxpbmcgbWlzc2luZyBleHBlcmllbmNlIC0gYXR0ZW1wdGluZyBleHRyYWN0aW9uIGZyb20gZnJlZSB0ZXh0JylcbiAgXG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIHRyeSB0byBleHRyYWN0IGV4cGVyaWVuY2UgZnJvbSBmcmVlIHRleHRcbiAgICBjb25zdCBleHRyYWN0aW9uUHJvbXB0ID0gYEV4dHJhY3Qgd29yayBleHBlcmllbmNlIGZyb20gdGhlIGZvbGxvd2luZyByZXN1bWUgdGV4dC4gUmV0dXJuIGEgSlNPTiBvYmplY3Qgd2l0aCBhbiBcImV4cGVyaWVuY2VcIiBhcnJheS4gRWFjaCBleHBlcmllbmNlIHNob3VsZCBoYXZlIFwiY29tcGFueVwiLCBcInJvbGVcIiwgYW5kIFwiYnVsbGV0c1wiIGZpZWxkcy5cblxuUmVzdW1lIHRleHQ6ICR7SlNPTi5zdHJpbmdpZnkob3JpZ2luYWwpfVxuXG5SZXR1cm4gb25seSB2YWxpZCBKU09OLmBcblxuICAgIGNvbnN0IGV4dHJhY3Rpb25DaGF0ID0gYXdhaXQgZ2V0T3BlbkFJKCkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IE9QRU5BSV9NT0RFTCxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdZb3UgYXJlIGFuIGV4cGVydCBhdCBleHRyYWN0aW5nIHN0cnVjdHVyZWQgZGF0YSBmcm9tIHJlc3VtZSB0ZXh0LiBSZXR1cm4gb25seSB2YWxpZCBKU09OLicgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IGV4dHJhY3Rpb25Qcm9tcHQgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyB9LFxuICAgICAgbWF4X3Rva2VuczogMjAwMFxuICAgIH0pXG5cbiAgICBjb25zdCBleHRyYWN0aW9uUmF3ID0gZXh0cmFjdGlvbkNoYXQuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nXG4gICAgY29uc3QgZXh0cmFjdGVkRGF0YSA9IEpTT04ucGFyc2UoZXh0cmFjdGlvblJhdylcbiAgICBcbiAgICBpZiAoZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlICYmIEFycmF5LmlzQXJyYXkoZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlKSAmJiBleHRyYWN0ZWREYXRhLmV4cGVyaWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBleHRyYWN0ZWQgZXhwZXJpZW5jZSBmcm9tIGZyZWUgdGV4dCcpXG4gICAgICAvLyBOb3cgdGFpbG9yIHRoZSBleHRyYWN0ZWQgZXhwZXJpZW5jZVxuICAgICAgY29uc3QgdGFpbG9yZWQgPSBhd2FpdCBnZXRUYWlsb3JlZFJlc3VtZShcbiAgICAgICAgeyAuLi5vcmlnaW5hbCwgZXhwZXJpZW5jZTogZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlIH0sIFxuICAgICAgICBqZFRleHQsIFxuICAgICAgICB0b25lXG4gICAgICApXG4gICAgICByZXR1cm4gdGFpbG9yZWRcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGV4dHJhY3QgZXhwZXJpZW5jZSBmcm9tIGZyZWUgdGV4dDonLCBlcnJvcilcbiAgfVxuICBcbiAgLy8gSWYgZXh0cmFjdGlvbiBmYWlscywgcmV0dXJuIGZhbGxiYWNrXG4gIHJldHVybiB7IHRhaWxvcmVkOiBjcmVhdGVGYWxsYmFja1Jlc3BvbnNlKG9yaWdpbmFsLCBqZFRleHQpLCB0b2tlbnM6IDAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVGYWxsYmFja1Jlc3BvbnNlKG9yaWdpbmFsOiBSZXN1bWVKU09OLCBqZFRleHQ6IHN0cmluZyk6IFRhaWxvcmVkUmVzdWx0VHlwZSB7XG4gIC8vIEV4dHJhY3Qga2V5d29yZHMgZnJvbSBqb2IgZGVzY3JpcHRpb25cbiAgY29uc3Qga2V5d29yZHMgPSBleHRyYWN0S2V5d29yZHMoamRUZXh0LCAxMClcbiAgXG4gIC8vIENyZWF0ZSBhIG1pbmltYWwgdGFpbG9yZWQgcmVzcG9uc2UgdGhhdCBwcmVzZXJ2ZXMgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4ge1xuICAgIHN1bW1hcnk6IG9yaWdpbmFsLnN1bW1hcnkgfHwgJ0V4cGVyaWVuY2VkIHByb2Zlc3Npb25hbCB3aXRoIHJlbGV2YW50IHNraWxscyBhbmQgZXhwZXJpZW5jZS4nLFxuICAgIHNraWxsc19zZWN0aW9uOiBvcmlnaW5hbC5za2lsbHMgfHwgW10sXG4gICAgZXhwZXJpZW5jZTogb3JpZ2luYWwuZXhwZXJpZW5jZSB8fCBbXVxuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBzdHJ1Y3R1cmVkIGV4cGVyaWVuY2UgZnJvbSBmcmVlLWZvcm0gdGV4dCB1c2luZyBBSVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEJ1bGxldHNGcm9tRnJlZVRleHQoZnJlZVRleHQ6IHN0cmluZyk6IFByb21pc2U8UmVzdW1lSlNPTlsnZXhwZXJpZW5jZSddPiB7XG4gIGlmICghZnJlZVRleHQgfHwgZnJlZVRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgY29uc3Qgb3BlbmFpID0gZ2V0T3BlbkFJKClcbiAgaWYgKCFvcGVuYWkpIHtcbiAgICBjb25zb2xlLndhcm4oJ09wZW5BSSBub3QgYXZhaWxhYmxlIGZvciBidWxsZXQgZXh0cmFjdGlvbicpXG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBjb25zdCBwcm9tcHQgPSBgR2l2ZW4gdGhlIGZvbGxvd2luZyBmcmVlLWZvcm0gdGV4dCBkZXNjcmliaW5nIHdvcmsgZXhwZXJpZW5jZSwgZXh0cmFjdCBpdCBpbnRvIGEgSlNPTiBhcnJheSBvZiByb2xlcy4gRWFjaCByb2xlIHNob3VsZCBoYXZlICdjb21wYW55JywgJ3JvbGUnLCAnZGF0ZXMnIChvcHRpb25hbCwgY2FuIGJlIGVtcHR5IHN0cmluZyksIGFuZCAnYnVsbGV0cycgKGFuIGFycmF5IG9mIHN0cmluZ3MpLiBJZiBubyBzcGVjaWZpYyByb2xlIG9yIGNvbXBhbnkgaXMgY2xlYXIsIGdyb3VwIHJlbGF0ZWQgYnVsbGV0cyB1bmRlciBhIGdlbmVyaWMgXCJFeHBlcmllbmNlXCIgcm9sZS5cblxuRXhhbXBsZTpcblRleHQ6IFwiQ29tcGFueSBBICgyMDIwLTIwMjIpIC0gU29mdHdhcmUgRW5naW5lZXIuIERldmVsb3BlZCBYLCBJbXBsZW1lbnRlZCBZLiBDb21wYW55IEIgKDIwMTgtMjAyMCkgLSBKdW5pb3IgRGV2LiBBc3Npc3RlZCB3aXRoIFouXCJcbk91dHB1dDpcbltcbiAge1xuICAgIFwiY29tcGFueVwiOiBcIkNvbXBhbnkgQVwiLFxuICAgIFwicm9sZVwiOiBcIlNvZnR3YXJlIEVuZ2luZWVyXCIsXG4gICAgXCJkYXRlc1wiOiBcIjIwMjAtMjAyMlwiLFxuICAgIFwiYnVsbGV0c1wiOiBbXCJEZXZlbG9wZWQgWFwiLCBcIkltcGxlbWVudGVkIFlcIl1cbiAgfSxcbiAge1xuICAgIFwiY29tcGFueVwiOiBcIkNvbXBhbnkgQlwiLFxuICAgIFwicm9sZVwiOiBcIkp1bmlvciBEZXZcIixcbiAgICBcImRhdGVzXCI6IFwiMjAxOC0yMDIwXCIsXG4gICAgXCJidWxsZXRzXCI6IFtcIkFzc2lzdGVkIHdpdGggWlwiXVxuICB9XG5dXG5cblRleHQ6IFwiJHtmcmVlVGV4dH1cIlxuT3V0cHV0OmBcblxuICB0cnkge1xuICAgIGNvbnN0IGNoYXRDb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBPUEVOQUlfTU9ERUwsXG4gICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHJhd1Jlc3BvbnNlID0gY2hhdENvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcbiAgICBpZiAoIXJhd1Jlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBSSByZXR1cm5lZCBhbiBlbXB0eSByZXNwb25zZSBmb3IgYnVsbGV0IGV4dHJhY3Rpb25cIilcbiAgICB9XG5cbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhd1Jlc3BvbnNlKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoZSBzdHJ1Y3R1cmVcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQpKSB7XG4gICAgICByZXR1cm4gcGFyc2VkLm1hcCgocm9sZTogYW55KSA9PiAoe1xuICAgICAgICBjb21wYW55OiAocm9sZS5jb21wYW55IHx8ICcnKS50cmltKCkgfHwgJ1Vua25vd24gQ29tcGFueScsXG4gICAgICAgIHJvbGU6IChyb2xlLnJvbGUgfHwgJycpLnRyaW0oKSB8fCAnVW5rbm93biBSb2xlJyxcbiAgICAgICAgZGF0ZXM6IChyb2xlLmRhdGVzIHx8ICcnKS50cmltKCkgfHwgJycsXG4gICAgICAgIGJ1bGxldHM6IEFycmF5LmlzQXJyYXkocm9sZS5idWxsZXRzKSA/IHJvbGUuYnVsbGV0cy5maWx0ZXIoYiA9PiB0eXBlb2YgYiA9PT0gJ3N0cmluZycgJiYgYi50cmltKCkubGVuZ3RoID4gMCkubWFwKGIgPT4gYi50cmltKCkpIDogW11cbiAgICAgIH0pKVxuICAgIH0gZWxzZSBpZiAocGFyc2VkLmV4cGVyaWVuY2UgJiYgQXJyYXkuaXNBcnJheShwYXJzZWQuZXhwZXJpZW5jZSkpIHtcbiAgICAgIHJldHVybiBwYXJzZWQuZXhwZXJpZW5jZS5tYXAoKHJvbGU6IGFueSkgPT4gKHtcbiAgICAgICAgY29tcGFueTogKHJvbGUuY29tcGFueSB8fCAnJykudHJpbSgpIHx8ICdVbmtub3duIENvbXBhbnknLFxuICAgICAgICByb2xlOiAocm9sZS5yb2xlIHx8ICcnKS50cmltKCkgfHwgJ1Vua25vd24gUm9sZScsXG4gICAgICAgIGRhdGVzOiAocm9sZS5kYXRlcyB8fCAnJykudHJpbSgpIHx8ICcnLFxuICAgICAgICBidWxsZXRzOiBBcnJheS5pc0FycmF5KHJvbGUuYnVsbGV0cykgPyByb2xlLmJ1bGxldHMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT09ICdzdHJpbmcnICYmIGIudHJpbSgpLmxlbmd0aCA+IDApLm1hcChiID0+IGIudHJpbSgpKSA6IFtdXG4gICAgICB9KSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQgZnJvbSBBSVwiKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleHRyYWN0aW5nIGJ1bGxldHMgZnJvbSBmcmVlIHRleHQ6XCIsIGVycm9yKVxuICAgIGxvZ0Vycm9yKGVycm9yIGFzIEVycm9yLCB7IGNvbnRleHQ6ICdidWxsZXRfZXh0cmFjdGlvbicgfSlcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiVGFpbG9yZWRSZXN1bHRTY2hlbWEiLCJsb2dBSVJlc3BvbnNlIiwibG9nRXJyb3IiLCJleHRyYWN0S2V5d29yZHMiLCJnZXRPcGVuQUkiLCJPUEVOQUlfTU9ERUwiLCJTWVNURU1fUFJPTVBUIiwibWFrZVVzZXJQcm9tcHQiLCJwYXJzZUFJUmVzcG9uc2UiLCJyYXciLCJtYXhSZXRyaWVzIiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsImNsZWFuZWQiLCJjbGVhbkFJUmVzcG9uc2UiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ2YWxpZGF0ZWQiLCJ2YWxpZGF0ZUFuZENvZXJjZVJlc3BvbnNlIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIm1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJFcnJvciIsInZhbGlkYXRpb25FcnJvciIsImxvZyIsImNvZXJjZWQiLCJjb2VyY2VUb1NjaGVtYSIsImNvZXJjaW9uRXJyb3IiLCJmYWlsdXJlRGV0YWlscyIsIm9yaWdpbmFsUmVzcG9uc2UiLCJjb2VyY2VkUmVzcG9uc2UiLCJzdW1tYXJ5IiwidHJpbSIsImV4dHJhY3RUZXh0RnJvbU9iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsInNraWxsc19zZWN0aW9uIiwiZmlsdGVyIiwic2tpbGwiLCJtYXAiLCJzcGxpdCIsInMiLCJza2lsbHMiLCJleHBlcmllbmNlIiwiZXhwIiwiY29lcmNlRXhwZXJpZW5jZSIsIkJvb2xlYW4iLCJjb21wYW55Iiwicm9sZSIsImJ1bGxldHMiLCJidWxsZXQiLCJiIiwiZGVzY3JpcHRpb24iLCJvYmoiLCJ0b1N0cmluZyIsImpvaW4iLCJ0ZXh0RmllbGRzIiwiZmllbGQiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJmaXJzdEJyYWNlIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsImxhc3RCcmFjZSIsImxhc3RJbmRleE9mIiwicmVwbGFjZSIsImdldFRhaWxvcmVkUmVzdW1lIiwib3JpZ2luYWwiLCJqZFRleHQiLCJ0b25lIiwiaGFuZGxlTWlzc2luZ0V4cGVyaWVuY2UiLCJtZXNzYWdlcyIsImNvbnRlbnQiLCJyZXN1bWVfanNvbiIsImpvYl90ZXh0IiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJtYXhfdG9rZW5zIiwiY2hvaWNlcyIsInRhaWxvcmVkIiwidG9rZW5zIiwidXNhZ2UiLCJ0b3RhbF90b2tlbnMiLCJzdGFjayIsIm9yaWdpbmFsRXhwZXJpZW5jZUxlbmd0aCIsImpkTGVuZ3RoIiwiTWF0aCIsInBvdyIsImF0dGVtcHRzIiwiY3JlYXRlRmFsbGJhY2tSZXNwb25zZSIsImV4dHJhY3Rpb25Qcm9tcHQiLCJzdHJpbmdpZnkiLCJleHRyYWN0aW9uQ2hhdCIsImV4dHJhY3Rpb25SYXciLCJleHRyYWN0ZWREYXRhIiwia2V5d29yZHMiLCJleHRyYWN0QnVsbGV0c0Zyb21GcmVlVGV4dCIsImZyZWVUZXh0Iiwib3BlbmFpIiwicHJvbXB0IiwiY2hhdENvbXBsZXRpb24iLCJyYXdSZXNwb25zZSIsImRhdGVzIiwiY29udGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai-response-parser.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ats.ts":
/*!********************!*\
  !*** ./lib/ats.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   atsCheck: () => (/* binding */ atsCheck)\n/* harmony export */ });\n/* harmony import */ var _jd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jd */ \"(rsc)/./lib/jd.ts\");\n\nfunction atsCheck(resume, jdText) {\n    const { all, must, nice } = (0,_jd__WEBPACK_IMPORTED_MODULE_0__.extractKeywords2)(jdText, 20);\n    const resumeText = stringifyResume(resume).toLowerCase();\n    const matched = all.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const missing = all.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const mustMatched = must.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const mustMissing = must.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const niceMatched = nice.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const niceMissing = nice.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const warnings = [];\n    // Enhanced section detection with better validation\n    if (!hasExperienceSection(resume)) {\n        warnings.push(\"No Experience section detected.\");\n    }\n    if (!hasSkillsSection(resume)) {\n        warnings.push(\"No Skills section detected.\");\n    }\n    const base = {\n        coverage: all.length ? matched.length / all.length : 0,\n        matched,\n        missing,\n        warnings,\n        mustCoverage: must.length ? mustMatched.length / must.length : 0,\n        niceCoverage: nice.length ? niceMatched.length / nice.length : 0,\n        mustMatched,\n        mustMissing,\n        niceMatched,\n        niceMissing,\n        topMissing: missing.slice(0, 5)\n    };\n    return base;\n}\nfunction hasExperienceSection(resume) {\n    if (!resume.experience || resume.experience.length === 0) return false;\n    // Check if experience has meaningful content\n    return resume.experience.some((exp)=>exp.company && exp.role && (exp.bullets?.length || 0) > 0);\n}\nfunction hasSkillsSection(resume) {\n    if (!resume.skills || resume.skills.length === 0) return false;\n    // Check if skills have meaningful content\n    return resume.skills.some((skill)=>skill && skill.trim().length > 2);\n}\nfunction stringifyResume(resume) {\n    const parts = [];\n    if (resume.summary) parts.push(resume.summary);\n    if (resume.skills?.length) parts.push(resume.skills.join(\" \"));\n    if (resume.experience?.length) {\n        resume.experience.forEach((exp)=>{\n            if (exp.company) parts.push(exp.company);\n            if (exp.role) parts.push(exp.role);\n            if (exp.bullets?.length) parts.push(exp.bullets.join(\" \"));\n        });\n    }\n    if (resume.education?.length) parts.push(resume.education.join(\" \"));\n    if (resume.certifications?.length) parts.push(resume.certifications.join(\" \"));\n    return parts.join(\" \");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSXZDLE9BQU80QixVQUFVLEVBQUVMLFFBQVE7UUFDN0J2QixPQUFPNEIsVUFBVSxDQUFDWSxPQUFPLENBQUNWLENBQUFBO1lBQ3hCLElBQUlBLElBQUlDLE9BQU8sRUFBRU0sTUFBTWxCLElBQUksQ0FBQ1csSUFBSUMsT0FBTztZQUN2QyxJQUFJRCxJQUFJRSxJQUFJLEVBQUVLLE1BQU1sQixJQUFJLENBQUNXLElBQUlFLElBQUk7WUFDakMsSUFBSUYsSUFBSUcsT0FBTyxFQUFFVixRQUFRYyxNQUFNbEIsSUFBSSxDQUFDVyxJQUFJRyxPQUFPLENBQUNNLElBQUksQ0FBQztRQUN2RDtJQUNGO0lBQ0EsSUFBSXZDLE9BQU95QyxTQUFTLEVBQUVsQixRQUFRYyxNQUFNbEIsSUFBSSxDQUFDbkIsT0FBT3lDLFNBQVMsQ0FBQ0YsSUFBSSxDQUFDO0lBQy9ELElBQUl2QyxPQUFPMEMsY0FBYyxFQUFFbkIsUUFBUWMsTUFBTWxCLElBQUksQ0FBQ25CLE9BQU8wQyxjQUFjLENBQUNILElBQUksQ0FBQztJQUV6RSxPQUFPRixNQUFNRSxJQUFJLENBQUM7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vbGliL2F0cy50cz8yN2RkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4dHJhY3RLZXl3b3JkczIgfSBmcm9tICcuL2pkJ1xuaW1wb3J0IHsgUmVzdW1lSlNPTiwgS2V5d29yZFN0YXRzIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuXG5leHBvcnQgZnVuY3Rpb24gYXRzQ2hlY2socmVzdW1lOiBSZXN1bWVKU09OLCBqZFRleHQ6IHN0cmluZyk6IEtleXdvcmRTdGF0cyB7XG4gIGNvbnN0IHsgYWxsLCBtdXN0LCBuaWNlIH0gPSBleHRyYWN0S2V5d29yZHMyKGpkVGV4dCwgMjApXG4gIGNvbnN0IHJlc3VtZVRleHQgPSBzdHJpbmdpZnlSZXN1bWUocmVzdW1lKS50b0xvd2VyQ2FzZSgpXG5cbiAgY29uc3QgbWF0Y2hlZCA9IGFsbC5maWx0ZXIoayA9PiByZXN1bWVUZXh0LmluY2x1ZGVzKGsudG9Mb3dlckNhc2UoKSkpXG4gIGNvbnN0IG1pc3NpbmcgPSBhbGwuZmlsdGVyKGsgPT4gIXJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcblxuICBjb25zdCBtdXN0TWF0Y2hlZCA9IG11c3QuZmlsdGVyKGsgPT4gcmVzdW1lVGV4dC5pbmNsdWRlcyhrLnRvTG93ZXJDYXNlKCkpKVxuICBjb25zdCBtdXN0TWlzc2luZyA9IG11c3QuZmlsdGVyKGsgPT4gIXJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcbiAgY29uc3QgbmljZU1hdGNoZWQgPSBuaWNlLmZpbHRlcihrID0+IHJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcbiAgY29uc3QgbmljZU1pc3NpbmcgPSBuaWNlLmZpbHRlcihrID0+ICFyZXN1bWVUZXh0LmluY2x1ZGVzKGsudG9Mb3dlckNhc2UoKSkpXG5cbiAgY29uc3Qgd2FybmluZ3M6c3RyaW5nW10gPSBbXVxuICBcbiAgLy8gRW5oYW5jZWQgc2VjdGlvbiBkZXRlY3Rpb24gd2l0aCBiZXR0ZXIgdmFsaWRhdGlvblxuICBpZiAoIWhhc0V4cGVyaWVuY2VTZWN0aW9uKHJlc3VtZSkpIHtcbiAgICB3YXJuaW5ncy5wdXNoKCdObyBFeHBlcmllbmNlIHNlY3Rpb24gZGV0ZWN0ZWQuJylcbiAgfVxuICBpZiAoIWhhc1NraWxsc1NlY3Rpb24ocmVzdW1lKSkge1xuICAgIHdhcm5pbmdzLnB1c2goJ05vIFNraWxscyBzZWN0aW9uIGRldGVjdGVkLicpXG4gIH1cblxuICBjb25zdCBiYXNlOiBLZXl3b3JkU3RhdHMgPSB7XG4gICAgY292ZXJhZ2U6IGFsbC5sZW5ndGggPyBtYXRjaGVkLmxlbmd0aCAvIGFsbC5sZW5ndGggOiAwLFxuICAgIG1hdGNoZWQsIG1pc3NpbmcsIHdhcm5pbmdzLFxuICAgIG11c3RDb3ZlcmFnZTogbXVzdC5sZW5ndGggPyBtdXN0TWF0Y2hlZC5sZW5ndGggLyBtdXN0Lmxlbmd0aCA6IDAsXG4gICAgbmljZUNvdmVyYWdlOiBuaWNlLmxlbmd0aCA/IG5pY2VNYXRjaGVkLmxlbmd0aCAvIG5pY2UubGVuZ3RoIDogMCxcbiAgICBtdXN0TWF0Y2hlZCwgbXVzdE1pc3NpbmcsIG5pY2VNYXRjaGVkLCBuaWNlTWlzc2luZyxcbiAgICB0b3BNaXNzaW5nOiBtaXNzaW5nLnNsaWNlKDAsNSlcbiAgfVxuICByZXR1cm4gYmFzZVxufVxuXG5mdW5jdGlvbiBoYXNFeHBlcmllbmNlU2VjdGlvbihyZXN1bWU6IFJlc3VtZUpTT04pOiBib29sZWFuIHtcbiAgaWYgKCFyZXN1bWUuZXhwZXJpZW5jZSB8fCByZXN1bWUuZXhwZXJpZW5jZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICBcbiAgLy8gQ2hlY2sgaWYgZXhwZXJpZW5jZSBoYXMgbWVhbmluZ2Z1bCBjb250ZW50XG4gIHJldHVybiByZXN1bWUuZXhwZXJpZW5jZS5zb21lKGV4cCA9PiBcbiAgICBleHAuY29tcGFueSAmJiBleHAucm9sZSAmJiBcbiAgICAoZXhwLmJ1bGxldHM/Lmxlbmd0aCB8fCAwKSA+IDBcbiAgKVxufVxuXG5mdW5jdGlvbiBoYXNTa2lsbHNTZWN0aW9uKHJlc3VtZTogUmVzdW1lSlNPTik6IGJvb2xlYW4ge1xuICBpZiAoIXJlc3VtZS5za2lsbHMgfHwgcmVzdW1lLnNraWxscy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICBcbiAgLy8gQ2hlY2sgaWYgc2tpbGxzIGhhdmUgbWVhbmluZ2Z1bCBjb250ZW50XG4gIHJldHVybiByZXN1bWUuc2tpbGxzLnNvbWUoc2tpbGwgPT4gXG4gICAgc2tpbGwgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDJcbiAgKVxufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlSZXN1bWUocmVzdW1lOiBSZXN1bWVKU09OKTogc3RyaW5nIHtcbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmIChyZXN1bWUuc3VtbWFyeSkgcGFydHMucHVzaChyZXN1bWUuc3VtbWFyeSlcbiAgaWYgKHJlc3VtZS5za2lsbHM/Lmxlbmd0aCkgcGFydHMucHVzaChyZXN1bWUuc2tpbGxzLmpvaW4oJyAnKSlcbiAgaWYgKHJlc3VtZS5leHBlcmllbmNlPy5sZW5ndGgpIHtcbiAgICByZXN1bWUuZXhwZXJpZW5jZS5mb3JFYWNoKGV4cCA9PiB7XG4gICAgICBpZiAoZXhwLmNvbXBhbnkpIHBhcnRzLnB1c2goZXhwLmNvbXBhbnkpXG4gICAgICBpZiAoZXhwLnJvbGUpIHBhcnRzLnB1c2goZXhwLnJvbGUpXG4gICAgICBpZiAoZXhwLmJ1bGxldHM/Lmxlbmd0aCkgcGFydHMucHVzaChleHAuYnVsbGV0cy5qb2luKCcgJykpXG4gICAgfSlcbiAgfVxuICBpZiAocmVzdW1lLmVkdWNhdGlvbj8ubGVuZ3RoKSBwYXJ0cy5wdXNoKHJlc3VtZS5lZHVjYXRpb24uam9pbignICcpKVxuICBpZiAocmVzdW1lLmNlcnRpZmljYXRpb25zPy5sZW5ndGgpIHBhcnRzLnB1c2gocmVzdW1lLmNlcnRpZmljYXRpb25zLmpvaW4oJyAnKSlcbiAgXG4gIHJldHVybiBwYXJ0cy5qb2luKCcgJylcbn1cbiJdLCJuYW1lcyI6WyJleHRyYWN0S2V5d29yZHMyIiwiYXRzQ2hlY2siLCJyZXN1bWUiLCJqZFRleHQiLCJhbGwiLCJtdXN0IiwibmljZSIsInJlc3VtZVRleHQiLCJzdHJpbmdpZnlSZXN1bWUiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoZWQiLCJmaWx0ZXIiLCJrIiwiaW5jbHVkZXMiLCJtaXNzaW5nIiwibXVzdE1hdGNoZWQiLCJtdXN0TWlzc2luZyIsIm5pY2VNYXRjaGVkIiwibmljZU1pc3NpbmciLCJ3YXJuaW5ncyIsImhhc0V4cGVyaWVuY2VTZWN0aW9uIiwicHVzaCIsImhhc1NraWxsc1NlY3Rpb24iLCJiYXNlIiwiY292ZXJhZ2UiLCJsZW5ndGgiLCJtdXN0Q292ZXJhZ2UiLCJuaWNlQ292ZXJhZ2UiLCJ0b3BNaXNzaW5nIiwic2xpY2UiLCJleHBlcmllbmNlIiwic29tZSIsImV4cCIsImNvbXBhbnkiLCJyb2xlIiwiYnVsbGV0cyIsInNraWxscyIsInNraWxsIiwidHJpbSIsInBhcnRzIiwic3VtbWFyeSIsImpvaW4iLCJmb3JFYWNoIiwiZWR1Y2F0aW9uIiwiY2VydGlmaWNhdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ats.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config.ts":
/*!***********************!*\
  !*** ./lib/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   loadConfig: () => (/* binding */ loadConfig),\n/* harmony export */   saveConfig: () => (/* binding */ saveConfig),\n/* harmony export */   updateConfig: () => (/* binding */ updateConfig)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CONFIG_PATH = \"/tmp/ai-resume-tailor-config.json\";\nlet config = {\n    rate: {\n        ipPerMin: Number(process.env.RATE_IP_PER_MIN || 30),\n        sessionPerMin: Number(process.env.RATE_SESSION_PER_MIN || 5)\n    },\n    invites: (process.env.INVITE_CODES || \"\").split(\",\").map((s)=>s.trim()).filter(Boolean),\n    openaiKey: undefined,\n    pauseTailor: false,\n    pauseExport: false\n};\nfunction loadConfig() {\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(CONFIG_PATH)) {\n            const raw = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(CONFIG_PATH, \"utf8\");\n            const fileCfg = JSON.parse(raw);\n            config = {\n                ...config,\n                ...fileCfg\n            };\n        }\n    } catch  {}\n}\nfunction saveConfig() {\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(CONFIG_PATH, JSON.stringify(config, null, 2));\n    } catch  {}\n}\nfunction getConfig() {\n    return config;\n}\nfunction updateConfig(partial) {\n    config = {\n        ...config,\n        ...partial,\n        rate: {\n            ...config.rate,\n            ...partial.rate || {}\n        }\n    };\n    saveConfig();\n}\nloadConfig();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtQjtBQUNuQixNQUFNQyxjQUFjO0FBVXBCLElBQUlDLFNBQW9CO0lBQ3RCQyxNQUFNO1FBQUVDLFVBQVVDLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFFO1FBQUtDLGVBQWVKLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUU7SUFBRztJQUN0SEMsU0FBUyxDQUFDTCxRQUFRQyxHQUFHLENBQUNLLFlBQVksSUFBRSxFQUFDLEVBQUdDLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUdBLEVBQUVDLElBQUksSUFBSUMsTUFBTSxDQUFDQztJQUMzRUMsV0FBV0M7SUFDWEMsYUFBYTtJQUNiQyxhQUFhO0FBQ2Y7QUFFTyxTQUFTQztJQUNkLElBQUk7UUFDRixJQUFJdkIsb0RBQWEsQ0FBQ0MsY0FBYztZQUM5QixNQUFNd0IsTUFBTXpCLHNEQUFlLENBQUNDLGFBQWE7WUFDekMsTUFBTTBCLFVBQVVDLEtBQUtDLEtBQUssQ0FBQ0o7WUFDM0J2QixTQUFTO2dCQUFFLEdBQUdBLE1BQU07Z0JBQUUsR0FBR3lCLE9BQU87WUFBQztRQUNuQztJQUNGLEVBQUUsT0FBTSxDQUFDO0FBQ1g7QUFFTyxTQUFTRztJQUNkLElBQUk7UUFBRTlCLHVEQUFnQixDQUFDQyxhQUFhMkIsS0FBS0ksU0FBUyxDQUFDOUIsUUFBUSxNQUFNO0lBQUksRUFBRSxPQUFNLENBQUM7QUFDaEY7QUFFTyxTQUFTK0I7SUFBeUIsT0FBTy9CO0FBQU87QUFFaEQsU0FBU2dDLGFBQWFDLE9BQTJCO0lBQ3REakMsU0FBUztRQUFFLEdBQUdBLE1BQU07UUFBRSxHQUFHaUMsT0FBTztRQUFFaEMsTUFBTTtZQUFFLEdBQUdELE9BQU9DLElBQUk7WUFBRSxHQUFJZ0MsUUFBUWhDLElBQUksSUFBRSxDQUFDLENBQUM7UUFBRTtJQUFFO0lBQ2xGMkI7QUFDRjtBQUNBUCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvY29uZmlnLnRzPzEyODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuY29uc3QgQ09ORklHX1BBVEggPSAnL3RtcC9haS1yZXN1bWUtdGFpbG9yLWNvbmZpZy5qc29uJ1xuXG5leHBvcnQgdHlwZSBBcHBDb25maWcgPSB7XG4gIHJhdGU6IHsgaXBQZXJNaW46IG51bWJlciwgc2Vzc2lvblBlck1pbjogbnVtYmVyIH0sXG4gIGludml0ZXM6IHN0cmluZ1tdLFxuICBvcGVuYWlLZXk/OiBzdHJpbmcsXG4gIHBhdXNlVGFpbG9yPzogYm9vbGVhbixcbiAgcGF1c2VFeHBvcnQ/OiBib29sZWFuXG59XG5cbmxldCBjb25maWc6IEFwcENvbmZpZyA9IHtcbiAgcmF0ZTogeyBpcFBlck1pbjogTnVtYmVyKHByb2Nlc3MuZW52LlJBVEVfSVBfUEVSX01JTnx8MzApLCBzZXNzaW9uUGVyTWluOiBOdW1iZXIocHJvY2Vzcy5lbnYuUkFURV9TRVNTSU9OX1BFUl9NSU58fDUpIH0sXG4gIGludml0ZXM6IChwcm9jZXNzLmVudi5JTlZJVEVfQ09ERVN8fCcnKS5zcGxpdCgnLCcpLm1hcChzPT5zLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pLFxuICBvcGVuYWlLZXk6IHVuZGVmaW5lZCxcbiAgcGF1c2VUYWlsb3I6IGZhbHNlLFxuICBwYXVzZUV4cG9ydDogZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb25maWcoKSB7XG4gIHRyeSB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoQ09ORklHX1BBVEgpKSB7XG4gICAgICBjb25zdCByYXcgPSBmcy5yZWFkRmlsZVN5bmMoQ09ORklHX1BBVEgsICd1dGY4JylcbiAgICAgIGNvbnN0IGZpbGVDZmcgPSBKU09OLnBhcnNlKHJhdylcbiAgICAgIGNvbmZpZyA9IHsgLi4uY29uZmlnLCAuLi5maWxlQ2ZnIH1cbiAgICB9XG4gIH0gY2F0Y2gge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVDb25maWcoKSB7XG4gIHRyeSB7IGZzLndyaXRlRmlsZVN5bmMoQ09ORklHX1BBVEgsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpIH0gY2F0Y2gge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpOiBBcHBDb25maWcgeyByZXR1cm4gY29uZmlnIH1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvbmZpZyhwYXJ0aWFsOiBQYXJ0aWFsPEFwcENvbmZpZz4pIHtcbiAgY29uZmlnID0geyAuLi5jb25maWcsIC4uLnBhcnRpYWwsIHJhdGU6IHsgLi4uY29uZmlnLnJhdGUsIC4uLihwYXJ0aWFsLnJhdGV8fHt9KSB9IH1cbiAgc2F2ZUNvbmZpZygpXG59XG5sb2FkQ29uZmlnKClcbiJdLCJuYW1lcyI6WyJmcyIsIkNPTkZJR19QQVRIIiwiY29uZmlnIiwicmF0ZSIsImlwUGVyTWluIiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlJBVEVfSVBfUEVSX01JTiIsInNlc3Npb25QZXJNaW4iLCJSQVRFX1NFU1NJT05fUEVSX01JTiIsImludml0ZXMiLCJJTlZJVEVfQ09ERVMiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsIm9wZW5haUtleSIsInVuZGVmaW5lZCIsInBhdXNlVGFpbG9yIiwicGF1c2VFeHBvcnQiLCJsb2FkQ29uZmlnIiwiZXhpc3RzU3luYyIsInJhdyIsInJlYWRGaWxlU3luYyIsImZpbGVDZmciLCJKU09OIiwicGFyc2UiLCJzYXZlQ29uZmlnIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsImdldENvbmZpZyIsInVwZGF0ZUNvbmZpZyIsInBhcnRpYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/guards.ts":
/*!***********************!*\
  !*** ./lib/guards.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientIP: () => (/* binding */ clientIP),\n/* harmony export */   enforceGuards: () => (/* binding */ enforceGuards),\n/* harmony export */   hasInvite: () => (/* binding */ hasInvite),\n/* harmony export */   sessionID: () => (/* binding */ sessionID)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n\n\nconst ipHits = new Map();\nconst sidHits = new Map();\nfunction now() {\n    return Date.now();\n}\nfunction slide(arr, windowMs) {\n    const t = now();\n    while(arr.length && t - arr[0] > windowMs)arr.shift();\n}\nfunction pushHit(map, key) {\n    const arr = map.get(key) || [];\n    arr.push(now());\n    map.set(key, arr);\n    return arr;\n}\nfunction cookieValue(req, name) {\n    const cookie = req.headers.get(\"cookie\") || \"\";\n    const match = cookie.match(new RegExp(\"(?:^|; )\" + name + \"=([^;]+)\"));\n    return match ? decodeURIComponent(match[1]) : null;\n}\nfunction clientIP(req) {\n    const fwd = req.headers.get(\"x-forwarded-for\") || \"\";\n    const ip = fwd.split(\",\")[0].trim() || \"0.0.0.0\";\n    return ip;\n}\nfunction sessionID(req) {\n    return cookieValue(req, \"sid\") || \"anon\";\n}\nfunction hasInvite(req) {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\n    if (!cfg.invites.length) return true;\n    const header = req.headers.get(\"x-invite-code\") || \"\";\n    const cookie = cookieValue(req, \"invite\") || \"\";\n    const code = header || cookie;\n    if (!code) return false;\n    return cfg.invites.includes(code);\n}\nfunction enforceGuards(req) {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\n    if (!hasInvite(req)) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"invite_required\",\n                message: \"Invite code required\"\n            }, {\n                status: 403\n            })\n        };\n    }\n    const ip = clientIP(req);\n    const sid = sessionID(req);\n    const ipArr = pushHit(ipHits, ip);\n    const sidArr = pushHit(sidHits, sid);\n    slide(ipArr, 60000);\n    slide(sidArr, 60000);\n    // prune empty and cap map sizes to avoid unbounded growth\n    pruneMaps();\n    if (ipArr.length > cfg.rate.ipPerMin) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"rate_limited\",\n                message: \"Too many requests\"\n            }, {\n                status: 429\n            })\n        };\n    }\n    if (sidArr.length > cfg.rate.sessionPerMin) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"rate_limited\",\n                message: \"Too many requests\"\n            }, {\n                status: 429\n            })\n        };\n    }\n    return {\n        ok: true\n    };\n}\nfunction pruneMaps(windowMs = 60000, maxKeys = 5000) {\n    const nowMs = now();\n    for (const [k, arr] of ipHits){\n        while(arr.length && nowMs - arr[0] > windowMs)arr.shift();\n        if (arr.length === 0) ipHits.delete(k);\n    }\n    for (const [k, arr] of sidHits){\n        while(arr.length && nowMs - arr[0] > windowMs)arr.shift();\n        if (arr.length === 0) sidHits.delete(k);\n    }\n    if (ipHits.size > maxKeys) {\n        for (const k of ipHits.keys()){\n            ipHits.delete(k);\n            if (ipHits.size <= maxKeys) break;\n        }\n    }\n    if (sidHits.size > maxKeys) {\n        for (const k of sidHits.keys()){\n            sidHits.delete(k);\n            if (sidHits.size <= maxKeys) break;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7Z0JBQUVMLE1BQU07Z0JBQWdCTSxTQUFTO1lBQW9CLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUFHO0lBQ3RIO0lBQ0EsT0FBTztRQUFFSixJQUFJO0lBQUs7QUFDcEI7QUFFQSxTQUFTUSxVQUFVdkMsV0FBa0IsS0FBTSxFQUFFMkMsVUFBVSxJQUFJO0lBQ3pELE1BQU1DLFFBQVFoRDtJQUNkLEtBQUssTUFBTSxDQUFDaUQsR0FBRzlDLElBQUksSUFBSU4sT0FBUTtRQUM3QixNQUFPTSxJQUFJRyxNQUFNLElBQUksUUFBU0gsR0FBRyxDQUFDLEVBQUUsR0FBSUMsU0FBVUQsSUFBSUksS0FBSztRQUMzRCxJQUFJSixJQUFJRyxNQUFNLEtBQUssR0FBR1QsT0FBT3FELE1BQU0sQ0FBQ0Q7SUFDdEM7SUFDQSxLQUFLLE1BQU0sQ0FBQ0EsR0FBRzlDLElBQUksSUFBSUosUUFBUztRQUM5QixNQUFPSSxJQUFJRyxNQUFNLElBQUksUUFBU0gsR0FBRyxDQUFDLEVBQUUsR0FBSUMsU0FBVUQsSUFBSUksS0FBSztRQUMzRCxJQUFJSixJQUFJRyxNQUFNLEtBQUssR0FBR1AsUUFBUW1ELE1BQU0sQ0FBQ0Q7SUFDdkM7SUFDQSxJQUFJcEQsT0FBT3NELElBQUksR0FBR0osU0FBUztRQUN6QixLQUFLLE1BQU1FLEtBQUtwRCxPQUFPdUQsSUFBSSxHQUFJO1lBQUV2RCxPQUFPcUQsTUFBTSxDQUFDRDtZQUFJLElBQUlwRCxPQUFPc0QsSUFBSSxJQUFJSixTQUFTO1FBQU07SUFDdkY7SUFDQSxJQUFJaEQsUUFBUW9ELElBQUksR0FBR0osU0FBUztRQUMxQixLQUFLLE1BQU1FLEtBQUtsRCxRQUFRcUQsSUFBSSxHQUFJO1lBQUVyRCxRQUFRbUQsTUFBTSxDQUFDRDtZQUFJLElBQUlsRCxRQUFRb0QsSUFBSSxJQUFJSixTQUFTO1FBQU07SUFDMUY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvZ3VhcmRzLnRzPzIyOTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5cbmNvbnN0IGlwSGl0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXJbXT4oKVxuY29uc3Qgc2lkSGl0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXJbXT4oKVxuXG5mdW5jdGlvbiBub3coKSB7IHJldHVybiBEYXRlLm5vdygpIH1cblxuZnVuY3Rpb24gc2xpZGUoYXJyOm51bWJlcltdLCB3aW5kb3dNczpudW1iZXIpIHtcbiAgY29uc3QgdCA9IG5vdygpXG4gIHdoaWxlIChhcnIubGVuZ3RoICYmICh0IC0gYXJyWzBdKSA+IHdpbmRvd01zKSBhcnIuc2hpZnQoKVxufVxuXG5mdW5jdGlvbiBwdXNoSGl0KG1hcDogTWFwPHN0cmluZywgbnVtYmVyW10+LCBrZXk6IHN0cmluZykge1xuICBjb25zdCBhcnIgPSBtYXAuZ2V0KGtleSkgfHwgW11cbiAgYXJyLnB1c2gobm93KCkpXG4gIG1hcC5zZXQoa2V5LCBhcnIpXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gY29va2llVmFsdWUocmVxOiBOZXh0UmVxdWVzdCwgbmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IGNvb2tpZSA9IHJlcS5oZWFkZXJzLmdldCgnY29va2llJykgfHwgJydcbiAgY29uc3QgbWF0Y2ggPSBjb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKD86Xnw7ICknICsgbmFtZSArICc9KFteO10rKScpKVxuICByZXR1cm4gbWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pIDogbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xpZW50SVAocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBmd2QgPSByZXEuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8ICcnXG4gIGNvbnN0IGlwID0gZndkLnNwbGl0KCcsJylbMF0udHJpbSgpIHx8ICcwLjAuMC4wJ1xuICByZXR1cm4gaXBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlc3Npb25JRChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHJldHVybiBjb29raWVWYWx1ZShyZXEsICdzaWQnKSB8fCAnYW5vbidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludml0ZShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpXG4gIGlmICghY2ZnLmludml0ZXMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICBjb25zdCBoZWFkZXIgPSByZXEuaGVhZGVycy5nZXQoJ3gtaW52aXRlLWNvZGUnKSB8fCAnJ1xuICBjb25zdCBjb29raWUgPSBjb29raWVWYWx1ZShyZXEsICdpbnZpdGUnKSB8fCAnJ1xuICBjb25zdCBjb2RlID0gaGVhZGVyIHx8IGNvb2tpZVxuICBpZiAoIWNvZGUpIHJldHVybiBmYWxzZVxuICByZXR1cm4gY2ZnLmludml0ZXMuaW5jbHVkZXMoY29kZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZm9yY2VHdWFyZHMocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBjZmcgPSBnZXRDb25maWcoKVxuICBpZiAoIWhhc0ludml0ZShyZXEpKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCByZXM6IE5leHRSZXNwb25zZS5qc29uKHsgY29kZTogJ2ludml0ZV9yZXF1aXJlZCcsIG1lc3NhZ2U6ICdJbnZpdGUgY29kZSByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMyB9KSB9XG4gIH1cbiAgY29uc3QgaXAgPSBjbGllbnRJUChyZXEpXG4gIGNvbnN0IHNpZCA9IHNlc3Npb25JRChyZXEpXG4gIGNvbnN0IGlwQXJyID0gcHVzaEhpdChpcEhpdHMsIGlwKVxuICBjb25zdCBzaWRBcnIgPSBwdXNoSGl0KHNpZEhpdHMsIHNpZClcbiAgc2xpZGUoaXBBcnIsIDYwXzAwMCk7IHNsaWRlKHNpZEFyciwgNjBfMDAwKVxuICAvLyBwcnVuZSBlbXB0eSBhbmQgY2FwIG1hcCBzaXplcyB0byBhdm9pZCB1bmJvdW5kZWQgZ3Jvd3RoXG4gIHBydW5lTWFwcygpXG4gIGlmIChpcEFyci5sZW5ndGggPiBjZmcucmF0ZS5pcFBlck1pbikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgcmVzOiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICdyYXRlX2xpbWl0ZWQnLCBtZXNzYWdlOiAnVG9vIG1hbnkgcmVxdWVzdHMnIH0sIHsgc3RhdHVzOiA0MjkgfSkgfVxuICB9XG4gIGlmIChzaWRBcnIubGVuZ3RoID4gY2ZnLnJhdGUuc2Vzc2lvblBlck1pbikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgcmVzOiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICdyYXRlX2xpbWl0ZWQnLCBtZXNzYWdlOiAnVG9vIG1hbnkgcmVxdWVzdHMnIH0sIHsgc3RhdHVzOiA0MjkgfSkgfVxuICB9XG4gIHJldHVybiB7IG9rOiB0cnVlIH1cbn1cblxuZnVuY3Rpb24gcHJ1bmVNYXBzKHdpbmRvd01zOm51bWJlciA9IDYwXzAwMCwgbWF4S2V5cyA9IDUwMDApIHtcbiAgY29uc3Qgbm93TXMgPSBub3coKVxuICBmb3IgKGNvbnN0IFtrLCBhcnJdIG9mIGlwSGl0cykge1xuICAgIHdoaWxlIChhcnIubGVuZ3RoICYmIChub3dNcyAtIGFyclswXSkgPiB3aW5kb3dNcykgYXJyLnNoaWZ0KClcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgaXBIaXRzLmRlbGV0ZShrKVxuICB9XG4gIGZvciAoY29uc3QgW2ssIGFycl0gb2Ygc2lkSGl0cykge1xuICAgIHdoaWxlIChhcnIubGVuZ3RoICYmIChub3dNcyAtIGFyclswXSkgPiB3aW5kb3dNcykgYXJyLnNoaWZ0KClcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgc2lkSGl0cy5kZWxldGUoaylcbiAgfVxuICBpZiAoaXBIaXRzLnNpemUgPiBtYXhLZXlzKSB7XG4gICAgZm9yIChjb25zdCBrIG9mIGlwSGl0cy5rZXlzKCkpIHsgaXBIaXRzLmRlbGV0ZShrKTsgaWYgKGlwSGl0cy5zaXplIDw9IG1heEtleXMpIGJyZWFrIH1cbiAgfVxuICBpZiAoc2lkSGl0cy5zaXplID4gbWF4S2V5cykge1xuICAgIGZvciAoY29uc3QgayBvZiBzaWRIaXRzLmtleXMoKSkgeyBzaWRIaXRzLmRlbGV0ZShrKTsgaWYgKHNpZEhpdHMuc2l6ZSA8PSBtYXhLZXlzKSBicmVhayB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDb25maWciLCJpcEhpdHMiLCJNYXAiLCJzaWRIaXRzIiwibm93IiwiRGF0ZSIsInNsaWRlIiwiYXJyIiwid2luZG93TXMiLCJ0IiwibGVuZ3RoIiwic2hpZnQiLCJwdXNoSGl0IiwibWFwIiwia2V5IiwiZ2V0IiwicHVzaCIsInNldCIsImNvb2tpZVZhbHVlIiwicmVxIiwibmFtZSIsImNvb2tpZSIsImhlYWRlcnMiLCJtYXRjaCIsIlJlZ0V4cCIsImRlY29kZVVSSUNvbXBvbmVudCIsImNsaWVudElQIiwiZndkIiwiaXAiLCJzcGxpdCIsInRyaW0iLCJzZXNzaW9uSUQiLCJoYXNJbnZpdGUiLCJjZmciLCJpbnZpdGVzIiwiaGVhZGVyIiwiY29kZSIsImluY2x1ZGVzIiwiZW5mb3JjZUd1YXJkcyIsIm9rIiwicmVzIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzaWQiLCJpcEFyciIsInNpZEFyciIsInBydW5lTWFwcyIsInJhdGUiLCJpcFBlck1pbiIsInNlc3Npb25QZXJNaW4iLCJtYXhLZXlzIiwibm93TXMiLCJrIiwiZGVsZXRlIiwic2l6ZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/guards.ts\n");

/***/ }),

/***/ "(rsc)/./lib/jd.ts":
/*!*******************!*\
  !*** ./lib/jd.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractJDFromUrl: () => (/* binding */ extractJDFromUrl),\n/* harmony export */   extractKeywords: () => (/* binding */ extractKeywords),\n/* harmony export */   extractKeywords2: () => (/* binding */ extractKeywords2)\n/* harmony export */ });\nasync function extractJDFromUrl(url) {\n    const u = new URL(url);\n    if (!/^https?:$/.test(u.protocol)) throw new Error(\"Invalid protocol\");\n    const ctrl = new AbortController();\n    const to = setTimeout(()=>ctrl.abort(), 15000);\n    try {\n        const res = await fetch(url, {\n            signal: ctrl.signal,\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 AI-Resume-Tailor\"\n            }\n        });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const html = await res.text();\n        const text = html.replace(/<script[\\s\\S]*?<\\/script>/g, \" \").replace(/<style[\\s\\S]*?<\\/style>/g, \" \").replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \");\n        return text.slice(0, 5000);\n    } finally{\n        clearTimeout(to);\n    }\n}\nfunction extractKeywords(jdText, topN = 20) {\n    return extractKeywords2(jdText, topN).all;\n}\nfunction extractKeywords2(jdText, topN = 20) {\n    const lower = (jdText || \"\").toLowerCase();\n    const tokens = lower.match(/[a-zA-Z0-9\\+#\\.\\-]{2,}/g) || [];\n    const stop = new Set([\n        \"and\",\n        \"the\",\n        \"for\",\n        \"with\",\n        \"you\",\n        \"our\",\n        \"will\",\n        \"are\",\n        \"is\",\n        \"to\",\n        \"in\",\n        \"of\",\n        \"a\",\n        \"an\",\n        \"on\",\n        \"as\",\n        \"be\",\n        \"by\",\n        \"or\",\n        \"we\",\n        \"your\",\n        \"this\",\n        \"that\",\n        \"at\",\n        \"from\",\n        \"preferred\",\n        \"requirements\",\n        \"responsibilities\",\n        \"experience\"\n    ]);\n    const counts = {};\n    for (const t of tokens){\n        if (stop.has(t)) continue;\n        if (t.length <= 2) continue;\n        counts[t] = (counts[t] || 0) + 1;\n    }\n    let ranked = Object.entries(counts).sort((a, b)=>b[1] - a[1]).map(([k])=>k);\n    const critical = [\n        \"sql\",\n        \"python\",\n        \"excel\",\n        \"tableau\",\n        \"crm\",\n        \"react\",\n        \"node\",\n        \"aws\",\n        \"azure\",\n        \"gcp\",\n        \"adwords\",\n        \"google\",\n        \"facebook\",\n        \"paid\",\n        \"seo\",\n        \"sem\",\n        \"kpi\",\n        \"etl\",\n        \"ml\",\n        \"terraform\",\n        \"salesforce\",\n        \"hubspot\",\n        \"redux\",\n        \"typescript\",\n        \"next\",\n        \"fastapi\",\n        \"django\",\n        \"flask\",\n        \"java\",\n        \"go\",\n        \"kotlin\",\n        \"swift\",\n        \"figma\"\n    ];\n    for (const c of critical)if (lower.includes(c) && !ranked.includes(c)) ranked.unshift(c);\n    ranked = Array.from(new Set(ranked)).slice(0, topN);\n    const must = ranked.filter((k)=>critical.includes(k));\n    const nice = ranked.filter((k)=>!critical.includes(k));\n    return {\n        all: ranked,\n        must,\n        nice\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T2UsTUFBTSxDQUFDUixDQUFBQSxJQUFLLENBQUNDLFNBQVNFLFFBQVEsQ0FBQ0g7SUFDbkQsT0FBTztRQUFFbEIsS0FBS1c7UUFBUWM7UUFBTUU7SUFBSztBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvamQudHM/MDliZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEpERnJvbVVybCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHUgPSBuZXcgVVJMKHVybClcbiAgaWYgKCEvXmh0dHBzPzokLy50ZXN0KHUucHJvdG9jb2wpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJvdG9jb2wnKVxuXG4gIGNvbnN0IGN0cmwgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgY29uc3QgdG8gPSBzZXRUaW1lb3V0KCgpID0+IGN0cmwuYWJvcnQoKSwgMTUwMDApXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IHNpZ25hbDogY3RybC5zaWduYWwsIGhlYWRlcnM6IHsgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgQUktUmVzdW1lLVRhaWxvcicgfSB9KVxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfWApXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KClcbiAgICBjb25zdCB0ZXh0ID0gaHRtbFxuICAgICAgLnJlcGxhY2UoLzxzY3JpcHRbXFxzXFxTXSo/PFxcL3NjcmlwdD4vZywnICcpXG4gICAgICAucmVwbGFjZSgvPHN0eWxlW1xcc1xcU10qPzxcXC9zdHlsZT4vZywnICcpXG4gICAgICAucmVwbGFjZSgvPFtePl0rPi9nLCcgJylcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csJyAnKVxuICAgIHJldHVybiB0ZXh0LnNsaWNlKDAsIDUwMDApXG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHRvKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0S2V5d29yZHMoamRUZXh0OiBzdHJpbmcsIHRvcE49MjApOiBzdHJpbmdbXSB7XG4gIHJldHVybiBleHRyYWN0S2V5d29yZHMyKGpkVGV4dCwgdG9wTikuYWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0S2V5d29yZHMyKGpkVGV4dDogc3RyaW5nLCB0b3BOPTIwKTogeyBhbGw6IHN0cmluZ1tdLCBtdXN0OiBzdHJpbmdbXSwgbmljZTogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGxvd2VyID0gKGpkVGV4dHx8JycpLnRvTG93ZXJDYXNlKClcbiAgY29uc3QgdG9rZW5zID0gbG93ZXIubWF0Y2goL1thLXpBLVowLTlcXCsjXFwuXFwtXXsyLH0vZykgfHwgW11cbiAgY29uc3Qgc3RvcCA9IG5ldyBTZXQoWydhbmQnLCd0aGUnLCdmb3InLCd3aXRoJywneW91Jywnb3VyJywnd2lsbCcsJ2FyZScsJ2lzJywndG8nLCdpbicsJ29mJywnYScsJ2FuJywnb24nLCdhcycsJ2JlJywnYnknLCdvcicsJ3dlJywneW91cicsJ3RoaXMnLCd0aGF0JywnYXQnLCdmcm9tJywncHJlZmVycmVkJywncmVxdWlyZW1lbnRzJywncmVzcG9uc2liaWxpdGllcycsJ2V4cGVyaWVuY2UnXSlcbiAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cbiAgZm9yIChjb25zdCB0IG9mIHRva2Vucykge1xuICAgIGlmIChzdG9wLmhhcyh0KSkgY29udGludWVcbiAgICBpZiAodC5sZW5ndGggPD0gMikgY29udGludWVcbiAgICBjb3VudHNbdF0gPSAoY291bnRzW3RdIHx8IDApICsgMVxuICB9XG4gIGxldCByYW5rZWQgPSBPYmplY3QuZW50cmllcyhjb3VudHMpLnNvcnQoKGEsYik9PmJbMV0tYVsxXSkubWFwKChba10pPT5rKVxuICBjb25zdCBjcml0aWNhbCA9IFsnc3FsJywncHl0aG9uJywnZXhjZWwnLCd0YWJsZWF1JywnY3JtJywncmVhY3QnLCdub2RlJywnYXdzJywnYXp1cmUnLCdnY3AnLCdhZHdvcmRzJywnZ29vZ2xlJywnZmFjZWJvb2snLCdwYWlkJywnc2VvJywnc2VtJywna3BpJywnZXRsJywnbWwnLCd0ZXJyYWZvcm0nLCdzYWxlc2ZvcmNlJywnaHVic3BvdCcsJ3JlZHV4JywndHlwZXNjcmlwdCcsJ25leHQnLCdmYXN0YXBpJywnZGphbmdvJywnZmxhc2snLCdqYXZhJywnZ28nLCdrb3RsaW4nLCdzd2lmdCcsJ2ZpZ21hJ11cbiAgZm9yIChjb25zdCBjIG9mIGNyaXRpY2FsKSBpZiAobG93ZXIuaW5jbHVkZXMoYykgJiYgIXJhbmtlZC5pbmNsdWRlcyhjKSkgcmFua2VkLnVuc2hpZnQoYylcbiAgcmFua2VkID0gQXJyYXkuZnJvbShuZXcgU2V0KHJhbmtlZCkpLnNsaWNlKDAsIHRvcE4pXG4gIGNvbnN0IG11c3QgPSByYW5rZWQuZmlsdGVyKGsgPT4gY3JpdGljYWwuaW5jbHVkZXMoaykpXG4gIGNvbnN0IG5pY2UgPSByYW5rZWQuZmlsdGVyKGsgPT4gIWNyaXRpY2FsLmluY2x1ZGVzKGspKVxuICByZXR1cm4geyBhbGw6IHJhbmtlZCwgbXVzdCwgbmljZSB9XG59XG4iXSwibmFtZXMiOlsiZXh0cmFjdEpERnJvbVVybCIsInVybCIsInUiLCJVUkwiLCJ0ZXN0IiwicHJvdG9jb2wiLCJFcnJvciIsImN0cmwiLCJBYm9ydENvbnRyb2xsZXIiLCJ0byIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlcyIsImZldGNoIiwic2lnbmFsIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwiaHRtbCIsInRleHQiLCJyZXBsYWNlIiwic2xpY2UiLCJjbGVhclRpbWVvdXQiLCJleHRyYWN0S2V5d29yZHMiLCJqZFRleHQiLCJ0b3BOIiwiZXh0cmFjdEtleXdvcmRzMiIsImFsbCIsImxvd2VyIiwidG9Mb3dlckNhc2UiLCJ0b2tlbnMiLCJtYXRjaCIsInN0b3AiLCJTZXQiLCJjb3VudHMiLCJ0IiwiaGFzIiwibGVuZ3RoIiwicmFua2VkIiwiT2JqZWN0IiwiZW50cmllcyIsInNvcnQiLCJhIiwiYiIsIm1hcCIsImsiLCJjcml0aWNhbCIsImMiLCJpbmNsdWRlcyIsInVuc2hpZnQiLCJBcnJheSIsImZyb20iLCJtdXN0IiwiZmlsdGVyIiwibmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/jd.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openai.ts":
/*!***********************!*\
  !*** ./lib/openai.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPENAI_MODEL: () => (/* binding */ OPENAI_MODEL),\n/* harmony export */   getOpenAI: () => (/* binding */ getOpenAI)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n\n\nlet client = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY,\n    project: process.env.OPENAI_PROJECT_ID,\n    organization: process.env.OPENAI_ORG_ID // optional\n});\nfunction getOpenAI() {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\n    if (cfg.openaiKey) {\n        client = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            apiKey: cfg.openaiKey,\n            project: process.env.OPENAI_PROJECT_ID,\n            organization: process.env.OPENAI_ORG_ID\n        });\n    }\n    return client;\n}\nconst OPENAI_MODEL = process.env.OPENAI_MODEL || \"gpt-4o-mini\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvb3BlbmFpLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkI7QUFDUztBQUVwQyxJQUFJRSxTQUFTLElBQUlGLDhDQUFNQSxDQUFDO0lBQ3RCRyxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7SUFDbENDLFNBQVNILFFBQVFDLEdBQUcsQ0FBQ0csaUJBQWlCO0lBQ3RDQyxjQUFjTCxRQUFRQyxHQUFHLENBQUNLLGFBQWEsQ0FBRyxXQUFXO0FBQ3ZEO0FBRU8sU0FBU0M7SUFDZCxNQUFNQyxNQUFNWCxrREFBU0E7SUFDckIsSUFBSVcsSUFBSUMsU0FBUyxFQUFFO1FBQ2pCWCxTQUFTLElBQUlGLDhDQUFNQSxDQUFDO1lBQ2xCRyxRQUFRUyxJQUFJQyxTQUFTO1lBQ3JCTixTQUFTSCxRQUFRQyxHQUFHLENBQUNHLGlCQUFpQjtZQUN0Q0MsY0FBY0wsUUFBUUMsR0FBRyxDQUFDSyxhQUFhO1FBQ3pDO0lBQ0Y7SUFDQSxPQUFPUjtBQUNUO0FBRU8sTUFBTVksZUFBZVYsUUFBUUMsR0FBRyxDQUFDUyxZQUFZLElBQUksY0FBYSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvb3BlbmFpLnRzPzAwZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZydcblxubGV0IGNsaWVudCA9IG5ldyBPcGVuQUkoe1xuICBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZLFxuICBwcm9qZWN0OiBwcm9jZXNzLmVudi5PUEVOQUlfUFJPSkVDVF9JRCwgICAvLyBuZWVkZWQgZm9yIHNrLXByb2otIGtleXNcbiAgb3JnYW5pemF0aW9uOiBwcm9jZXNzLmVudi5PUEVOQUlfT1JHX0lEICAgLy8gb3B0aW9uYWxcbn0pXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVuQUkoKSB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpXG4gIGlmIChjZmcub3BlbmFpS2V5KSB7XG4gICAgY2xpZW50ID0gbmV3IE9wZW5BSSh7XG4gICAgICBhcGlLZXk6IGNmZy5vcGVuYWlLZXksXG4gICAgICBwcm9qZWN0OiBwcm9jZXNzLmVudi5PUEVOQUlfUFJPSkVDVF9JRCxcbiAgICAgIG9yZ2FuaXphdGlvbjogcHJvY2Vzcy5lbnYuT1BFTkFJX09SR19JRFxuICAgIH0pXG4gIH1cbiAgcmV0dXJuIGNsaWVudFxufVxuXG5leHBvcnQgY29uc3QgT1BFTkFJX01PREVMID0gcHJvY2Vzcy5lbnYuT1BFTkFJX01PREVMIHx8ICdncHQtNG8tbWluaSdcbiJdLCJuYW1lcyI6WyJPcGVuQUkiLCJnZXRDb25maWciLCJjbGllbnQiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJwcm9qZWN0IiwiT1BFTkFJX1BST0pFQ1RfSUQiLCJvcmdhbml6YXRpb24iLCJPUEVOQUlfT1JHX0lEIiwiZ2V0T3BlbkFJIiwiY2ZnIiwib3BlbmFpS2V5IiwiT1BFTkFJX01PREVMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/openai.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parsers.ts":
/*!************************!*\
  !*** ./lib/parsers.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractTextFromFile: () => (/* binding */ extractTextFromFile),\n/* harmony export */   heuristicParseResume: () => (/* binding */ heuristicParseResume)\n/* harmony export */ });\n/* harmony import */ var mammoth__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mammoth */ \"(rsc)/./node_modules/mammoth/lib/index.js\");\n\nasync function extractTextFromFile(file) {\n    const buffer = Buffer.from(await file.arrayBuffer());\n    const ext = (file instanceof File ? file.name.split(\".\").pop()?.toLowerCase() : \"txt\") || \"txt\";\n    if (ext === \"pdf\") {\n        try {\n            const pdfjs = await __webpack_require__.e(/*! import() */ \"vendor-chunks/pdfjs-dist\").then(__webpack_require__.bind(__webpack_require__, /*! pdfjs-dist */ \"(rsc)/./node_modules/pdfjs-dist/build/pdf.mjs\"));\n            const doc = await pdfjs.getDocument({\n                data: buffer\n            }).promise;\n            let text = \"\";\n            for(let i = 1; i <= doc.numPages; i++){\n                const page = await doc.getPage(i);\n                const content = await page.getTextContent();\n                text += content.items.map((item)=>item.str).join(\" \") + \"\\n\";\n            }\n            return {\n                text,\n                ext\n            };\n        } catch (error) {\n            console.error(\"PDF parsing failed:\", error);\n            return {\n                text: buffer.toString(\"utf8\"),\n                ext: \"txt\"\n            };\n        }\n    } else if (ext === \"docx\") {\n        const data = await mammoth__WEBPACK_IMPORTED_MODULE_0__.extractRawText({\n            buffer\n        });\n        return {\n            text: data.value,\n            ext\n        };\n    } else {\n        return {\n            text: buffer.toString(\"utf8\"),\n            ext: \"txt\"\n        };\n    }\n}\nfunction heuristicParseResume(raw) {\n    const text = (raw || \"\").replace(\"\\r\", \"\").split(\"\\n\").map((l)=>l.trim()).filter(Boolean).join(\"\\n\");\n    // Try primary parsing with enhanced heading detection\n    let sections = splitByHeadings(text);\n    // If primary parsing fails, try fallback segmentation\n    if (Object.keys(sections).length === 0 || !hasMeaningfulContent(sections)) {\n        console.log(\"Primary parsing failed, attempting fallback segmentation\");\n        sections = fallbackSegmentation(text);\n    }\n    const experience = parseExperience(sections[\"experience\"] || sections[\"work\"] || sections[\"work experience\"] || sections[\"professional experience\"] || \"\");\n    const skills = parseSkills(sections[\"skills\"] || sections[\"core competencies\"] || sections[\"technical skills\"] || sections[\"key skills\"] || sections[\"tech stack\"] || sections[\"competencies\"] || \"\");\n    const summary = (sections[\"summary\"] || sections[\"profile\"] || sections[\"objective\"] || sections[\"about\"] || \"\").split(\"\\n\").slice(0, 3).join(\" \");\n    const education = (sections[\"education\"] || sections[\"academic background\"] || \"\").split(\"\\n\").filter(Boolean);\n    const certifications = (sections[\"certifications\"] || sections[\"certificates\"] || sections[\"certs\"] || \"\").split(\"\\n\").filter(Boolean);\n    return {\n        summary,\n        skills,\n        experience,\n        education,\n        certifications\n    };\n}\nfunction splitByHeadings(text) {\n    const sections = {};\n    const lines = text.split(\"\\n\");\n    let currentSection = \"\";\n    let currentContent = [];\n    for (const line of lines){\n        const trimmed = line.trim();\n        if (isHeading(trimmed)) {\n            if (currentSection) {\n                sections[currentSection.toLowerCase()] = currentContent.join(\"\\n\");\n            }\n            currentSection = trimmed;\n            currentContent = [];\n        } else {\n            currentContent.push(line);\n        }\n    }\n    if (currentSection) {\n        sections[currentSection.toLowerCase()] = currentContent.join(\"\\n\");\n    }\n    return sections;\n}\nfunction isHeading(line) {\n    // Normalize the line: trim punctuation/colons, lowercase, collapse whitespace\n    const normalized = normalizeHeading(line);\n    // Expanded synonyms and patterns\n    const headingPatterns = [\n        // Experience patterns\n        /^(experience|work experience|professional experience|employment|work history|career history|professional background)$/,\n        /^(work|employment|career|professional)$/,\n        // Skills patterns\n        /^(skills|technical skills|core competencies|key skills|competencies|tech stack|technologies|technical expertise)$/,\n        /^(core skills|key competencies|technical competencies|professional skills)$/,\n        /^(programming languages|software skills|tools|software)$/,\n        // Summary patterns\n        /^(summary|profile|objective|about|personal statement|professional summary)$/,\n        /^(overview|introduction|bio|biography)$/,\n        // Education patterns\n        /^(education|academic background|academic qualifications|academic credentials)$/,\n        /^(academic|qualifications|credentials|degrees)$/,\n        // Certifications patterns\n        /^(certifications|certificates|certs|professional certifications)$/,\n        /^(licenses|licences|credentials|professional credentials)$/,\n        // Projects patterns\n        /^(projects|project experience|project portfolio|key projects)$/,\n        /^(portfolio|project work|project history)$/,\n        // Achievements patterns\n        /^(achievements|accomplishments|awards|honors|honours)$/,\n        /^(recognition|awards and recognition|professional achievements)$/,\n        // Additional patterns\n        /^(publications|research|volunteer|volunteer work|community service)$/,\n        /^(languages|language skills|interests|hobbies|additional information)$/\n    ];\n    return headingPatterns.some((pattern)=>pattern.test(normalized));\n}\nfunction normalizeHeading(line) {\n    return line.replace(/[:\\-\\*\\.\\s]+$/, \"\") // Remove trailing punctuation and whitespace\n    .replace(/^[:\\-\\*\\.\\s]+/, \"\") // Remove leading punctuation and whitespace\n    .toLowerCase().replace(/\\s+/g, \" \") // Collapse multiple whitespace to single space\n    .trim();\n}\nfunction hasMeaningfulContent(sections) {\n    const meaningfulSections = [\n        \"experience\",\n        \"skills\",\n        \"summary\",\n        \"education\"\n    ];\n    return meaningfulSections.some((section)=>sections[section] && sections[section].trim().length > 20);\n}\nfunction fallbackSegmentation(text) {\n    console.log(\"Attempting fallback segmentation\");\n    const lines = text.split(\"\\n\").map((l)=>l.trim()).filter(Boolean);\n    const sections = {};\n    // Pattern-based section detection\n    const patterns = {\n        experience: {\n            indicators: [\n                \"experience\",\n                \"work\",\n                \"employment\",\n                \"career\",\n                \"professional\"\n            ],\n            datePattern: /\\b(19|20)\\d{2}\\b/,\n            bulletPattern: /^[\\-\\*]\\s+/,\n            companyPattern: /^[A-Z][^\\-\\*]*[A-Z]/\n        },\n        skills: {\n            indicators: [\n                \"skills\",\n                \"competencies\",\n                \"technologies\",\n                \"tools\",\n                \"software\"\n            ],\n            listPattern: /^[A-Za-z][^\\-\\*]*[,;]/,\n            shortLinePattern: /^[A-Za-z\\s]{2,30}$/ // Short lines (likely skills)\n        },\n        summary: {\n            indicators: [\n                \"summary\",\n                \"profile\",\n                \"objective\",\n                \"about\"\n            ],\n            longTextPattern: /^[A-Za-z][^\\-\\*]{50,}/,\n            firstSection: true // Often the first meaningful section\n        }\n    };\n    let currentSection = \"\";\n    let currentContent = [];\n    let sectionScores = {};\n    for(let i = 0; i < lines.length; i++){\n        const line = lines[i];\n        const normalizedLine = normalizeHeading(line);\n        // Score each line against section patterns\n        for (const [sectionName, pattern] of Object.entries(patterns)){\n            let score = 0;\n            // Check for indicator words\n            if (pattern.indicators.some((indicator)=>normalizedLine.includes(indicator))) {\n                score += 3;\n            }\n            // Check for section-specific patterns\n            if (sectionName === \"experience\") {\n                if (pattern.datePattern.test(line)) score += 2;\n                if (pattern.bulletPattern.test(line)) score += 1;\n                if (pattern.companyPattern.test(line)) score += 2;\n            } else if (sectionName === \"skills\") {\n                if (pattern.listPattern.test(line)) score += 2;\n                if (pattern.shortLinePattern.test(line)) score += 1;\n            } else if (sectionName === \"summary\") {\n                if (pattern.longTextPattern.test(line)) score += 2;\n                if (pattern.firstSection && i < 5) score += 1;\n            }\n            sectionScores[sectionName] = (sectionScores[sectionName] || 0) + score;\n        }\n        // If this line scores highly for a section, start that section\n        const bestSection = Object.entries(sectionScores).reduce((a, b)=>sectionScores[a[0]] > sectionScores[b[0]] ? a : b);\n        if (bestSection[1] > 2 && bestSection[0] !== currentSection) {\n            if (currentSection) {\n                sections[currentSection] = currentContent.join(\"\\n\");\n            }\n            currentSection = bestSection[0];\n            currentContent = [\n                line\n            ];\n            sectionScores = {} // Reset scores\n            ;\n        } else {\n            currentContent.push(line);\n        }\n    }\n    if (currentSection) {\n        sections[currentSection] = currentContent.join(\"\\n\");\n    }\n    // If still no sections found, try content-based segmentation\n    if (Object.keys(sections).length === 0) {\n        return contentBasedSegmentation(text);\n    }\n    return sections;\n}\nfunction contentBasedSegmentation(text) {\n    console.log(\"Attempting content-based segmentation\");\n    const lines = text.split(\"\\n\").map((l)=>l.trim()).filter(Boolean);\n    const sections = {};\n    let currentSection = \"summary\";\n    let currentContent = [];\n    for (const line of lines){\n        // Detect section boundaries by content patterns\n        if (isLikelyExperience(line)) {\n            if (currentContent.length > 0) {\n                sections[currentSection] = currentContent.join(\"\\n\");\n            }\n            currentSection = \"experience\";\n            currentContent = [\n                line\n            ];\n        } else if (isLikelySkills(line)) {\n            if (currentContent.length > 0) {\n                sections[currentSection] = currentContent.join(\"\\n\");\n            }\n            currentSection = \"skills\";\n            currentContent = [\n                line\n            ];\n        } else {\n            currentContent.push(line);\n        }\n    }\n    if (currentContent.length > 0) {\n        sections[currentSection] = currentContent.join(\"\\n\");\n    }\n    return sections;\n}\nfunction isLikelyExperience(line) {\n    // Look for experience indicators\n    const experiencePatterns = [\n        /\\b(19|20)\\d{2}\\b/,\n        /\\b(at|@|\\-|\\|)\\b/,\n        /\\b(engineer|manager|developer|analyst|consultant|director|lead|senior|junior)\\b/i,\n        /\\b(company|corp|inc|llc|ltd)\\b/i\n    ];\n    return experiencePatterns.some((pattern)=>pattern.test(line));\n}\nfunction isLikelySkills(line) {\n    // Look for skills indicators\n    const skillsPatterns = [\n        /^[A-Za-z][^\\-\\*]*[,;]/,\n        /^[A-Za-z\\s]{2,30}$/,\n        /\\b(java|python|javascript|react|angular|vue|node|sql|aws|azure|docker|kubernetes)\\b/i\n    ];\n    return skillsPatterns.some((pattern)=>pattern.test(line));\n}\nfunction parseExperience(section) {\n    const roles = [];\n    const lines = section.split(\"\\n\").filter(Boolean);\n    let currentRole = null;\n    for (const line of lines){\n        const trimmed = line.trim();\n        if (isRoleLine(trimmed)) {\n            if (currentRole) roles.push(currentRole);\n            currentRole = parseRoleLine(trimmed);\n        } else if (currentRole && isBulletPoint(trimmed)) {\n            currentRole.bullets.push(trimmed);\n        }\n    }\n    if (currentRole) roles.push(currentRole);\n    return roles;\n}\nfunction isRoleLine(line) {\n    // Enhanced role line detection\n    const rolePatterns = [\n        /^[^\\-\\*].*(at|@|\\-|\\|).*[0-9]{4}/i,\n        /^[A-Z][^\\-\\*]*[A-Z].*[0-9]{4}/,\n        /^[^\\-\\*].*\\b(19|20)\\d{2}\\b/,\n        /^[A-Z][^\\-\\*]*\\b(engineer|manager|developer|analyst|consultant|director|lead|senior|junior)\\b/i\n    ];\n    return rolePatterns.some((pattern)=>pattern.test(line));\n}\nfunction parseRoleLine(line) {\n    // Enhanced role parsing\n    const separators = /at|@|\\-|\\||\\b(19|20)\\d{2}\\b/;\n    const parts = line.split(separators).map((p)=>p.trim()).filter(Boolean);\n    if (parts.length >= 2) {\n        return {\n            role: parts[0],\n            company: parts[1] || \"Unknown\",\n            bullets: []\n        };\n    }\n    // Fallback: try to extract role and company from the line\n    const roleMatch = line.match(/\\b(engineer|manager|developer|analyst|consultant|director|lead|senior|junior)\\b/i);\n    const companyMatch = line.match(/\\b[A-Z][^\\-\\*]*[A-Z]\\b/);\n    return {\n        role: roleMatch ? roleMatch[0] : line,\n        company: companyMatch ? companyMatch[0] : \"Unknown\",\n        bullets: []\n    };\n}\nfunction isBulletPoint(line) {\n    return /^[\\-\\*]/.test(line) || /^[0-9]+\\./.test(line);\n}\nfunction parseSkills(section) {\n    if (!section.trim()) return [];\n    // Enhanced skills parsing with multiple delimiters and formats\n    const skills = section.split(/[,;\\n|]/) // Multiple delimiters\n    .map((s)=>s.trim()).filter(Boolean).filter((skill)=>skill.length > 2 && skill.length < 50) // Filter out too short/long items\n    .slice(0, 60);\n    return skills;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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O1FBQ0xILE1BQU1FLFlBQVlBLFNBQVMsQ0FBQyxFQUFFLEdBQUdqRDtRQUNqQ2dELFNBQVNHLGVBQWVBLFlBQVksQ0FBQyxFQUFFLEdBQUc7UUFDMUNULFNBQVMsRUFBRTtJQUNiO0FBQ0Y7QUFFQSxTQUFTRCxjQUFjekMsSUFBWTtJQUNqQyxPQUFPLFdBQVdTLElBQUksQ0FBQ1QsU0FBUyxZQUFZUyxJQUFJLENBQUNUO0FBQ25EO0FBRUEsU0FBU1IsWUFBWW1CLE9BQWU7SUFDbEMsSUFBSSxDQUFDQSxRQUFRakMsSUFBSSxJQUFJLE9BQU8sRUFBRTtJQUU5QiwrREFBK0Q7SUFDL0QsTUFBTWEsU0FBU29CLFFBQ1o5RCxLQUFLLENBQUMsWUFBWSxzQkFBc0I7S0FDeENnQixHQUFHLENBQUN1RixDQUFBQSxJQUFLQSxFQUFFMUUsSUFBSSxJQUNmQyxNQUFNLENBQUNDLFNBQ1BELE1BQU0sQ0FBQzBFLENBQUFBLFFBQVNBLE1BQU1wRSxNQUFNLEdBQUcsS0FBS29FLE1BQU1wRSxNQUFNLEdBQUcsSUFBSSxrQ0FBa0M7S0FDekZTLEtBQUssQ0FBQyxHQUFHO0lBRVosT0FBT0g7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvcGFyc2Vycy50cz9jYTZhIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYW1tb3RoIGZyb20gJ21hbW1vdGgnXG5pbXBvcnQgeyBSZXN1bWVKU09OIH0gZnJvbSAnLi90eXBlcydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGV4dHJhY3RUZXh0RnJvbUZpbGUoZmlsZTogRmlsZSB8IEJsb2IpOiBQcm9taXNlPHt0ZXh0OnN0cmluZywgZXh0OnN0cmluZ30+IHtcbiAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20oYXdhaXQgZmlsZS5hcnJheUJ1ZmZlcigpKVxuICBjb25zdCBleHQgPSAoZmlsZSBpbnN0YW5jZW9mIEZpbGUgPyBmaWxlLm5hbWUuc3BsaXQoJy4nKS5wb3AoKT8udG9Mb3dlckNhc2UoKSA6ICd0eHQnKSB8fCAndHh0J1xuICBcbiAgaWYgKGV4dCA9PT0gJ3BkZicpIHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGRmanMgPSBhd2FpdCBpbXBvcnQoJ3BkZmpzLWRpc3QnKVxuICAgICAgY29uc3QgZG9jID0gYXdhaXQgcGRmanMuZ2V0RG9jdW1lbnQoeyBkYXRhOiBidWZmZXIgfSkucHJvbWlzZVxuICAgICAgbGV0IHRleHQgPSAnJ1xuICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPD0gZG9jLm51bVBhZ2VzOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFnZSA9IGF3YWl0IGRvYy5nZXRQYWdlKGkpXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBwYWdlLmdldFRleHRDb250ZW50KClcbiAgICAgICAgdGV4dCArPSBjb250ZW50Lml0ZW1zLm1hcCgoaXRlbTogYW55KSA9PiBpdGVtLnN0cikuam9pbignICcpICsgJ1xcbidcbiAgICAgIH1cbiAgICAgIHJldHVybiB7IHRleHQsIGV4dCB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1BERiBwYXJzaW5nIGZhaWxlZDonLCBlcnJvcilcbiAgICAgIHJldHVybiB7IHRleHQ6IGJ1ZmZlci50b1N0cmluZygndXRmOCcpLCBleHQ6ICd0eHQnIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoZXh0ID09PSAnZG9jeCcpIHtcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgbWFtbW90aC5leHRyYWN0UmF3VGV4dCh7IGJ1ZmZlciB9KVxuICAgIHJldHVybiB7IHRleHQ6IGRhdGEudmFsdWUsIGV4dCB9XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIHsgdGV4dDogYnVmZmVyLnRvU3RyaW5nKCd1dGY4JyksIGV4dDogJ3R4dCcgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBoZXVyaXN0aWNQYXJzZVJlc3VtZShyYXc6IHN0cmluZyk6IFJlc3VtZUpTT04ge1xuICBjb25zdCB0ZXh0ID0gKHJhd3x8JycpLnJlcGxhY2UoJ1xccicsJycpLnNwbGl0KCdcXG4nKS5tYXAobD0+bC50cmltKCkpLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKVxuXG4gIC8vIFRyeSBwcmltYXJ5IHBhcnNpbmcgd2l0aCBlbmhhbmNlZCBoZWFkaW5nIGRldGVjdGlvblxuICBsZXQgc2VjdGlvbnMgPSBzcGxpdEJ5SGVhZGluZ3ModGV4dClcbiAgXG4gIC8vIElmIHByaW1hcnkgcGFyc2luZyBmYWlscywgdHJ5IGZhbGxiYWNrIHNlZ21lbnRhdGlvblxuICBpZiAoT2JqZWN0LmtleXMoc2VjdGlvbnMpLmxlbmd0aCA9PT0gMCB8fCAhaGFzTWVhbmluZ2Z1bENvbnRlbnQoc2VjdGlvbnMpKSB7XG4gICAgY29uc29sZS5sb2coJ1ByaW1hcnkgcGFyc2luZyBmYWlsZWQsIGF0dGVtcHRpbmcgZmFsbGJhY2sgc2VnbWVudGF0aW9uJylcbiAgICBzZWN0aW9ucyA9IGZhbGxiYWNrU2VnbWVudGF0aW9uKHRleHQpXG4gIH1cblxuICBjb25zdCBleHBlcmllbmNlID0gcGFyc2VFeHBlcmllbmNlKHNlY3Rpb25zWydleHBlcmllbmNlJ10gfHwgc2VjdGlvbnNbJ3dvcmsnXSB8fCBzZWN0aW9uc1snd29yayBleHBlcmllbmNlJ10gfHwgc2VjdGlvbnNbJ3Byb2Zlc3Npb25hbCBleHBlcmllbmNlJ10gfHwgJycpXG4gIGNvbnN0IHNraWxscyA9IHBhcnNlU2tpbGxzKHNlY3Rpb25zWydza2lsbHMnXSB8fCBzZWN0aW9uc1snY29yZSBjb21wZXRlbmNpZXMnXSB8fCBzZWN0aW9uc1sndGVjaG5pY2FsIHNraWxscyddIHx8IHNlY3Rpb25zWydrZXkgc2tpbGxzJ10gfHwgc2VjdGlvbnNbJ3RlY2ggc3RhY2snXSB8fCBzZWN0aW9uc1snY29tcGV0ZW5jaWVzJ10gfHwgJycpXG4gIGNvbnN0IHN1bW1hcnkgPSAoc2VjdGlvbnNbJ3N1bW1hcnknXSB8fCBzZWN0aW9uc1sncHJvZmlsZSddIHx8IHNlY3Rpb25zWydvYmplY3RpdmUnXSB8fCBzZWN0aW9uc1snYWJvdXQnXSB8fCAnJykuc3BsaXQoJ1xcbicpLnNsaWNlKDAsMykuam9pbignICcpXG4gIGNvbnN0IGVkdWNhdGlvbiA9IChzZWN0aW9uc1snZWR1Y2F0aW9uJ10gfHwgc2VjdGlvbnNbJ2FjYWRlbWljIGJhY2tncm91bmQnXSB8fCAnJykuc3BsaXQoJ1xcbicpLmZpbHRlcihCb29sZWFuKVxuICBjb25zdCBjZXJ0aWZpY2F0aW9ucyA9IChzZWN0aW9uc1snY2VydGlmaWNhdGlvbnMnXSB8fCBzZWN0aW9uc1snY2VydGlmaWNhdGVzJ10gfHwgc2VjdGlvbnNbJ2NlcnRzJ10gfHwgJycpLnNwbGl0KCdcXG4nKS5maWx0ZXIoQm9vbGVhbilcblxuICByZXR1cm4geyBzdW1tYXJ5LCBza2lsbHMsIGV4cGVyaWVuY2UsIGVkdWNhdGlvbiwgY2VydGlmaWNhdGlvbnMgfVxufVxuXG5mdW5jdGlvbiBzcGxpdEJ5SGVhZGluZ3ModGV4dDogc3RyaW5nKSB7XG4gIGNvbnN0IHNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKVxuICBsZXQgY3VycmVudFNlY3Rpb24gPSAnJ1xuICBsZXQgY3VycmVudENvbnRlbnQ6IHN0cmluZ1tdID0gW11cbiAgXG4gIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKVxuICAgIGlmIChpc0hlYWRpbmcodHJpbW1lZCkpIHtcbiAgICAgIGlmIChjdXJyZW50U2VjdGlvbikge1xuICAgICAgICBzZWN0aW9uc1tjdXJyZW50U2VjdGlvbi50b0xvd2VyQ2FzZSgpXSA9IGN1cnJlbnRDb250ZW50LmpvaW4oJ1xcbicpXG4gICAgICB9XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IHRyaW1tZWRcbiAgICAgIGN1cnJlbnRDb250ZW50ID0gW11cbiAgICB9IGVsc2Uge1xuICAgICAgY3VycmVudENvbnRlbnQucHVzaChsaW5lKVxuICAgIH1cbiAgfVxuICBcbiAgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgc2VjdGlvbnNbY3VycmVudFNlY3Rpb24udG9Mb3dlckNhc2UoKV0gPSBjdXJyZW50Q29udGVudC5qb2luKCdcXG4nKVxuICB9XG4gIFxuICByZXR1cm4gc2VjdGlvbnNcbn1cblxuZnVuY3Rpb24gaXNIZWFkaW5nKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBOb3JtYWxpemUgdGhlIGxpbmU6IHRyaW0gcHVuY3R1YXRpb24vY29sb25zLCBsb3dlcmNhc2UsIGNvbGxhcHNlIHdoaXRlc3BhY2VcbiAgY29uc3Qgbm9ybWFsaXplZCA9IG5vcm1hbGl6ZUhlYWRpbmcobGluZSlcbiAgXG4gIC8vIEV4cGFuZGVkIHN5bm9ueW1zIGFuZCBwYXR0ZXJuc1xuICBjb25zdCBoZWFkaW5nUGF0dGVybnMgPSBbXG4gICAgLy8gRXhwZXJpZW5jZSBwYXR0ZXJuc1xuICAgIC9eKGV4cGVyaWVuY2V8d29yayBleHBlcmllbmNlfHByb2Zlc3Npb25hbCBleHBlcmllbmNlfGVtcGxveW1lbnR8d29yayBoaXN0b3J5fGNhcmVlciBoaXN0b3J5fHByb2Zlc3Npb25hbCBiYWNrZ3JvdW5kKSQvLFxuICAgIC9eKHdvcmt8ZW1wbG95bWVudHxjYXJlZXJ8cHJvZmVzc2lvbmFsKSQvLFxuICAgIFxuICAgIC8vIFNraWxscyBwYXR0ZXJuc1xuICAgIC9eKHNraWxsc3x0ZWNobmljYWwgc2tpbGxzfGNvcmUgY29tcGV0ZW5jaWVzfGtleSBza2lsbHN8Y29tcGV0ZW5jaWVzfHRlY2ggc3RhY2t8dGVjaG5vbG9naWVzfHRlY2huaWNhbCBleHBlcnRpc2UpJC8sXG4gICAgL14oY29yZSBza2lsbHN8a2V5IGNvbXBldGVuY2llc3x0ZWNobmljYWwgY29tcGV0ZW5jaWVzfHByb2Zlc3Npb25hbCBza2lsbHMpJC8sXG4gICAgL14ocHJvZ3JhbW1pbmcgbGFuZ3VhZ2VzfHNvZnR3YXJlIHNraWxsc3x0b29sc3xzb2Z0d2FyZSkkLyxcbiAgICBcbiAgICAvLyBTdW1tYXJ5IHBhdHRlcm5zXG4gICAgL14oc3VtbWFyeXxwcm9maWxlfG9iamVjdGl2ZXxhYm91dHxwZXJzb25hbCBzdGF0ZW1lbnR8cHJvZmVzc2lvbmFsIHN1bW1hcnkpJC8sXG4gICAgL14ob3ZlcnZpZXd8aW50cm9kdWN0aW9ufGJpb3xiaW9ncmFwaHkpJC8sXG4gICAgXG4gICAgLy8gRWR1Y2F0aW9uIHBhdHRlcm5zXG4gICAgL14oZWR1Y2F0aW9ufGFjYWRlbWljIGJhY2tncm91bmR8YWNhZGVtaWMgcXVhbGlmaWNhdGlvbnN8YWNhZGVtaWMgY3JlZGVudGlhbHMpJC8sXG4gICAgL14oYWNhZGVtaWN8cXVhbGlmaWNhdGlvbnN8Y3JlZGVudGlhbHN8ZGVncmVlcykkLyxcbiAgICBcbiAgICAvLyBDZXJ0aWZpY2F0aW9ucyBwYXR0ZXJuc1xuICAgIC9eKGNlcnRpZmljYXRpb25zfGNlcnRpZmljYXRlc3xjZXJ0c3xwcm9mZXNzaW9uYWwgY2VydGlmaWNhdGlvbnMpJC8sXG4gICAgL14obGljZW5zZXN8bGljZW5jZXN8Y3JlZGVudGlhbHN8cHJvZmVzc2lvbmFsIGNyZWRlbnRpYWxzKSQvLFxuICAgIFxuICAgIC8vIFByb2plY3RzIHBhdHRlcm5zXG4gICAgL14ocHJvamVjdHN8cHJvamVjdCBleHBlcmllbmNlfHByb2plY3QgcG9ydGZvbGlvfGtleSBwcm9qZWN0cykkLyxcbiAgICAvXihwb3J0Zm9saW98cHJvamVjdCB3b3JrfHByb2plY3QgaGlzdG9yeSkkLyxcbiAgICBcbiAgICAvLyBBY2hpZXZlbWVudHMgcGF0dGVybnNcbiAgICAvXihhY2hpZXZlbWVudHN8YWNjb21wbGlzaG1lbnRzfGF3YXJkc3xob25vcnN8aG9ub3VycykkLyxcbiAgICAvXihyZWNvZ25pdGlvbnxhd2FyZHMgYW5kIHJlY29nbml0aW9ufHByb2Zlc3Npb25hbCBhY2hpZXZlbWVudHMpJC8sXG4gICAgXG4gICAgLy8gQWRkaXRpb25hbCBwYXR0ZXJuc1xuICAgIC9eKHB1YmxpY2F0aW9uc3xyZXNlYXJjaHx2b2x1bnRlZXJ8dm9sdW50ZWVyIHdvcmt8Y29tbXVuaXR5IHNlcnZpY2UpJC8sXG4gICAgL14obGFuZ3VhZ2VzfGxhbmd1YWdlIHNraWxsc3xpbnRlcmVzdHN8aG9iYmllc3xhZGRpdGlvbmFsIGluZm9ybWF0aW9uKSQvXG4gIF1cbiAgXG4gIHJldHVybiBoZWFkaW5nUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChub3JtYWxpemVkKSlcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplSGVhZGluZyhsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gbGluZVxuICAgIC5yZXBsYWNlKC9bOlxcLVxcKlxcLlxcc10rJC8sICcnKSAvLyBSZW1vdmUgdHJhaWxpbmcgcHVuY3R1YXRpb24gYW5kIHdoaXRlc3BhY2VcbiAgICAucmVwbGFjZSgvXls6XFwtXFwqXFwuXFxzXSsvLCAnJykgLy8gUmVtb3ZlIGxlYWRpbmcgcHVuY3R1YXRpb24gYW5kIHdoaXRlc3BhY2VcbiAgICAudG9Mb3dlckNhc2UoKVxuICAgIC5yZXBsYWNlKC9cXHMrL2csICcgJykgLy8gQ29sbGFwc2UgbXVsdGlwbGUgd2hpdGVzcGFjZSB0byBzaW5nbGUgc3BhY2VcbiAgICAudHJpbSgpXG59XG5cbmZ1bmN0aW9uIGhhc01lYW5pbmdmdWxDb250ZW50KHNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+KTogYm9vbGVhbiB7XG4gIGNvbnN0IG1lYW5pbmdmdWxTZWN0aW9ucyA9IFsnZXhwZXJpZW5jZScsICdza2lsbHMnLCAnc3VtbWFyeScsICdlZHVjYXRpb24nXVxuICByZXR1cm4gbWVhbmluZ2Z1bFNlY3Rpb25zLnNvbWUoc2VjdGlvbiA9PiBcbiAgICBzZWN0aW9uc1tzZWN0aW9uXSAmJiBzZWN0aW9uc1tzZWN0aW9uXS50cmltKCkubGVuZ3RoID4gMjBcbiAgKVxufVxuXG5mdW5jdGlvbiBmYWxsYmFja1NlZ21lbnRhdGlvbih0ZXh0OiBzdHJpbmcpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgY29uc29sZS5sb2coJ0F0dGVtcHRpbmcgZmFsbGJhY2sgc2VnbWVudGF0aW9uJylcbiAgY29uc3QgbGluZXMgPSB0ZXh0LnNwbGl0KCdcXG4nKS5tYXAobCA9PiBsLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pXG4gIGNvbnN0IHNlY3Rpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge31cbiAgXG4gIC8vIFBhdHRlcm4tYmFzZWQgc2VjdGlvbiBkZXRlY3Rpb25cbiAgY29uc3QgcGF0dGVybnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gICAgZXhwZXJpZW5jZToge1xuICAgICAgaW5kaWNhdG9yczogWydleHBlcmllbmNlJywgJ3dvcmsnLCAnZW1wbG95bWVudCcsICdjYXJlZXInLCAncHJvZmVzc2lvbmFsJ10sXG4gICAgICBkYXRlUGF0dGVybjogL1xcYigxOXwyMClcXGR7Mn1cXGIvLCAvLyBZZWFycyAxOTAwLTIwOTlcbiAgICAgIGJ1bGxldFBhdHRlcm46IC9eW+KAolxcLVxcKl1cXHMrLyxcbiAgICAgIGNvbXBhbnlQYXR0ZXJuOiAvXltBLVpdW17igKJcXC1cXCpdKltBLVpdL1xuICAgIH0sXG4gICAgc2tpbGxzOiB7XG4gICAgICBpbmRpY2F0b3JzOiBbJ3NraWxscycsICdjb21wZXRlbmNpZXMnLCAndGVjaG5vbG9naWVzJywgJ3Rvb2xzJywgJ3NvZnR3YXJlJ10sXG4gICAgICBsaXN0UGF0dGVybjogL15bQS1aYS16XVte4oCiXFwtXFwqXSpbLDtdLywgLy8gQ29tbWEvc2VtaWNvbG9uIHNlcGFyYXRlZFxuICAgICAgc2hvcnRMaW5lUGF0dGVybjogL15bQS1aYS16XFxzXXsyLDMwfSQvIC8vIFNob3J0IGxpbmVzIChsaWtlbHkgc2tpbGxzKVxuICAgIH0sXG4gICAgc3VtbWFyeToge1xuICAgICAgaW5kaWNhdG9yczogWydzdW1tYXJ5JywgJ3Byb2ZpbGUnLCAnb2JqZWN0aXZlJywgJ2Fib3V0J10sXG4gICAgICBsb25nVGV4dFBhdHRlcm46IC9eW0EtWmEtel1bXuKAolxcLVxcKl17NTAsfS8sIC8vIExvbmcgdGV4dCB3aXRob3V0IGJ1bGxldHNcbiAgICAgIGZpcnN0U2VjdGlvbjogdHJ1ZSAvLyBPZnRlbiB0aGUgZmlyc3QgbWVhbmluZ2Z1bCBzZWN0aW9uXG4gICAgfVxuICB9XG4gIFxuICBsZXQgY3VycmVudFNlY3Rpb24gPSAnJ1xuICBsZXQgY3VycmVudENvbnRlbnQ6IHN0cmluZ1tdID0gW11cbiAgbGV0IHNlY3Rpb25TY29yZXM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7fVxuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRMaW5lID0gbm9ybWFsaXplSGVhZGluZyhsaW5lKVxuICAgIFxuICAgIC8vIFNjb3JlIGVhY2ggbGluZSBhZ2FpbnN0IHNlY3Rpb24gcGF0dGVybnNcbiAgICBmb3IgKGNvbnN0IFtzZWN0aW9uTmFtZSwgcGF0dGVybl0gb2YgT2JqZWN0LmVudHJpZXMocGF0dGVybnMpKSB7XG4gICAgICBsZXQgc2NvcmUgPSAwXG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvciBpbmRpY2F0b3Igd29yZHNcbiAgICAgIGlmIChwYXR0ZXJuLmluZGljYXRvcnMuc29tZSgoaW5kaWNhdG9yOiBzdHJpbmcpID0+IG5vcm1hbGl6ZWRMaW5lLmluY2x1ZGVzKGluZGljYXRvcikpKSB7XG4gICAgICAgIHNjb3JlICs9IDNcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZm9yIHNlY3Rpb24tc3BlY2lmaWMgcGF0dGVybnNcbiAgICAgIGlmIChzZWN0aW9uTmFtZSA9PT0gJ2V4cGVyaWVuY2UnKSB7XG4gICAgICAgIGlmIChwYXR0ZXJuLmRhdGVQYXR0ZXJuLnRlc3QobGluZSkpIHNjb3JlICs9IDJcbiAgICAgICAgaWYgKHBhdHRlcm4uYnVsbGV0UGF0dGVybi50ZXN0KGxpbmUpKSBzY29yZSArPSAxXG4gICAgICAgIGlmIChwYXR0ZXJuLmNvbXBhbnlQYXR0ZXJuLnRlc3QobGluZSkpIHNjb3JlICs9IDJcbiAgICAgIH0gZWxzZSBpZiAoc2VjdGlvbk5hbWUgPT09ICdza2lsbHMnKSB7XG4gICAgICAgIGlmIChwYXR0ZXJuLmxpc3RQYXR0ZXJuLnRlc3QobGluZSkpIHNjb3JlICs9IDJcbiAgICAgICAgaWYgKHBhdHRlcm4uc2hvcnRMaW5lUGF0dGVybi50ZXN0KGxpbmUpKSBzY29yZSArPSAxXG4gICAgICB9IGVsc2UgaWYgKHNlY3Rpb25OYW1lID09PSAnc3VtbWFyeScpIHtcbiAgICAgICAgaWYgKHBhdHRlcm4ubG9uZ1RleHRQYXR0ZXJuLnRlc3QobGluZSkpIHNjb3JlICs9IDJcbiAgICAgICAgaWYgKHBhdHRlcm4uZmlyc3RTZWN0aW9uICYmIGkgPCA1KSBzY29yZSArPSAxXG4gICAgICB9XG4gICAgICBcbiAgICAgIHNlY3Rpb25TY29yZXNbc2VjdGlvbk5hbWVdID0gKHNlY3Rpb25TY29yZXNbc2VjdGlvbk5hbWVdIHx8IDApICsgc2NvcmVcbiAgICB9XG4gICAgXG4gICAgLy8gSWYgdGhpcyBsaW5lIHNjb3JlcyBoaWdobHkgZm9yIGEgc2VjdGlvbiwgc3RhcnQgdGhhdCBzZWN0aW9uXG4gICAgY29uc3QgYmVzdFNlY3Rpb24gPSBPYmplY3QuZW50cmllcyhzZWN0aW9uU2NvcmVzKS5yZWR1Y2UoKGEsIGIpID0+IFxuICAgICAgc2VjdGlvblNjb3Jlc1thWzBdXSA+IHNlY3Rpb25TY29yZXNbYlswXV0gPyBhIDogYlxuICAgIClcbiAgICBcbiAgICBpZiAoYmVzdFNlY3Rpb25bMV0gPiAyICYmIGJlc3RTZWN0aW9uWzBdICE9PSBjdXJyZW50U2VjdGlvbikge1xuICAgICAgaWYgKGN1cnJlbnRTZWN0aW9uKSB7XG4gICAgICAgIHNlY3Rpb25zW2N1cnJlbnRTZWN0aW9uXSA9IGN1cnJlbnRDb250ZW50LmpvaW4oJ1xcbicpXG4gICAgICB9XG4gICAgICBjdXJyZW50U2VjdGlvbiA9IGJlc3RTZWN0aW9uWzBdXG4gICAgICBjdXJyZW50Q29udGVudCA9IFtsaW5lXVxuICAgICAgc2VjdGlvblNjb3JlcyA9IHt9IC8vIFJlc2V0IHNjb3Jlc1xuICAgIH0gZWxzZSB7XG4gICAgICBjdXJyZW50Q29udGVudC5wdXNoKGxpbmUpXG4gICAgfVxuICB9XG4gIFxuICBpZiAoY3VycmVudFNlY3Rpb24pIHtcbiAgICBzZWN0aW9uc1tjdXJyZW50U2VjdGlvbl0gPSBjdXJyZW50Q29udGVudC5qb2luKCdcXG4nKVxuICB9XG4gIFxuICAvLyBJZiBzdGlsbCBubyBzZWN0aW9ucyBmb3VuZCwgdHJ5IGNvbnRlbnQtYmFzZWQgc2VnbWVudGF0aW9uXG4gIGlmIChPYmplY3Qua2V5cyhzZWN0aW9ucykubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIGNvbnRlbnRCYXNlZFNlZ21lbnRhdGlvbih0ZXh0KVxuICB9XG4gIFxuICByZXR1cm4gc2VjdGlvbnNcbn1cblxuZnVuY3Rpb24gY29udGVudEJhc2VkU2VnbWVudGF0aW9uKHRleHQ6IHN0cmluZyk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICBjb25zb2xlLmxvZygnQXR0ZW1wdGluZyBjb250ZW50LWJhc2VkIHNlZ21lbnRhdGlvbicpXG4gIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJykubWFwKGwgPT4gbC50cmltKCkpLmZpbHRlcihCb29sZWFuKVxuICBjb25zdCBzZWN0aW9uczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHt9XG4gIFxuICBsZXQgY3VycmVudFNlY3Rpb24gPSAnc3VtbWFyeSdcbiAgbGV0IGN1cnJlbnRDb250ZW50OiBzdHJpbmdbXSA9IFtdXG4gIFxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAvLyBEZXRlY3Qgc2VjdGlvbiBib3VuZGFyaWVzIGJ5IGNvbnRlbnQgcGF0dGVybnNcbiAgICBpZiAoaXNMaWtlbHlFeHBlcmllbmNlKGxpbmUpKSB7XG4gICAgICBpZiAoY3VycmVudENvbnRlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBzZWN0aW9uc1tjdXJyZW50U2VjdGlvbl0gPSBjdXJyZW50Q29udGVudC5qb2luKCdcXG4nKVxuICAgICAgfVxuICAgICAgY3VycmVudFNlY3Rpb24gPSAnZXhwZXJpZW5jZSdcbiAgICAgIGN1cnJlbnRDb250ZW50ID0gW2xpbmVdXG4gICAgfSBlbHNlIGlmIChpc0xpa2VseVNraWxscyhsaW5lKSkge1xuICAgICAgaWYgKGN1cnJlbnRDb250ZW50Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgc2VjdGlvbnNbY3VycmVudFNlY3Rpb25dID0gY3VycmVudENvbnRlbnQuam9pbignXFxuJylcbiAgICAgIH1cbiAgICAgIGN1cnJlbnRTZWN0aW9uID0gJ3NraWxscydcbiAgICAgIGN1cnJlbnRDb250ZW50ID0gW2xpbmVdXG4gICAgfSBlbHNlIHtcbiAgICAgIGN1cnJlbnRDb250ZW50LnB1c2gobGluZSlcbiAgICB9XG4gIH1cbiAgXG4gIGlmIChjdXJyZW50Q29udGVudC5sZW5ndGggPiAwKSB7XG4gICAgc2VjdGlvbnNbY3VycmVudFNlY3Rpb25dID0gY3VycmVudENvbnRlbnQuam9pbignXFxuJylcbiAgfVxuICBcbiAgcmV0dXJuIHNlY3Rpb25zXG59XG5cbmZ1bmN0aW9uIGlzTGlrZWx5RXhwZXJpZW5jZShsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgLy8gTG9vayBmb3IgZXhwZXJpZW5jZSBpbmRpY2F0b3JzXG4gIGNvbnN0IGV4cGVyaWVuY2VQYXR0ZXJucyA9IFtcbiAgICAvXFxiKDE5fDIwKVxcZHsyfVxcYi8sIC8vIFllYXJzXG4gICAgL1xcYihhdHxAfFxcLXxcXHwpXFxiLywgLy8gQ29tcGFueSBzZXBhcmF0b3JzXG4gICAgL1xcYihlbmdpbmVlcnxtYW5hZ2VyfGRldmVsb3BlcnxhbmFseXN0fGNvbnN1bHRhbnR8ZGlyZWN0b3J8bGVhZHxzZW5pb3J8anVuaW9yKVxcYi9pLFxuICAgIC9cXGIoY29tcGFueXxjb3JwfGluY3xsbGN8bHRkKVxcYi9pXG4gIF1cbiAgXG4gIHJldHVybiBleHBlcmllbmNlUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChsaW5lKSlcbn1cblxuZnVuY3Rpb24gaXNMaWtlbHlTa2lsbHMobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIC8vIExvb2sgZm9yIHNraWxscyBpbmRpY2F0b3JzXG4gIGNvbnN0IHNraWxsc1BhdHRlcm5zID0gW1xuICAgIC9eW0EtWmEtel1bXuKAolxcLVxcKl0qWyw7XS8sIC8vIENvbW1hL3NlbWljb2xvbiBzZXBhcmF0ZWRcbiAgICAvXltBLVphLXpcXHNdezIsMzB9JC8sIC8vIFNob3J0IGxpbmVzXG4gICAgL1xcYihqYXZhfHB5dGhvbnxqYXZhc2NyaXB0fHJlYWN0fGFuZ3VsYXJ8dnVlfG5vZGV8c3FsfGF3c3xhenVyZXxkb2NrZXJ8a3ViZXJuZXRlcylcXGIvaVxuICBdXG4gIFxuICByZXR1cm4gc2tpbGxzUGF0dGVybnMuc29tZShwYXR0ZXJuID0+IHBhdHRlcm4udGVzdChsaW5lKSlcbn1cblxuZnVuY3Rpb24gcGFyc2VFeHBlcmllbmNlKHNlY3Rpb246IHN0cmluZykge1xuICBjb25zdCByb2xlczogQXJyYXk8e2NvbXBhbnk6IHN0cmluZywgcm9sZTogc3RyaW5nLCBidWxsZXRzOiBzdHJpbmdbXX0+ID0gW11cbiAgY29uc3QgbGluZXMgPSBzZWN0aW9uLnNwbGl0KCdcXG4nKS5maWx0ZXIoQm9vbGVhbilcbiAgXG4gIGxldCBjdXJyZW50Um9sZTogYW55ID0gbnVsbFxuICBcbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpXG4gICAgaWYgKGlzUm9sZUxpbmUodHJpbW1lZCkpIHtcbiAgICAgIGlmIChjdXJyZW50Um9sZSkgcm9sZXMucHVzaChjdXJyZW50Um9sZSlcbiAgICAgIGN1cnJlbnRSb2xlID0gcGFyc2VSb2xlTGluZSh0cmltbWVkKVxuICAgIH0gZWxzZSBpZiAoY3VycmVudFJvbGUgJiYgaXNCdWxsZXRQb2ludCh0cmltbWVkKSkge1xuICAgICAgY3VycmVudFJvbGUuYnVsbGV0cy5wdXNoKHRyaW1tZWQpXG4gICAgfVxuICB9XG4gIFxuICBpZiAoY3VycmVudFJvbGUpIHJvbGVzLnB1c2goY3VycmVudFJvbGUpXG4gIHJldHVybiByb2xlc1xufVxuXG5mdW5jdGlvbiBpc1JvbGVMaW5lKGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAvLyBFbmhhbmNlZCByb2xlIGxpbmUgZGV0ZWN0aW9uXG4gIGNvbnN0IHJvbGVQYXR0ZXJucyA9IFtcbiAgICAvXlte4oCiXFwtXFwqXS4qKGF0fEB8XFwtfFxcfCkuKlswLTldezR9L2ksIC8vIFwiUm9sZSBhdCBDb21wYW55IDIwMjBcIlxuICAgIC9eW0EtWl1bXuKAolxcLVxcKl0qW0EtWl0uKlswLTldezR9LywgLy8gXCJDb21wYW55IFJvbGUgMjAyMFwiXG4gICAgL15bXuKAolxcLVxcKl0uKlxcYigxOXwyMClcXGR7Mn1cXGIvLCAvLyBBbnkgbGluZSB3aXRoIGEgeWVhclxuICAgIC9eW0EtWl1bXuKAolxcLVxcKl0qXFxiKGVuZ2luZWVyfG1hbmFnZXJ8ZGV2ZWxvcGVyfGFuYWx5c3R8Y29uc3VsdGFudHxkaXJlY3RvcnxsZWFkfHNlbmlvcnxqdW5pb3IpXFxiL2lcbiAgXVxuICBcbiAgcmV0dXJuIHJvbGVQYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KGxpbmUpKVxufVxuXG5mdW5jdGlvbiBwYXJzZVJvbGVMaW5lKGxpbmU6IHN0cmluZykge1xuICAvLyBFbmhhbmNlZCByb2xlIHBhcnNpbmdcbiAgY29uc3Qgc2VwYXJhdG9ycyA9IC9hdHxAfFxcLXxcXHx8XFxiKDE5fDIwKVxcZHsyfVxcYi9cbiAgY29uc3QgcGFydHMgPSBsaW5lLnNwbGl0KHNlcGFyYXRvcnMpLm1hcChwID0+IHAudHJpbSgpKS5maWx0ZXIoQm9vbGVhbilcbiAgXG4gIGlmIChwYXJ0cy5sZW5ndGggPj0gMikge1xuICAgIHJldHVybiB7XG4gICAgICByb2xlOiBwYXJ0c1swXSxcbiAgICAgIGNvbXBhbnk6IHBhcnRzWzFdIHx8ICdVbmtub3duJyxcbiAgICAgIGJ1bGxldHM6IFtdXG4gICAgfVxuICB9XG4gIFxuICAvLyBGYWxsYmFjazogdHJ5IHRvIGV4dHJhY3Qgcm9sZSBhbmQgY29tcGFueSBmcm9tIHRoZSBsaW5lXG4gIGNvbnN0IHJvbGVNYXRjaCA9IGxpbmUubWF0Y2goL1xcYihlbmdpbmVlcnxtYW5hZ2VyfGRldmVsb3BlcnxhbmFseXN0fGNvbnN1bHRhbnR8ZGlyZWN0b3J8bGVhZHxzZW5pb3J8anVuaW9yKVxcYi9pKVxuICBjb25zdCBjb21wYW55TWF0Y2ggPSBsaW5lLm1hdGNoKC9cXGJbQS1aXVte4oCiXFwtXFwqXSpbQS1aXVxcYi8pXG4gIFxuICByZXR1cm4ge1xuICAgIHJvbGU6IHJvbGVNYXRjaCA/IHJvbGVNYXRjaFswXSA6IGxpbmUsXG4gICAgY29tcGFueTogY29tcGFueU1hdGNoID8gY29tcGFueU1hdGNoWzBdIDogJ1Vua25vd24nLFxuICAgIGJ1bGxldHM6IFtdXG4gIH1cbn1cblxuZnVuY3Rpb24gaXNCdWxsZXRQb2ludChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgcmV0dXJuIC9eW+KAolxcLVxcKl0vLnRlc3QobGluZSkgfHwgL15bMC05XStcXC4vLnRlc3QobGluZSlcbn1cblxuZnVuY3Rpb24gcGFyc2VTa2lsbHMoc2VjdGlvbjogc3RyaW5nKSB7XG4gIGlmICghc2VjdGlvbi50cmltKCkpIHJldHVybiBbXVxuICBcbiAgLy8gRW5oYW5jZWQgc2tpbGxzIHBhcnNpbmcgd2l0aCBtdWx0aXBsZSBkZWxpbWl0ZXJzIGFuZCBmb3JtYXRzXG4gIGNvbnN0IHNraWxscyA9IHNlY3Rpb25cbiAgICAuc3BsaXQoL1vigKIsO1xcbnxdLykgLy8gTXVsdGlwbGUgZGVsaW1pdGVyc1xuICAgIC5tYXAocyA9PiBzLnRyaW0oKSlcbiAgICAuZmlsdGVyKEJvb2xlYW4pXG4gICAgLmZpbHRlcihza2lsbCA9PiBza2lsbC5sZW5ndGggPiAyICYmIHNraWxsLmxlbmd0aCA8IDUwKSAvLyBGaWx0ZXIgb3V0IHRvbyBzaG9ydC9sb25nIGl0ZW1zXG4gICAgLnNsaWNlKDAsIDYwKVxuICBcbiAgcmV0dXJuIHNraWxsc1xufVxuIl0sIm5hbWVzIjpbIm1hbW1vdGgiLCJleHRyYWN0VGV4dEZyb21GaWxlIiwiZmlsZSIsImJ1ZmZlciIsIkJ1ZmZlciIsImZyb20iLCJhcnJheUJ1ZmZlciIsImV4dCIsIkZpbGUiLCJuYW1lIiwic3BsaXQiLCJwb3AiLCJ0b0xvd2VyQ2FzZSIsInBkZmpzIiwiZG9jIiwiZ2V0RG9jdW1lbnQiLCJkYXRhIiwicHJvbWlzZSIsInRleHQiLCJpIiwibnVtUGFnZXMiLCJwYWdlIiwiZ2V0UGFnZSIsImNvbnRlbnQiLCJnZXRUZXh0Q29udGVudCIsIml0ZW1zIiwibWFwIiwiaXRlbSIsInN0ciIsImpvaW4iLCJlcnJvciIsImNvbnNvbGUiLCJ0b1N0cmluZyIsImV4dHJhY3RSYXdUZXh0IiwidmFsdWUiLCJoZXVyaXN0aWNQYXJzZVJlc3VtZSIsInJhdyIsInJlcGxhY2UiLCJsIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJzZWN0aW9ucyIsInNwbGl0QnlIZWFkaW5ncyIsIk9iamVjdCIsImtleXMiLCJsZW5ndGgiLCJoYXNNZWFuaW5nZnVsQ29udGVudCIsImxvZyIsImZhbGxiYWNrU2VnbWVudGF0aW9uIiwiZXhwZXJpZW5jZSIsInBhcnNlRXhwZXJpZW5jZSIsInNraWxscyIsInBhcnNlU2tpbGxzIiwic3VtbWFyeSIsInNsaWNlIiwiZWR1Y2F0aW9uIiwiY2VydGlmaWNhdGlvbnMiLCJsaW5lcyIsImN1cnJlbnRTZWN0aW9uIiwiY3VycmVudENvbnRlbnQiLCJsaW5lIiwidHJpbW1lZCIsImlzSGVhZGluZyIsInB1c2giLCJub3JtYWxpemVkIiwibm9ybWFsaXplSGVhZGluZyIsImhlYWRpbmdQYXR0ZXJucyIsInNvbWUiLCJwYXR0ZXJuIiwidGVzdCIsIm1lYW5pbmdmdWxTZWN0aW9ucyIsInNlY3Rpb24iLCJwYXR0ZXJucyIsImluZGljYXRvcnMiLCJkYXRlUGF0dGVybiIsImJ1bGxldFBhdHRlcm4iLCJjb21wYW55UGF0dGVybiIsImxpc3RQYXR0ZXJuIiwic2hvcnRMaW5lUGF0dGVybiIsImxvbmdUZXh0UGF0dGVybiIsImZpcnN0U2VjdGlvbiIsInNlY3Rpb25TY29yZXMiLCJub3JtYWxpemVkTGluZSIsInNlY3Rpb25OYW1lIiwiZW50cmllcyIsInNjb3JlIiwiaW5kaWNhdG9yIiwiaW5jbHVkZXMiLCJiZXN0U2VjdGlvbiIsInJlZHVjZSIsImEiLCJiIiwiY29udGVudEJhc2VkU2VnbWVudGF0aW9uIiwiaXNMaWtlbHlFeHBlcmllbmNlIiwiaXNMaWtlbHlTa2lsbHMiLCJleHBlcmllbmNlUGF0dGVybnMiLCJza2lsbHNQYXR0ZXJucyIsInJvbGVzIiwiY3VycmVudFJvbGUiLCJpc1JvbGVMaW5lIiwicGFyc2VSb2xlTGluZSIsImlzQnVsbGV0UG9pbnQiLCJidWxsZXRzIiwicm9sZVBhdHRlcm5zIiwic2VwYXJhdG9ycyIsInBhcnRzIiwicCIsInJvbGUiLCJjb21wYW55Iiwicm9sZU1hdGNoIiwibWF0Y2giLCJjb21wYW55TWF0Y2giLCJzIiwic2tpbGwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/parsers.ts\n");

/***/ }),

/***/ "(rsc)/./lib/parsing-validation.ts":
/*!***********************************!*\
  !*** ./lib/parsing-validation.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createErrorState: () => (/* binding */ createErrorState),\n/* harmony export */   shouldShowExperienceBanner: () => (/* binding */ shouldShowExperienceBanner),\n/* harmony export */   shouldShowSkillsBanner: () => (/* binding */ shouldShowSkillsBanner),\n/* harmony export */   shouldShowSummaryBanner: () => (/* binding */ shouldShowSummaryBanner),\n/* harmony export */   validateParsingResult: () => (/* binding */ validateParsingResult)\n/* harmony export */ });\nfunction validateParsingResult(resume) {\n    const result = {\n        isValid: true,\n        hasExperience: false,\n        hasSkills: false,\n        hasSummary: false,\n        experienceCount: 0,\n        skillsCount: 0,\n        summaryLength: 0,\n        errors: [],\n        warnings: [],\n        suggestions: []\n    };\n    // Check experience\n    if (resume.experience && resume.experience.length > 0) {\n        result.hasExperience = true;\n        result.experienceCount = resume.experience.length;\n        // Check if experience has meaningful content\n        const hasMeaningfulExperience = resume.experience.some((exp)=>exp.bullets && exp.bullets.length > 0);\n        if (!hasMeaningfulExperience) {\n            result.warnings.push(\"Experience found but no bullet points detected\");\n            result.suggestions.push(\"Consider adding bullet points to your experience entries\");\n        }\n    } else {\n        result.errors.push(\"No work experience detected\");\n        result.suggestions.push(\"Paste your work history or pick lines to mark as experience\");\n    }\n    // Check skills\n    if (resume.skills && resume.skills.length > 0) {\n        result.hasSkills = true;\n        result.skillsCount = resume.skills.length;\n    } else {\n        result.warnings.push(\"No skills section detected\");\n        result.suggestions.push(\"Consider adding a skills section to your resume\");\n    }\n    // Check summary\n    if (resume.summary && resume.summary.trim().length > 0) {\n        result.hasSummary = true;\n        result.summaryLength = resume.summary.trim().length;\n        if (resume.summary.trim().length < 50) {\n            result.warnings.push(\"Summary is very short\");\n            result.suggestions.push(\"Consider expanding your professional summary\");\n        }\n    } else {\n        result.warnings.push(\"No summary detected\");\n        result.suggestions.push(\"Consider adding a professional summary\");\n    }\n    // Overall validation\n    if (result.errors.length > 0) {\n        result.isValid = false;\n    }\n    return result;\n}\nfunction shouldShowExperienceBanner(validation) {\n    return !validation.hasExperience || validation.experienceCount === 0;\n}\nfunction shouldShowSkillsBanner(validation) {\n    return !validation.hasSkills || validation.skillsCount === 0;\n}\nfunction shouldShowSummaryBanner(validation) {\n    return !validation.hasSummary || validation.summaryLength < 50;\n}\nfunction createErrorState(validation) {\n    if (!validation.hasExperience) {\n        return {\n            type: \"error\",\n            title: \"Experience Not Found\",\n            message: \"We couldn't find any work experience in your resume. This is required for tailoring.\",\n            actions: [\n                {\n                    label: \"Paste Work History\",\n                    action: \"paste_experience\"\n                },\n                {\n                    label: \"Mark Lines as Experience\",\n                    action: \"mark_experience\"\n                },\n                {\n                    label: \"Try Different Resume\",\n                    action: \"upload_new\"\n                }\n            ]\n        };\n    }\n    if (validation.experienceCount > 0 && validation.experienceCount < 2) {\n        return {\n            type: \"warning\",\n            title: \"Limited Experience Found\",\n            message: `Only ${validation.experienceCount} work experience found. More experience will improve tailoring results.`,\n            actions: [\n                {\n                    label: \"Add More Experience\",\n                    action: \"add_experience\"\n                },\n                {\n                    label: \"Continue Anyway\",\n                    action: \"continue\"\n                }\n            ]\n        };\n    }\n    if (!validation.hasSkills) {\n        return {\n            type: \"warning\",\n            title: \"Skills Section Missing\",\n            message: \"No skills section detected. Adding skills will improve ATS compatibility.\",\n            actions: [\n                {\n                    label: \"Add Skills\",\n                    action: \"add_skills\"\n                },\n                {\n                    label: \"Continue Without Skills\",\n                    action: \"continue\"\n                }\n            ]\n        };\n    }\n    return {\n        type: \"success\",\n        title: \"Resume Parsed Successfully\",\n        message: \"Your resume has been parsed and is ready for tailoring.\",\n        actions: [\n            {\n                label: \"Continue to Tailoring\",\n                action: \"continue\"\n            }\n        ]\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TztvQkFBc0JDLFFBQVE7Z0JBQW1CO2dCQUMxRDtvQkFBRUQsT0FBTztvQkFBNEJDLFFBQVE7Z0JBQWtCO2dCQUMvRDtvQkFBRUQsT0FBTztvQkFBd0JDLFFBQVE7Z0JBQWE7YUFDdkQ7UUFDSDtJQUNGO0lBRUEsSUFBSVQsV0FBV2pCLGVBQWUsR0FBRyxLQUFLaUIsV0FBV2pCLGVBQWUsR0FBRyxHQUFHO1FBQ3BFLE9BQU87WUFDTHFCLE1BQU07WUFDTkMsT0FBTztZQUNQQyxTQUFTLENBQUMsS0FBSyxFQUFFTixXQUFXakIsZUFBZSxDQUFDLHVFQUF1RSxDQUFDO1lBQ3BId0IsU0FBUztnQkFDUDtvQkFBRUMsT0FBTztvQkFBdUJDLFFBQVE7Z0JBQWlCO2dCQUN6RDtvQkFBRUQsT0FBTztvQkFBbUJDLFFBQVE7Z0JBQVc7YUFDaEQ7UUFDSDtJQUNGO0lBRUEsSUFBSSxDQUFDVCxXQUFXbkIsU0FBUyxFQUFFO1FBQ3pCLE9BQU87WUFDTHVCLE1BQU07WUFDTkMsT0FBTztZQUNQQyxTQUFTO1lBQ1RDLFNBQVM7Z0JBQ1A7b0JBQUVDLE9BQU87b0JBQWNDLFFBQVE7Z0JBQWE7Z0JBQzVDO29CQUFFRCxPQUFPO29CQUEyQkMsUUFBUTtnQkFBVzthQUN4RDtRQUNIO0lBQ0Y7SUFFQSxPQUFPO1FBQ0xMLE1BQU07UUFDTkMsT0FBTztRQUNQQyxTQUFTO1FBQ1RDLFNBQVM7WUFDUDtnQkFBRUMsT0FBTztnQkFBeUJDLFFBQVE7WUFBVztTQUN0RDtJQUNIO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vbGliL3BhcnNpbmctdmFsaWRhdGlvbi50cz8yZTc1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3VtZUpTT04gfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIFBhcnNpbmdWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhblxuICBoYXNFeHBlcmllbmNlOiBib29sZWFuXG4gIGhhc1NraWxsczogYm9vbGVhblxuICBoYXNTdW1tYXJ5OiBib29sZWFuXG4gIGV4cGVyaWVuY2VDb3VudDogbnVtYmVyXG4gIHNraWxsc0NvdW50OiBudW1iZXJcbiAgc3VtbWFyeUxlbmd0aDogbnVtYmVyXG4gIGVycm9yczogc3RyaW5nW11cbiAgd2FybmluZ3M6IHN0cmluZ1tdXG4gIHN1Z2dlc3Rpb25zOiBzdHJpbmdbXVxufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQYXJzaW5nUmVzdWx0KHJlc3VtZTogUmVzdW1lSlNPTik6IFBhcnNpbmdWYWxpZGF0aW9uUmVzdWx0IHtcbiAgY29uc3QgcmVzdWx0OiBQYXJzaW5nVmFsaWRhdGlvblJlc3VsdCA9IHtcbiAgICBpc1ZhbGlkOiB0cnVlLFxuICAgIGhhc0V4cGVyaWVuY2U6IGZhbHNlLFxuICAgIGhhc1NraWxsczogZmFsc2UsXG4gICAgaGFzU3VtbWFyeTogZmFsc2UsXG4gICAgZXhwZXJpZW5jZUNvdW50OiAwLFxuICAgIHNraWxsc0NvdW50OiAwLFxuICAgIHN1bW1hcnlMZW5ndGg6IDAsXG4gICAgZXJyb3JzOiBbXSxcbiAgICB3YXJuaW5nczogW10sXG4gICAgc3VnZ2VzdGlvbnM6IFtdXG4gIH1cblxuICAvLyBDaGVjayBleHBlcmllbmNlXG4gIGlmIChyZXN1bWUuZXhwZXJpZW5jZSAmJiByZXN1bWUuZXhwZXJpZW5jZS5sZW5ndGggPiAwKSB7XG4gICAgcmVzdWx0Lmhhc0V4cGVyaWVuY2UgPSB0cnVlXG4gICAgcmVzdWx0LmV4cGVyaWVuY2VDb3VudCA9IHJlc3VtZS5leHBlcmllbmNlLmxlbmd0aFxuICAgIFxuICAgIC8vIENoZWNrIGlmIGV4cGVyaWVuY2UgaGFzIG1lYW5pbmdmdWwgY29udGVudFxuICAgIGNvbnN0IGhhc01lYW5pbmdmdWxFeHBlcmllbmNlID0gcmVzdW1lLmV4cGVyaWVuY2Uuc29tZShleHAgPT4gXG4gICAgICBleHAuYnVsbGV0cyAmJiBleHAuYnVsbGV0cy5sZW5ndGggPiAwXG4gICAgKVxuICAgIFxuICAgIGlmICghaGFzTWVhbmluZ2Z1bEV4cGVyaWVuY2UpIHtcbiAgICAgIHJlc3VsdC53YXJuaW5ncy5wdXNoKCdFeHBlcmllbmNlIGZvdW5kIGJ1dCBubyBidWxsZXQgcG9pbnRzIGRldGVjdGVkJylcbiAgICAgIHJlc3VsdC5zdWdnZXN0aW9ucy5wdXNoKCdDb25zaWRlciBhZGRpbmcgYnVsbGV0IHBvaW50cyB0byB5b3VyIGV4cGVyaWVuY2UgZW50cmllcycpXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHJlc3VsdC5lcnJvcnMucHVzaCgnTm8gd29yayBleHBlcmllbmNlIGRldGVjdGVkJylcbiAgICByZXN1bHQuc3VnZ2VzdGlvbnMucHVzaCgnUGFzdGUgeW91ciB3b3JrIGhpc3Rvcnkgb3IgcGljayBsaW5lcyB0byBtYXJrIGFzIGV4cGVyaWVuY2UnKVxuICB9XG5cbiAgLy8gQ2hlY2sgc2tpbGxzXG4gIGlmIChyZXN1bWUuc2tpbGxzICYmIHJlc3VtZS5za2lsbHMubGVuZ3RoID4gMCkge1xuICAgIHJlc3VsdC5oYXNTa2lsbHMgPSB0cnVlXG4gICAgcmVzdWx0LnNraWxsc0NvdW50ID0gcmVzdW1lLnNraWxscy5sZW5ndGhcbiAgfSBlbHNlIHtcbiAgICByZXN1bHQud2FybmluZ3MucHVzaCgnTm8gc2tpbGxzIHNlY3Rpb24gZGV0ZWN0ZWQnKVxuICAgIHJlc3VsdC5zdWdnZXN0aW9ucy5wdXNoKCdDb25zaWRlciBhZGRpbmcgYSBza2lsbHMgc2VjdGlvbiB0byB5b3VyIHJlc3VtZScpXG4gIH1cblxuICAvLyBDaGVjayBzdW1tYXJ5XG4gIGlmIChyZXN1bWUuc3VtbWFyeSAmJiByZXN1bWUuc3VtbWFyeS50cmltKCkubGVuZ3RoID4gMCkge1xuICAgIHJlc3VsdC5oYXNTdW1tYXJ5ID0gdHJ1ZVxuICAgIHJlc3VsdC5zdW1tYXJ5TGVuZ3RoID0gcmVzdW1lLnN1bW1hcnkudHJpbSgpLmxlbmd0aFxuICAgIFxuICAgIGlmIChyZXN1bWUuc3VtbWFyeS50cmltKCkubGVuZ3RoIDwgNTApIHtcbiAgICAgIHJlc3VsdC53YXJuaW5ncy5wdXNoKCdTdW1tYXJ5IGlzIHZlcnkgc2hvcnQnKVxuICAgICAgcmVzdWx0LnN1Z2dlc3Rpb25zLnB1c2goJ0NvbnNpZGVyIGV4cGFuZGluZyB5b3VyIHByb2Zlc3Npb25hbCBzdW1tYXJ5JylcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0Lndhcm5pbmdzLnB1c2goJ05vIHN1bW1hcnkgZGV0ZWN0ZWQnKVxuICAgIHJlc3VsdC5zdWdnZXN0aW9ucy5wdXNoKCdDb25zaWRlciBhZGRpbmcgYSBwcm9mZXNzaW9uYWwgc3VtbWFyeScpXG4gIH1cblxuICAvLyBPdmVyYWxsIHZhbGlkYXRpb25cbiAgaWYgKHJlc3VsdC5lcnJvcnMubGVuZ3RoID4gMCkge1xuICAgIHJlc3VsdC5pc1ZhbGlkID0gZmFsc2VcbiAgfVxuXG4gIHJldHVybiByZXN1bHRcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNob3VsZFNob3dFeHBlcmllbmNlQmFubmVyKHZhbGlkYXRpb246IFBhcnNpbmdWYWxpZGF0aW9uUmVzdWx0KTogYm9vbGVhbiB7XG4gIHJldHVybiAhdmFsaWRhdGlvbi5oYXNFeHBlcmllbmNlIHx8IHZhbGlkYXRpb24uZXhwZXJpZW5jZUNvdW50ID09PSAwXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzaG91bGRTaG93U2tpbGxzQmFubmVyKHZhbGlkYXRpb246IFBhcnNpbmdWYWxpZGF0aW9uUmVzdWx0KTogYm9vbGVhbiB7XG4gIHJldHVybiAhdmFsaWRhdGlvbi5oYXNTa2lsbHMgfHwgdmFsaWRhdGlvbi5za2lsbHNDb3VudCA9PT0gMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkU2hvd1N1bW1hcnlCYW5uZXIodmFsaWRhdGlvbjogUGFyc2luZ1ZhbGlkYXRpb25SZXN1bHQpOiBib29sZWFuIHtcbiAgcmV0dXJuICF2YWxpZGF0aW9uLmhhc1N1bW1hcnkgfHwgdmFsaWRhdGlvbi5zdW1tYXJ5TGVuZ3RoIDwgNTBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUVycm9yU3RhdGUodmFsaWRhdGlvbjogUGFyc2luZ1ZhbGlkYXRpb25SZXN1bHQpOiB7XG4gIHR5cGU6ICdlcnJvcicgfCAnd2FybmluZycgfCAnc3VjY2VzcydcbiAgdGl0bGU6IHN0cmluZ1xuICBtZXNzYWdlOiBzdHJpbmdcbiAgYWN0aW9uczogQXJyYXk8eyBsYWJlbDogc3RyaW5nLCBhY3Rpb246IHN0cmluZyB9PlxufSB7XG4gIGlmICghdmFsaWRhdGlvbi5oYXNFeHBlcmllbmNlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdlcnJvcicsXG4gICAgICB0aXRsZTogJ0V4cGVyaWVuY2UgTm90IEZvdW5kJyxcbiAgICAgIG1lc3NhZ2U6ICdXZSBjb3VsZG5cXCd0IGZpbmQgYW55IHdvcmsgZXhwZXJpZW5jZSBpbiB5b3VyIHJlc3VtZS4gVGhpcyBpcyByZXF1aXJlZCBmb3IgdGFpbG9yaW5nLicsXG4gICAgICBhY3Rpb25zOiBbXG4gICAgICAgIHsgbGFiZWw6ICdQYXN0ZSBXb3JrIEhpc3RvcnknLCBhY3Rpb246ICdwYXN0ZV9leHBlcmllbmNlJyB9LFxuICAgICAgICB7IGxhYmVsOiAnTWFyayBMaW5lcyBhcyBFeHBlcmllbmNlJywgYWN0aW9uOiAnbWFya19leHBlcmllbmNlJyB9LFxuICAgICAgICB7IGxhYmVsOiAnVHJ5IERpZmZlcmVudCBSZXN1bWUnLCBhY3Rpb246ICd1cGxvYWRfbmV3JyB9XG4gICAgICBdXG4gICAgfVxuICB9XG5cbiAgaWYgKHZhbGlkYXRpb24uZXhwZXJpZW5jZUNvdW50ID4gMCAmJiB2YWxpZGF0aW9uLmV4cGVyaWVuY2VDb3VudCA8IDIpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgdGl0bGU6ICdMaW1pdGVkIEV4cGVyaWVuY2UgRm91bmQnLFxuICAgICAgbWVzc2FnZTogYE9ubHkgJHt2YWxpZGF0aW9uLmV4cGVyaWVuY2VDb3VudH0gd29yayBleHBlcmllbmNlIGZvdW5kLiBNb3JlIGV4cGVyaWVuY2Ugd2lsbCBpbXByb3ZlIHRhaWxvcmluZyByZXN1bHRzLmAsXG4gICAgICBhY3Rpb25zOiBbXG4gICAgICAgIHsgbGFiZWw6ICdBZGQgTW9yZSBFeHBlcmllbmNlJywgYWN0aW9uOiAnYWRkX2V4cGVyaWVuY2UnIH0sXG4gICAgICAgIHsgbGFiZWw6ICdDb250aW51ZSBBbnl3YXknLCBhY3Rpb246ICdjb250aW51ZScgfVxuICAgICAgXVxuICAgIH1cbiAgfVxuXG4gIGlmICghdmFsaWRhdGlvbi5oYXNTa2lsbHMpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdHlwZTogJ3dhcm5pbmcnLFxuICAgICAgdGl0bGU6ICdTa2lsbHMgU2VjdGlvbiBNaXNzaW5nJyxcbiAgICAgIG1lc3NhZ2U6ICdObyBza2lsbHMgc2VjdGlvbiBkZXRlY3RlZC4gQWRkaW5nIHNraWxscyB3aWxsIGltcHJvdmUgQVRTIGNvbXBhdGliaWxpdHkuJyxcbiAgICAgIGFjdGlvbnM6IFtcbiAgICAgICAgeyBsYWJlbDogJ0FkZCBTa2lsbHMnLCBhY3Rpb246ICdhZGRfc2tpbGxzJyB9LFxuICAgICAgICB7IGxhYmVsOiAnQ29udGludWUgV2l0aG91dCBTa2lsbHMnLCBhY3Rpb246ICdjb250aW51ZScgfVxuICAgICAgXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB7XG4gICAgdHlwZTogJ3N1Y2Nlc3MnLFxuICAgIHRpdGxlOiAnUmVzdW1lIFBhcnNlZCBTdWNjZXNzZnVsbHknLFxuICAgIG1lc3NhZ2U6ICdZb3VyIHJlc3VtZSBoYXMgYmVlbiBwYXJzZWQgYW5kIGlzIHJlYWR5IGZvciB0YWlsb3JpbmcuJyxcbiAgICBhY3Rpb25zOiBbXG4gICAgICB7IGxhYmVsOiAnQ29udGludWUgdG8gVGFpbG9yaW5nJywgYWN0aW9uOiAnY29udGludWUnIH1cbiAgICBdXG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJ2YWxpZGF0ZVBhcnNpbmdSZXN1bHQiLCJyZXN1bWUiLCJyZXN1bHQiLCJpc1ZhbGlkIiwiaGFzRXhwZXJpZW5jZSIsImhhc1NraWxscyIsImhhc1N1bW1hcnkiLCJleHBlcmllbmNlQ291bnQiLCJza2lsbHNDb3VudCIsInN1bW1hcnlMZW5ndGgiLCJlcnJvcnMiLCJ3YXJuaW5ncyIsInN1Z2dlc3Rpb25zIiwiZXhwZXJpZW5jZSIsImxlbmd0aCIsImhhc01lYW5pbmdmdWxFeHBlcmllbmNlIiwic29tZSIsImV4cCIsImJ1bGxldHMiLCJwdXNoIiwic2tpbGxzIiwic3VtbWFyeSIsInRyaW0iLCJzaG91bGRTaG93RXhwZXJpZW5jZUJhbm5lciIsInZhbGlkYXRpb24iLCJzaG91bGRTaG93U2tpbGxzQmFubmVyIiwic2hvdWxkU2hvd1N1bW1hcnlCYW5uZXIiLCJjcmVhdGVFcnJvclN0YXRlIiwidHlwZSIsInRpdGxlIiwibWVzc2FnZSIsImFjdGlvbnMiLCJsYWJlbCIsImFjdGlvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/parsing-validation.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prompts.ts":
/*!************************!*\
  !*** ./lib/prompts.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT),\n/* harmony export */   makeUserPrompt: () => (/* binding */ makeUserPrompt)\n/* harmony export */ });\nconst SYSTEM_PROMPT = `You are a resume tailoring assistant. You must never invent employment, responsibilities, or metrics not present in the user's resume.\nYou may rephrase and reorder text, emphasize relevant achievements, insert synonyms and role-specific keywords ONLY IF they are consistent with the original experience.\nTarget: ATS-friendly, concise impact bullets: Action verb + what + tools/skills + measurable outcome or scope.\nBullets must be 12 lines each, no first-person, no fluff.\nPolicy: absolutely no fabricated credentials, roles, companies, tools, or metrics.`;\nfunction makeUserPrompt({ resume_json, job_text, tone }) {\n    return `RESUME (STRUCTURED JSON):\n${JSON.stringify(resume_json)}\n\nJOB DESCRIPTION:\n${job_text}\n\nTASKS:\n1) Identify top 10 skills/keywords in the JD.\n2) For each experience bullet in the resume, rewrite it to align with the JD when truthful.\n3) If a bullet is irrelevant to the JD, compress or remove it.\n4) Do NOT introduce new employers, roles, or fabricated metrics. If metric unknown, keep qualitative impact.\n5) Return:\n{\n  \"skills_matched\": [...],\n  \"skills_missing_but_relevant\": [...],\n  \"summary\": \"2-3 lines tailored to JD, no I/Me\",\n  \"experience\": [\n    {\"company\": \"...\",\"role\":\"...\",\"dates\":\"...\",\"bullets\":[ \"...\", \"...\", \"...\" ]},\n    ...\n  ],\n  \"skills_section\": [\"...\"],\n  \"notes_to_user\": [\"Flagged ambiguity...\", \"Consider adding ... if true\"]\n}\n\nTONE: ${tone}\nIf the JOB DESCRIPTION content is very short (< 400 chars), only optimize wording and ordering; do not add any new keywords beyond what appears in the resume or JD.\nReturn JSON exactly in the specified schema; no extra keys.`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvbXB0cy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLGdCQUFnQixDQUFDOzs7O2tGQUlvRCxDQUFDO0FBRTVFLFNBQVNDLGVBQWUsRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBdUQ7SUFDakgsT0FBTyxDQUFDO0FBQ1YsRUFBRUMsS0FBS0MsU0FBUyxDQUFDSixhQUFhOzs7QUFHOUIsRUFBRUMsU0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUFvQkwsRUFBRUMsS0FBSzs7MkRBRThDLENBQUM7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vbGliL3Byb21wdHMudHM/YzE1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU1lTVEVNX1BST01QVCA9IGBZb3UgYXJlIGEgcmVzdW1lIHRhaWxvcmluZyBhc3Npc3RhbnQuIFlvdSBtdXN0IG5ldmVyIGludmVudCBlbXBsb3ltZW50LCByZXNwb25zaWJpbGl0aWVzLCBvciBtZXRyaWNzIG5vdCBwcmVzZW50IGluIHRoZSB1c2VyJ3MgcmVzdW1lLlxuWW91IG1heSByZXBocmFzZSBhbmQgcmVvcmRlciB0ZXh0LCBlbXBoYXNpemUgcmVsZXZhbnQgYWNoaWV2ZW1lbnRzLCBpbnNlcnQgc3lub255bXMgYW5kIHJvbGUtc3BlY2lmaWMga2V5d29yZHMgT05MWSBJRiB0aGV5IGFyZSBjb25zaXN0ZW50IHdpdGggdGhlIG9yaWdpbmFsIGV4cGVyaWVuY2UuXG5UYXJnZXQ6IEFUUy1mcmllbmRseSwgY29uY2lzZSBpbXBhY3QgYnVsbGV0czogQWN0aW9uIHZlcmIgKyB3aGF0ICsgdG9vbHMvc2tpbGxzICsgbWVhc3VyYWJsZSBvdXRjb21lIG9yIHNjb3BlLlxuQnVsbGV0cyBtdXN0IGJlIDHigJMyIGxpbmVzIGVhY2gsIG5vIGZpcnN0LXBlcnNvbiwgbm8gZmx1ZmYuXG5Qb2xpY3k6IGFic29sdXRlbHkgbm8gZmFicmljYXRlZCBjcmVkZW50aWFscywgcm9sZXMsIGNvbXBhbmllcywgdG9vbHMsIG9yIG1ldHJpY3MuYFxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVVzZXJQcm9tcHQoeyByZXN1bWVfanNvbiwgam9iX3RleHQsIHRvbmUgfTp7IHJlc3VtZV9qc29uOiBhbnksIGpvYl90ZXh0OiBzdHJpbmcsIHRvbmU6IHN0cmluZyB9KSB7XG4gIHJldHVybiBgUkVTVU1FIChTVFJVQ1RVUkVEIEpTT04pOlxuJHtKU09OLnN0cmluZ2lmeShyZXN1bWVfanNvbil9XG5cbkpPQiBERVNDUklQVElPTjpcbiR7am9iX3RleHR9XG5cblRBU0tTOlxuMSkgSWRlbnRpZnkgdG9wIDEwIHNraWxscy9rZXl3b3JkcyBpbiB0aGUgSkQuXG4yKSBGb3IgZWFjaCBleHBlcmllbmNlIGJ1bGxldCBpbiB0aGUgcmVzdW1lLCByZXdyaXRlIGl0IHRvIGFsaWduIHdpdGggdGhlIEpEIHdoZW4gdHJ1dGhmdWwuXG4zKSBJZiBhIGJ1bGxldCBpcyBpcnJlbGV2YW50IHRvIHRoZSBKRCwgY29tcHJlc3Mgb3IgcmVtb3ZlIGl0LlxuNCkgRG8gTk9UIGludHJvZHVjZSBuZXcgZW1wbG95ZXJzLCByb2xlcywgb3IgZmFicmljYXRlZCBtZXRyaWNzLiBJZiBtZXRyaWMgdW5rbm93biwga2VlcCBxdWFsaXRhdGl2ZSBpbXBhY3QuXG41KSBSZXR1cm46XG57XG4gIFwic2tpbGxzX21hdGNoZWRcIjogWy4uLl0sXG4gIFwic2tpbGxzX21pc3NpbmdfYnV0X3JlbGV2YW50XCI6IFsuLi5dLFxuICBcInN1bW1hcnlcIjogXCIyLTMgbGluZXMgdGFpbG9yZWQgdG8gSkQsIG5vIEkvTWVcIixcbiAgXCJleHBlcmllbmNlXCI6IFtcbiAgICB7XCJjb21wYW55XCI6IFwiLi4uXCIsXCJyb2xlXCI6XCIuLi5cIixcImRhdGVzXCI6XCIuLi5cIixcImJ1bGxldHNcIjpbIFwiLi4uXCIsIFwiLi4uXCIsIFwiLi4uXCIgXX0sXG4gICAgLi4uXG4gIF0sXG4gIFwic2tpbGxzX3NlY3Rpb25cIjogW1wiLi4uXCJdLFxuICBcIm5vdGVzX3RvX3VzZXJcIjogW1wiRmxhZ2dlZCBhbWJpZ3VpdHkuLi5cIiwgXCJDb25zaWRlciBhZGRpbmcgLi4uIGlmIHRydWVcIl1cbn1cblxuVE9ORTogJHt0b25lfVxuSWYgdGhlIEpPQiBERVNDUklQVElPTiBjb250ZW50IGlzIHZlcnkgc2hvcnQgKDwgNDAwIGNoYXJzKSwgb25seSBvcHRpbWl6ZSB3b3JkaW5nIGFuZCBvcmRlcmluZzsgZG8gbm90IGFkZCBhbnkgbmV3IGtleXdvcmRzIGJleW9uZCB3aGF0IGFwcGVhcnMgaW4gdGhlIHJlc3VtZSBvciBKRC5cblJldHVybiBKU09OIGV4YWN0bHkgaW4gdGhlIHNwZWNpZmllZCBzY2hlbWE7IG5vIGV4dHJhIGtleXMuYFxufVxuIl0sIm5hbWVzIjpbIlNZU1RFTV9QUk9NUFQiLCJtYWtlVXNlclByb21wdCIsInJlc3VtZV9qc29uIiwiam9iX3RleHQiLCJ0b25lIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prompts.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schemas.ts":
/*!************************!*\
  !*** ./lib/schemas.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   TailoredResultSchema: () => (/* binding */ TailoredResultSchema),\n/* harmony export */   coerceTailoredResult: () => (/* binding */ coerceTailoredResult),\n/* harmony export */   validateTailoredResult: () => (/* binding */ validateTailoredResult)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\nconst RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    company: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Company name is required\"),\n    role: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Role title is required\"),\n    dates: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().default(\"\"),\n    bullets: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Bullet point cannot be empty\")).max(12, \"Too many bullet points\")\n}).strict();\nconst TailoredResultSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    skills_matched: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([]),\n    skills_missing_but_relevant: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([]),\n    summary: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Summary is required\").optional().default(\"\"),\n    experience: zod__WEBPACK_IMPORTED_MODULE_0__.array(RoleSchema).min(0, \"Experience array is required\"),\n    skills_section: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Skill cannot be empty\")).min(0, \"Skills array is required\"),\n    notes_to_user: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([])\n}).strict();\n// Enhanced validation with detailed error reporting\nfunction validateTailoredResult(data) {\n    try {\n        const result = TailoredResultSchema.parse(data);\n        return {\n            valid: true,\n            data: result,\n            errors: []\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            const errors = error.errors.map((err)=>{\n                const path = err.path.join(\".\");\n                return `${path}: ${err.message}`;\n            });\n            return {\n                valid: false,\n                errors\n            };\n        }\n        return {\n            valid: false,\n            errors: [\n                String(error)\n            ]\n        };\n    }\n}\n// Coercion helpers for common data issues\nfunction coerceTailoredResult(data) {\n    const coerced = {};\n    // Coerce summary\n    coerced.summary = typeof data.summary === \"string\" ? data.summary.trim() : \"\";\n    // Coerce skills_section\n    if (Array.isArray(data.skills_section)) {\n        coerced.skills_section = data.skills_section.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else if (typeof data.skills_section === \"string\") {\n        coerced.skills_section = data.skills_section.split(/[,;|\\n]/).map((s)=>s.trim()).filter((s)=>s.length > 0);\n    } else {\n        coerced.skills_section = [];\n    }\n    // Coerce experience\n    if (Array.isArray(data.experience)) {\n        coerced.experience = data.experience.map((exp)=>coerceRole(exp)).filter(Boolean);\n    } else {\n        coerced.experience = [];\n    }\n    // Coerce optional fields\n    coerced.skills_matched = Array.isArray(data.skills_matched) ? data.skills_matched : [];\n    coerced.skills_missing_but_relevant = Array.isArray(data.skills_missing_but_relevant) ? data.skills_missing_but_relevant : [];\n    coerced.notes_to_user = Array.isArray(data.notes_to_user) ? data.notes_to_user : [];\n    return coerced;\n}\nfunction coerceRole(exp) {\n    if (!exp || typeof exp !== \"object\") return null;\n    return {\n        company: typeof exp.company === \"string\" ? exp.company.trim() : \"Unknown Company\",\n        role: typeof exp.role === \"string\" ? exp.role.trim() : \"Unknown Role\",\n        dates: typeof exp.dates === \"string\" ? exp.dates.trim() : \"\",\n        bullets: Array.isArray(exp.bullets) ? exp.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUEsRUFBRVgsSUFBSSxHQUFHSyxNQUFNLEdBQUcsR0FBR2IsR0FBRyxDQUFDbUIsQ0FBQUEsSUFBS0EsRUFBRVgsSUFBSSxNQUNyRixFQUFFO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvc2NoZW1hcy50cz80NWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbmV4cG9ydCBjb25zdCBSb2xlU2NoZW1hID0gei5vYmplY3Qoe1xuICBjb21wYW55OiB6LnN0cmluZygpLm1pbigxLCAnQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkJyksXG4gIHJvbGU6IHouc3RyaW5nKCkubWluKDEsICdSb2xlIHRpdGxlIGlzIHJlcXVpcmVkJyksXG4gIGRhdGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdCgnJyksXG4gIGJ1bGxldHM6IHouYXJyYXkoei5zdHJpbmcoKS5taW4oMSwgJ0J1bGxldCBwb2ludCBjYW5ub3QgYmUgZW1wdHknKSkubWF4KDEyLCAnVG9vIG1hbnkgYnVsbGV0IHBvaW50cycpXG59KS5zdHJpY3QoKVxuXG5leHBvcnQgY29uc3QgVGFpbG9yZWRSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHNraWxsc19tYXRjaGVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksXG4gIHNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudDogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pLFxuICBzdW1tYXJ5OiB6LnN0cmluZygpLm1pbigxLCAnU3VtbWFyeSBpcyByZXF1aXJlZCcpLm9wdGlvbmFsKCkuZGVmYXVsdCgnJyksXG4gIGV4cGVyaWVuY2U6IHouYXJyYXkoUm9sZVNjaGVtYSkubWluKDAsICdFeHBlcmllbmNlIGFycmF5IGlzIHJlcXVpcmVkJyksXG4gIHNraWxsc19zZWN0aW9uOiB6LmFycmF5KHouc3RyaW5nKCkubWluKDEsICdTa2lsbCBjYW5ub3QgYmUgZW1wdHknKSkubWluKDAsICdTa2lsbHMgYXJyYXkgaXMgcmVxdWlyZWQnKSxcbiAgbm90ZXNfdG9fdXNlcjogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pXG59KS5zdHJpY3QoKVxuXG5leHBvcnQgdHlwZSBUYWlsb3JlZFJlc3VsdFR5cGUgPSB6LmluZmVyPHR5cGVvZiBUYWlsb3JlZFJlc3VsdFNjaGVtYT5cblxuLy8gRW5oYW5jZWQgdmFsaWRhdGlvbiB3aXRoIGRldGFpbGVkIGVycm9yIHJlcG9ydGluZ1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVGFpbG9yZWRSZXN1bHQoZGF0YTogYW55KTogeyBcbiAgdmFsaWQ6IGJvb2xlYW4sIFxuICBkYXRhPzogVGFpbG9yZWRSZXN1bHRUeXBlLCBcbiAgZXJyb3JzOiBzdHJpbmdbXSBcbn0ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFRhaWxvcmVkUmVzdWx0U2NoZW1hLnBhcnNlKGRhdGEpXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IHJlc3VsdCwgZXJyb3JzOiBbXSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JzID0gZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gZXJyLnBhdGguam9pbignLicpXG4gICAgICAgIHJldHVybiBgJHtwYXRofTogJHtlcnIubWVzc2FnZX1gXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcnMgfVxuICAgIH1cbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yczogW1N0cmluZyhlcnJvcildIH1cbiAgfVxufVxuXG4vLyBDb2VyY2lvbiBoZWxwZXJzIGZvciBjb21tb24gZGF0YSBpc3N1ZXNcbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VUYWlsb3JlZFJlc3VsdChkYXRhOiBhbnkpOiBUYWlsb3JlZFJlc3VsdFR5cGUge1xuICBjb25zdCBjb2VyY2VkOiBhbnkgPSB7fVxuICBcbiAgLy8gQ29lcmNlIHN1bW1hcnlcbiAgY29lcmNlZC5zdW1tYXJ5ID0gdHlwZW9mIGRhdGEuc3VtbWFyeSA9PT0gJ3N0cmluZycgPyBkYXRhLnN1bW1hcnkudHJpbSgpIDogJydcbiAgXG4gIC8vIENvZXJjZSBza2lsbHNfc2VjdGlvblxuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLnNraWxsc19zZWN0aW9uKSkge1xuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBkYXRhLnNraWxsc19zZWN0aW9uXG4gICAgICAuZmlsdGVyKHNraWxsID0+IHR5cGVvZiBza2lsbCA9PT0gJ3N0cmluZycgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAubWFwKHNraWxsID0+IHNraWxsLnRyaW0oKSlcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YS5za2lsbHNfc2VjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2VyY2VkLnNraWxsc19zZWN0aW9uID0gZGF0YS5za2lsbHNfc2VjdGlvblxuICAgICAgLnNwbGl0KC9bLDt84oCiXFxuXS8pXG4gICAgICAubWFwKHMgPT4gcy50cmltKCkpXG4gICAgICAuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKVxuICB9IGVsc2Uge1xuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBbXVxuICB9XG4gIFxuICAvLyBDb2VyY2UgZXhwZXJpZW5jZVxuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLmV4cGVyaWVuY2UpKSB7XG4gICAgY29lcmNlZC5leHBlcmllbmNlID0gZGF0YS5leHBlcmllbmNlLm1hcChleHAgPT4gY29lcmNlUm9sZShleHApKS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLmV4cGVyaWVuY2UgPSBbXVxuICB9XG4gIFxuICAvLyBDb2VyY2Ugb3B0aW9uYWwgZmllbGRzXG4gIGNvZXJjZWQuc2tpbGxzX21hdGNoZWQgPSBBcnJheS5pc0FycmF5KGRhdGEuc2tpbGxzX21hdGNoZWQpID8gZGF0YS5za2lsbHNfbWF0Y2hlZCA6IFtdXG4gIGNvZXJjZWQuc2tpbGxzX21pc3NpbmdfYnV0X3JlbGV2YW50ID0gQXJyYXkuaXNBcnJheShkYXRhLnNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCkgPyBkYXRhLnNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCA6IFtdXG4gIGNvZXJjZWQubm90ZXNfdG9fdXNlciA9IEFycmF5LmlzQXJyYXkoZGF0YS5ub3Rlc190b191c2VyKSA/IGRhdGEubm90ZXNfdG9fdXNlciA6IFtdXG4gIFxuICByZXR1cm4gY29lcmNlZCBhcyBUYWlsb3JlZFJlc3VsdFR5cGVcbn1cblxuZnVuY3Rpb24gY29lcmNlUm9sZShleHA6IGFueSk6IGFueSB7XG4gIGlmICghZXhwIHx8IHR5cGVvZiBleHAgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbFxuICBcbiAgcmV0dXJuIHtcbiAgICBjb21wYW55OiB0eXBlb2YgZXhwLmNvbXBhbnkgPT09ICdzdHJpbmcnID8gZXhwLmNvbXBhbnkudHJpbSgpIDogJ1Vua25vd24gQ29tcGFueScsXG4gICAgcm9sZTogdHlwZW9mIGV4cC5yb2xlID09PSAnc3RyaW5nJyA/IGV4cC5yb2xlLnRyaW0oKSA6ICdVbmtub3duIFJvbGUnLFxuICAgIGRhdGVzOiB0eXBlb2YgZXhwLmRhdGVzID09PSAnc3RyaW5nJyA/IGV4cC5kYXRlcy50cmltKCkgOiAnJyxcbiAgICBidWxsZXRzOiBBcnJheS5pc0FycmF5KGV4cC5idWxsZXRzKSBcbiAgICAgID8gZXhwLmJ1bGxldHMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT09ICdzdHJpbmcnICYmIGIudHJpbSgpLmxlbmd0aCA+IDApLm1hcChiID0+IGIudHJpbSgpKVxuICAgICAgOiBbXVxuICB9XG59XG4iXSwibmFtZXMiOlsieiIsIlJvbGVTY2hlbWEiLCJvYmplY3QiLCJjb21wYW55Iiwic3RyaW5nIiwibWluIiwicm9sZSIsImRhdGVzIiwib3B0aW9uYWwiLCJkZWZhdWx0IiwiYnVsbGV0cyIsImFycmF5IiwibWF4Iiwic3RyaWN0IiwiVGFpbG9yZWRSZXN1bHRTY2hlbWEiLCJza2lsbHNfbWF0Y2hlZCIsInNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCIsInN1bW1hcnkiLCJleHBlcmllbmNlIiwic2tpbGxzX3NlY3Rpb24iLCJub3Rlc190b191c2VyIiwidmFsaWRhdGVUYWlsb3JlZFJlc3VsdCIsImRhdGEiLCJyZXN1bHQiLCJwYXJzZSIsInZhbGlkIiwiZXJyb3JzIiwiZXJyb3IiLCJab2RFcnJvciIsIm1hcCIsImVyciIsInBhdGgiLCJqb2luIiwibWVzc2FnZSIsIlN0cmluZyIsImNvZXJjZVRhaWxvcmVkUmVzdWx0IiwiY29lcmNlZCIsInRyaW0iLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJza2lsbCIsImxlbmd0aCIsInNwbGl0IiwicyIsImV4cCIsImNvZXJjZVJvbGUiLCJCb29sZWFuIiwiYiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schemas.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sessions.ts":
/*!*************************!*\
  !*** ./lib/sessions.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionVersion: () => (/* binding */ getSessionVersion),\n/* harmony export */   updateSession: () => (/* binding */ updateSession),\n/* harmony export */   validateSessionVersion: () => (/* binding */ validateSessionVersion)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\nconst store = new Map();\nfunction purgeExpired(ttlMs = 60 * 60 * 1000) {\n    const now = Date.now();\n    for (const [id, s] of store){\n        if (now - s.createdAt > ttlMs) store.delete(id);\n    }\n}\nfunction createSession(original, tailored, jdText, keywordStats) {\n    purgeExpired();\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    const version = generateSessionVersion(original, tailored);\n    const s = {\n        id,\n        version,\n        createdAt: Date.now(),\n        original,\n        tailored,\n        jdText,\n        keywordStats\n    };\n    store.set(id, s);\n    return s;\n}\nfunction getSession(id) {\n    purgeExpired();\n    const s = store.get(id);\n    if (!s) return null;\n    if (Date.now() - s.createdAt > 60 * 60 * 1000) {\n        store.delete(id);\n        return null;\n    }\n    return s;\n}\nfunction updateSession(id, updates) {\n    const s = store.get(id);\n    if (!s) return null;\n    const updated = {\n        ...s,\n        ...updates\n    };\n    if (updates.original || updates.tailored) {\n        updated.version = generateSessionVersion(updated.original, updated.tailored);\n    }\n    store.set(id, updated);\n    return updated;\n}\nfunction deleteSession(id) {\n    return store.delete(id);\n}\nfunction getSessionVersion(id) {\n    const s = getSession(id);\n    return s ? s.version : null;\n}\nfunction generateSessionVersion(original, tailored) {\n    // Create a hash of the content to detect changes\n    const content = JSON.stringify({\n        original,\n        tailored\n    });\n    return btoa(content).slice(0, 16) // Simple hash, first 16 chars\n    ;\n}\nfunction validateSessionVersion(id, providedVersion) {\n    const currentVersion = getSessionVersion(id);\n    return currentVersion === providedVersion;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2Vzc2lvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpQztBQWFqQyxNQUFNRSxRQUFRLElBQUlDO0FBRWxCLFNBQVNDLGFBQWFDLFFBQVEsS0FBSyxLQUFLLElBQUk7SUFDMUMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixLQUFLLE1BQU0sQ0FBQ0UsSUFBSUMsRUFBRSxJQUFJUCxNQUFPO1FBQzNCLElBQUlJLE1BQU1HLEVBQUVDLFNBQVMsR0FBR0wsT0FBT0gsTUFBTVMsTUFBTSxDQUFDSDtJQUM5QztBQUNGO0FBRU8sU0FBU0ksY0FBY0MsUUFBb0IsRUFBRUMsUUFBd0IsRUFBRUMsTUFBYyxFQUFFQyxZQUEwQjtJQUN0SFo7SUFDQSxNQUFNSSxLQUFLUCxnREFBSUE7SUFDZixNQUFNZ0IsVUFBVUMsdUJBQXVCTCxVQUFVQztJQUNqRCxNQUFNTCxJQUFhO1FBQUVEO1FBQUlTO1FBQVNQLFdBQVdILEtBQUtELEdBQUc7UUFBSU87UUFBVUM7UUFBVUM7UUFBUUM7SUFBYTtJQUNsR2QsTUFBTWlCLEdBQUcsQ0FBQ1gsSUFBSUM7SUFDZCxPQUFPQTtBQUNUO0FBRU8sU0FBU1csV0FBV1osRUFBVTtJQUNuQ0o7SUFDQSxNQUFNSyxJQUFJUCxNQUFNbUIsR0FBRyxDQUFDYjtJQUNwQixJQUFJLENBQUNDLEdBQUcsT0FBTztJQUNmLElBQUlGLEtBQUtELEdBQUcsS0FBS0csRUFBRUMsU0FBUyxHQUFHLEtBQUssS0FBSyxNQUFNO1FBQzdDUixNQUFNUyxNQUFNLENBQUNIO1FBQ2IsT0FBTztJQUNUO0lBQ0EsT0FBT0M7QUFDVDtBQUVPLFNBQVNhLGNBQWNkLEVBQVUsRUFBRWUsT0FBeUI7SUFDakUsTUFBTWQsSUFBSVAsTUFBTW1CLEdBQUcsQ0FBQ2I7SUFDcEIsSUFBSSxDQUFDQyxHQUFHLE9BQU87SUFFZixNQUFNZSxVQUFVO1FBQUUsR0FBR2YsQ0FBQztRQUFFLEdBQUdjLE9BQU87SUFBQztJQUNuQyxJQUFJQSxRQUFRVixRQUFRLElBQUlVLFFBQVFULFFBQVEsRUFBRTtRQUN4Q1UsUUFBUVAsT0FBTyxHQUFHQyx1QkFBdUJNLFFBQVFYLFFBQVEsRUFBRVcsUUFBUVYsUUFBUTtJQUM3RTtJQUVBWixNQUFNaUIsR0FBRyxDQUFDWCxJQUFJZ0I7SUFDZCxPQUFPQTtBQUNUO0FBRU8sU0FBU0MsY0FBY2pCLEVBQVU7SUFDdEMsT0FBT04sTUFBTVMsTUFBTSxDQUFDSDtBQUN0QjtBQUVPLFNBQVNrQixrQkFBa0JsQixFQUFVO0lBQzFDLE1BQU1DLElBQUlXLFdBQVdaO0lBQ3JCLE9BQU9DLElBQUlBLEVBQUVRLE9BQU8sR0FBRztBQUN6QjtBQUVBLFNBQVNDLHVCQUF1QkwsUUFBb0IsRUFBRUMsUUFBd0I7SUFDNUUsaURBQWlEO0lBQ2pELE1BQU1hLFVBQVVDLEtBQUtDLFNBQVMsQ0FBQztRQUFFaEI7UUFBVUM7SUFBUztJQUNwRCxPQUFPZ0IsS0FBS0gsU0FBU0ksS0FBSyxDQUFDLEdBQUcsSUFBSSw4QkFBOEI7O0FBQ2xFO0FBRU8sU0FBU0MsdUJBQXVCeEIsRUFBVSxFQUFFeUIsZUFBdUI7SUFDeEUsTUFBTUMsaUJBQWlCUixrQkFBa0JsQjtJQUN6QyxPQUFPMEIsbUJBQW1CRDtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvc2Vzc2lvbnMudHM/MWY5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCdcbmltcG9ydCB7IFJlc3VtZUpTT04sIFRhaWxvcmVkUmVzdWx0LCBLZXl3b3JkU3RhdHMgfSBmcm9tICcuL3R5cGVzJ1xuXG50eXBlIFNlc3Npb24gPSB7XG4gIGlkOiBzdHJpbmdcbiAgdmVyc2lvbjogc3RyaW5nXG4gIGNyZWF0ZWRBdDogbnVtYmVyXG4gIG9yaWdpbmFsOiBSZXN1bWVKU09OXG4gIHRhaWxvcmVkOiBUYWlsb3JlZFJlc3VsdFxuICBqZFRleHQ6IHN0cmluZ1xuICBrZXl3b3JkU3RhdHM6IEtleXdvcmRTdGF0c1xufVxuXG5jb25zdCBzdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBTZXNzaW9uPigpXG5cbmZ1bmN0aW9uIHB1cmdlRXhwaXJlZCh0dGxNcyA9IDYwICogNjAgKiAxMDAwKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgZm9yIChjb25zdCBbaWQsIHNdIG9mIHN0b3JlKSB7XG4gICAgaWYgKG5vdyAtIHMuY3JlYXRlZEF0ID4gdHRsTXMpIHN0b3JlLmRlbGV0ZShpZClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbihvcmlnaW5hbDogUmVzdW1lSlNPTiwgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0LCBqZFRleHQ6IHN0cmluZywga2V5d29yZFN0YXRzOiBLZXl3b3JkU3RhdHMpIHtcbiAgcHVyZ2VFeHBpcmVkKClcbiAgY29uc3QgaWQgPSB1dWlkKClcbiAgY29uc3QgdmVyc2lvbiA9IGdlbmVyYXRlU2Vzc2lvblZlcnNpb24ob3JpZ2luYWwsIHRhaWxvcmVkKVxuICBjb25zdCBzOiBTZXNzaW9uID0geyBpZCwgdmVyc2lvbiwgY3JlYXRlZEF0OiBEYXRlLm5vdygpLCBvcmlnaW5hbCwgdGFpbG9yZWQsIGpkVGV4dCwga2V5d29yZFN0YXRzIH1cbiAgc3RvcmUuc2V0KGlkLCBzKVxuICByZXR1cm4gc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Vzc2lvbihpZDogc3RyaW5nKSB7XG4gIHB1cmdlRXhwaXJlZCgpXG4gIGNvbnN0IHMgPSBzdG9yZS5nZXQoaWQpXG4gIGlmICghcykgcmV0dXJuIG51bGxcbiAgaWYgKERhdGUubm93KCkgLSBzLmNyZWF0ZWRBdCA+IDYwICogNjAgKiAxMDAwKSB7XG4gICAgc3RvcmUuZGVsZXRlKGlkKVxuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNlc3Npb24oaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxTZXNzaW9uPikge1xuICBjb25zdCBzID0gc3RvcmUuZ2V0KGlkKVxuICBpZiAoIXMpIHJldHVybiBudWxsXG4gIFxuICBjb25zdCB1cGRhdGVkID0geyAuLi5zLCAuLi51cGRhdGVzIH1cbiAgaWYgKHVwZGF0ZXMub3JpZ2luYWwgfHwgdXBkYXRlcy50YWlsb3JlZCkge1xuICAgIHVwZGF0ZWQudmVyc2lvbiA9IGdlbmVyYXRlU2Vzc2lvblZlcnNpb24odXBkYXRlZC5vcmlnaW5hbCwgdXBkYXRlZC50YWlsb3JlZClcbiAgfVxuICBcbiAgc3RvcmUuc2V0KGlkLCB1cGRhdGVkKVxuICByZXR1cm4gdXBkYXRlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihpZDogc3RyaW5nKSB7XG4gIHJldHVybiBzdG9yZS5kZWxldGUoaWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXNzaW9uVmVyc2lvbihpZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHMgPSBnZXRTZXNzaW9uKGlkKVxuICByZXR1cm4gcyA/IHMudmVyc2lvbiA6IG51bGxcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTZXNzaW9uVmVyc2lvbihvcmlnaW5hbDogUmVzdW1lSlNPTiwgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0KTogc3RyaW5nIHtcbiAgLy8gQ3JlYXRlIGEgaGFzaCBvZiB0aGUgY29udGVudCB0byBkZXRlY3QgY2hhbmdlc1xuICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoeyBvcmlnaW5hbCwgdGFpbG9yZWQgfSlcbiAgcmV0dXJuIGJ0b2EoY29udGVudCkuc2xpY2UoMCwgMTYpIC8vIFNpbXBsZSBoYXNoLCBmaXJzdCAxNiBjaGFyc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uVmVyc2lvbihpZDogc3RyaW5nLCBwcm92aWRlZFZlcnNpb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGdldFNlc3Npb25WZXJzaW9uKGlkKVxuICByZXR1cm4gY3VycmVudFZlcnNpb24gPT09IHByb3ZpZGVkVmVyc2lvblxufVxuIl0sIm5hbWVzIjpbInY0IiwidXVpZCIsInN0b3JlIiwiTWFwIiwicHVyZ2VFeHBpcmVkIiwidHRsTXMiLCJub3ciLCJEYXRlIiwiaWQiLCJzIiwiY3JlYXRlZEF0IiwiZGVsZXRlIiwiY3JlYXRlU2Vzc2lvbiIsIm9yaWdpbmFsIiwidGFpbG9yZWQiLCJqZFRleHQiLCJrZXl3b3JkU3RhdHMiLCJ2ZXJzaW9uIiwiZ2VuZXJhdGVTZXNzaW9uVmVyc2lvbiIsInNldCIsImdldFNlc3Npb24iLCJnZXQiLCJ1cGRhdGVTZXNzaW9uIiwidXBkYXRlcyIsInVwZGF0ZWQiLCJkZWxldGVTZXNzaW9uIiwiZ2V0U2Vzc2lvblZlcnNpb24iLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImJ0b2EiLCJzbGljZSIsInZhbGlkYXRlU2Vzc2lvblZlcnNpb24iLCJwcm92aWRlZFZlcnNpb24iLCJjdXJyZW50VmVyc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/sessions.ts\n");

/***/ }),

/***/ "(rsc)/./lib/telemetry.ts":
/*!**************************!*\
  !*** ./lib/telemetry.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logAIResponse: () => (/* binding */ logAIResponse),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logPDFGeneration: () => (/* binding */ logPDFGeneration),\n/* harmony export */   logRequestTelemetry: () => (/* binding */ logRequestTelemetry),\n/* harmony export */   logSessionActivity: () => (/* binding */ logSessionActivity),\n/* harmony export */   startTrace: () => (/* binding */ startTrace)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\nconst TELEMETRY_PATH = \"/tmp/telemetry.jsonl\";\nconst AI_RESPONSES_PATH = \"/tmp/ai-responses.jsonl\";\nconst ERROR_LOG_PATH = \"/tmp/error-log.jsonl\";\nconst LOG_DRAIN_URL = process.env.LOG_DRAIN_URL || \"\";\nconst LOG_DRAIN_KEY = process.env.LOG_DRAIN_KEY || \"\";\nfunction startTrace(meta = {}) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const t0 = Date.now();\n    function end(ok, extra = {}) {\n        const rec = {\n            req_id: id,\n            route: meta.route || \"unknown\",\n            timing: Date.now() - t0,\n            timestamp: new Date().toISOString(),\n            final_status: ok ? \"success\" : \"error\",\n            ...meta,\n            ...extra\n        };\n        try {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(rec) + \"\\n\");\n        } catch (e) {\n            console.warn(\"Failed to write telemetry:\", e);\n        }\n        void sendToDrain(rec);\n        return rec;\n    }\n    return {\n        id,\n        end\n    };\n}\nfunction logAIResponse(attempt, success, error, responseLength, model) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"ai_response\",\n        attempt,\n        success,\n        error: error?.substring(0, 500),\n        responseLength,\n        model: model || process.env.OPENAI_MODEL || \"gpt-4o-mini\"\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(AI_RESPONSES_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log AI response:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logError(error, context = {}) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"error\",\n        message: error.message,\n        stack: error.stack,\n        context: JSON.stringify(context)\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(ERROR_LOG_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log error:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logPDFGeneration(attempt, success, error, method, size) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"pdf_generation\",\n        attempt,\n        success,\n        error: error?.substring(0, 500),\n        method,\n        size\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log PDF generation:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logSessionActivity(sessionId, activity, details = {}) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"session_activity\",\n        sessionId,\n        activity,\n        details: JSON.stringify(details)\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log session activity:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logRequestTelemetry(data) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"request_telemetry\",\n        ...data\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log request telemetry:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nasync function sendToDrain(entry) {\n    if (!LOG_DRAIN_URL) return;\n    try {\n        await fetch(LOG_DRAIN_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...LOG_DRAIN_KEY ? {\n                    \"Authorization\": `Bearer ${LOG_DRAIN_KEY}`\n                } : {}\n            },\n            body: JSON.stringify(entry)\n        });\n    } catch  {}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQztJQUN2RixNQUFNZCxXQUFXO1FBQ2ZoQixXQUFXLElBQUlULE9BQU9VLFdBQVc7UUFDakNnQixNQUFNO1FBQ05XO1FBQ0FDO1FBQ0FDLFNBQVMxQixLQUFLQyxTQUFTLENBQUN5QjtJQUMxQjtJQUVBLElBQUk7UUFDRnJELHdEQUFpQixDQUFDRyxnQkFBZ0J3QixLQUFLQyxTQUFTLENBQUNXLFlBQVk7SUFDL0QsRUFBRSxPQUFPVixHQUFHO1FBQ1ZDLFFBQVFDLElBQUksQ0FBQyxtQ0FBbUNGO0lBQ2xEO0lBQ0EsS0FBS0csWUFBWU87QUFDbkI7QUFFTyxTQUFTZSxvQkFBb0JDLElBWW5DO0lBQ0MsTUFBTWhCLFdBQVc7UUFDZmhCLFdBQVcsSUFBSVQsT0FBT1UsV0FBVztRQUNqQ2dCLE1BQU07UUFDTixHQUFHZSxJQUFJO0lBQ1Q7SUFFQSxJQUFJO1FBQ0Z2RCx3REFBaUIsQ0FBQ0csZ0JBQWdCd0IsS0FBS0MsU0FBUyxDQUFDVyxZQUFZO0lBQy9ELEVBQUUsT0FBT1YsR0FBRztRQUNWQyxRQUFRQyxJQUFJLENBQUMsb0NBQW9DRjtJQUNuRDtJQUNBLEtBQUtHLFlBQVlPO0FBQ25CO0FBRUEsZUFBZVAsWUFBWXdCLEtBQVU7SUFDbkMsSUFBSSxDQUFDbEQsZUFBZTtJQUNwQixJQUFJO1FBQ0YsTUFBTW1ELE1BQU1uRCxlQUFlO1lBQ3pCMEMsUUFBUTtZQUNSVSxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsR0FBSWpELGdCQUFnQjtvQkFBRSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVBLGNBQWMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztZQUN6RTtZQUNBa0QsTUFBTWhDLEtBQUtDLFNBQVMsQ0FBQzRCO1FBQ3ZCO0lBQ0YsRUFBRSxPQUFNLENBQUM7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvdGVsZW1ldHJ5LnRzPzJjNzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnXG5cbmNvbnN0IFRFTEVNRVRSWV9QQVRIID0gJy90bXAvdGVsZW1ldHJ5Lmpzb25sJ1xuY29uc3QgQUlfUkVTUE9OU0VTX1BBVEggPSAnL3RtcC9haS1yZXNwb25zZXMuanNvbmwnXG5jb25zdCBFUlJPUl9MT0dfUEFUSCA9ICcvdG1wL2Vycm9yLWxvZy5qc29ubCdcblxuY29uc3QgTE9HX0RSQUlOX1VSTCA9IHByb2Nlc3MuZW52LkxPR19EUkFJTl9VUkwgfHwgJydcbmNvbnN0IExPR19EUkFJTl9LRVkgPSBwcm9jZXNzLmVudi5MT0dfRFJBSU5fS0VZIHx8ICcnXG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFRyYWNlKG1ldGE6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGlkID0gdXVpZCgpXG4gIGNvbnN0IHQwID0gRGF0ZS5ub3coKVxuICBcbiAgZnVuY3Rpb24gZW5kKG9rOiBib29sZWFuLCBleHRyYTogYW55ID0ge30pIHtcbiAgICBjb25zdCByZWMgPSB7IFxuICAgICAgcmVxX2lkOiBpZCxcbiAgICAgIHJvdXRlOiBtZXRhLnJvdXRlIHx8ICd1bmtub3duJyxcbiAgICAgIHRpbWluZzogRGF0ZS5ub3coKSAtIHQwLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBmaW5hbF9zdGF0dXM6IG9rID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJyxcbiAgICAgIC4uLm1ldGEsIFxuICAgICAgLi4uZXh0cmEgXG4gICAgfVxuICAgIHRyeSB7IFxuICAgICAgZnMuYXBwZW5kRmlsZVN5bmMoVEVMRU1FVFJZX1BBVEgsIEpTT04uc3RyaW5naWZ5KHJlYykgKyAnXFxuJykgXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gd3JpdGUgdGVsZW1ldHJ5OicsIGUpXG4gICAgfVxuICAgIHZvaWQgc2VuZFRvRHJhaW4ocmVjKVxuICAgIHJldHVybiByZWNcbiAgfVxuICBcbiAgcmV0dXJuIHsgaWQsIGVuZCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dBSVJlc3BvbnNlKGF0dGVtcHQ6IG51bWJlciwgc3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHJlc3BvbnNlTGVuZ3RoPzogbnVtYmVyLCBtb2RlbD86IHN0cmluZykge1xuICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB0eXBlOiAnYWlfcmVzcG9uc2UnLFxuICAgIGF0dGVtcHQsXG4gICAgc3VjY2VzcyxcbiAgICBlcnJvcjogZXJyb3I/LnN1YnN0cmluZygwLCA1MDApLCAvLyBUcnVuY2F0ZSBsb25nIGVycm9yc1xuICAgIHJlc3BvbnNlTGVuZ3RoLFxuICAgIG1vZGVsOiBtb2RlbCB8fCBwcm9jZXNzLmVudi5PUEVOQUlfTU9ERUwgfHwgJ2dwdC00by1taW5pJ1xuICB9XG4gIFxuICB0cnkge1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKEFJX1JFU1BPTlNFU19QQVRILCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkgKyAnXFxuJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvZyBBSSByZXNwb25zZTonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dFcnJvcihlcnJvcjogRXJyb3IsIGNvbnRleHQ6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHR5cGU6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgY29udGV4dDogSlNPTi5zdHJpbmdpZnkoY29udGV4dClcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhFUlJPUl9MT0dfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgZXJyb3I6JywgZSlcbiAgfVxuICB2b2lkIHNlbmRUb0RyYWluKGxvZ0VudHJ5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nUERGR2VuZXJhdGlvbihhdHRlbXB0OiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCBtZXRob2Q/OiBzdHJpbmcsIHNpemU/OiBudW1iZXIpIHtcbiAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdHlwZTogJ3BkZl9nZW5lcmF0aW9uJyxcbiAgICBhdHRlbXB0LFxuICAgIHN1Y2Nlc3MsXG4gICAgZXJyb3I6IGVycm9yPy5zdWJzdHJpbmcoMCwgNTAwKSxcbiAgICBtZXRob2QsXG4gICAgc2l6ZVxuICB9XG4gIFxuICB0cnkge1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKFRFTEVNRVRSWV9QQVRILCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkgKyAnXFxuJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvZyBQREYgZ2VuZXJhdGlvbjonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dTZXNzaW9uQWN0aXZpdHkoc2Vzc2lvbklkOiBzdHJpbmcsIGFjdGl2aXR5OiBzdHJpbmcsIGRldGFpbHM6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHR5cGU6ICdzZXNzaW9uX2FjdGl2aXR5JyxcbiAgICBzZXNzaW9uSWQsXG4gICAgYWN0aXZpdHksXG4gICAgZGV0YWlsczogSlNPTi5zdHJpbmdpZnkoZGV0YWlscylcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhURUxFTUVUUllfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgc2Vzc2lvbiBhY3Rpdml0eTonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dSZXF1ZXN0VGVsZW1ldHJ5KGRhdGE6IHtcbiAgcmVxX2lkOiBzdHJpbmdcbiAgcm91dGU6IHN0cmluZ1xuICB0aW1pbmc6IG51bWJlclxuICBtb2RlbF90b2tlbnM/OiBudW1iZXJcbiAgcGRmX2xhdW5jaF9tcz86IG51bWJlclxuICBwZGZfcmVuZGVyX21zPzogbnVtYmVyXG4gIGRvY3hfbXM/OiBudW1iZXJcbiAgZmluYWxfc3RhdHVzOiAnc3VjY2VzcycgfCAnZXJyb3InXG4gIHdhc19zbmFwc2hvdF91c2VkPzogYm9vbGVhblxuICBlcnJvcl9jb2RlPzogc3RyaW5nXG4gIGFkZGl0aW9uYWxfbWV0cmljcz86IGFueVxufSkge1xuICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB0eXBlOiAncmVxdWVzdF90ZWxlbWV0cnknLFxuICAgIC4uLmRhdGFcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhURUxFTUVUUllfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgcmVxdWVzdCB0ZWxlbWV0cnk6JywgZSlcbiAgfVxuICB2b2lkIHNlbmRUb0RyYWluKGxvZ0VudHJ5KVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZW5kVG9EcmFpbihlbnRyeTogYW55KSB7XG4gIGlmICghTE9HX0RSQUlOX1VSTCkgcmV0dXJuXG4gIHRyeSB7XG4gICAgYXdhaXQgZmV0Y2goTE9HX0RSQUlOX1VSTCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIC4uLihMT0dfRFJBSU5fS0VZID8geyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtMT0dfRFJBSU5fS0VZfWAgfSA6IHt9KVxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudHJ5KVxuICAgIH0pXG4gIH0gY2F0Y2gge31cbn1cbiJdLCJuYW1lcyI6WyJmcyIsInY0IiwidXVpZCIsIlRFTEVNRVRSWV9QQVRIIiwiQUlfUkVTUE9OU0VTX1BBVEgiLCJFUlJPUl9MT0dfUEFUSCIsIkxPR19EUkFJTl9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTE9HX0RSQUlOX0tFWSIsInN0YXJ0VHJhY2UiLCJtZXRhIiwiaWQiLCJ0MCIsIkRhdGUiLCJub3ciLCJlbmQiLCJvayIsImV4dHJhIiwicmVjIiwicmVxX2lkIiwicm91dGUiLCJ0aW1pbmciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImZpbmFsX3N0YXR1cyIsImFwcGVuZEZpbGVTeW5jIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJjb25zb2xlIiwid2FybiIsInNlbmRUb0RyYWluIiwibG9nQUlSZXNwb25zZSIsImF0dGVtcHQiLCJzdWNjZXNzIiwiZXJyb3IiLCJyZXNwb25zZUxlbmd0aCIsIm1vZGVsIiwibG9nRW50cnkiLCJ0eXBlIiwic3Vic3RyaW5nIiwiT1BFTkFJX01PREVMIiwibG9nRXJyb3IiLCJjb250ZXh0IiwibWVzc2FnZSIsInN0YWNrIiwibG9nUERGR2VuZXJhdGlvbiIsIm1ldGhvZCIsInNpemUiLCJsb2dTZXNzaW9uQWN0aXZpdHkiLCJzZXNzaW9uSWQiLCJhY3Rpdml0eSIsImRldGFpbHMiLCJsb2dSZXF1ZXN0VGVsZW1ldHJ5IiwiZGF0YSIsImVudHJ5IiwiZmV0Y2giLCJoZWFkZXJzIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/telemetry.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@opentelemetry","vendor-chunks/formdata-node","vendor-chunks/underscore","vendor-chunks/openai","vendor-chunks/mammoth","vendor-chunks/bluebird","vendor-chunks/xmlbuilder","vendor-chunks/pako","vendor-chunks/form-data-encoder","vendor-chunks/lop","vendor-chunks/readable-stream","vendor-chunks/node-fetch","vendor-chunks/zod","vendor-chunks/uuid","vendor-chunks/@xmldom","vendor-chunks/agentkeepalive","vendor-chunks/inherits","vendor-chunks/dingbat-to-unicode","vendor-chunks/web-streams-polyfill","vendor-chunks/util-deprecate","vendor-chunks/string_decoder","vendor-chunks/safe-buffer","vendor-chunks/process-nextick-args","vendor-chunks/path-is-absolute","vendor-chunks/option","vendor-chunks/ms","vendor-chunks/lie","vendor-chunks/immediate","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/core-util-is","vendor-chunks/base64-js","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Ftailor%2Froute&page=%2Fapi%2Ftailor%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Ftailor%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();