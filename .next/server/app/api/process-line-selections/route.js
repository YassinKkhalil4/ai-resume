"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/process-line-selections/route";
exports.ids = ["app/api/process-line-selections/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-line-selections%2Froute&page=%2Fapi%2Fprocess-line-selections%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-line-selections%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-line-selections%2Froute&page=%2Fapi%2Fprocess-line-selections%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-line-selections%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_yassinkhalil_Downloads_ai_resume_tailor_v2_full_app_api_process_line_selections_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/process-line-selections/route.ts */ \"(rsc)/./app/api/process-line-selections/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/process-line-selections/route\",\n        pathname: \"/api/process-line-selections\",\n        filename: \"route\",\n        bundlePath: \"app/api/process-line-selections/route\"\n    },\n    resolvedPagePath: \"/Users/yassinkhalil/Downloads/ai-resume-tailor_v2_full/app/api/process-line-selections/route.ts\",\n    nextConfigOutput,\n    userland: _Users_yassinkhalil_Downloads_ai_resume_tailor_v2_full_app_api_process_line_selections_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/process-line-selections/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9jZXNzLWxpbmUtc2VsZWN0aW9ucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvY2Vzcy1saW5lLXNlbGVjdGlvbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9jZXNzLWxpbmUtc2VsZWN0aW9ucyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnlhc3NpbmtoYWxpbCUyRkRvd25sb2FkcyUyRmFpLXJlc3VtZS10YWlsb3JfdjJfZnVsbCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZ5YXNzaW5raGFsaWwlMkZEb3dubG9hZHMlMkZhaS1yZXN1bWUtdGFpbG9yX3YyX2Z1bGwmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQytDO0FBQzVIO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYWktcmVzdW1lLXRhaWxvci8/ZTc4NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMveWFzc2lua2hhbGlsL0Rvd25sb2Fkcy9haS1yZXN1bWUtdGFpbG9yX3YyX2Z1bGwvYXBwL2FwaS9wcm9jZXNzLWxpbmUtc2VsZWN0aW9ucy9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvY2Vzcy1saW5lLXNlbGVjdGlvbnMvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9jZXNzLWxpbmUtc2VsZWN0aW9uc1wiLFxuICAgICAgICBmaWxlbmFtZTogXCJyb3V0ZVwiLFxuICAgICAgICBidW5kbGVQYXRoOiBcImFwcC9hcGkvcHJvY2Vzcy1saW5lLXNlbGVjdGlvbnMvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMveWFzc2lua2hhbGlsL0Rvd25sb2Fkcy9haS1yZXN1bWUtdGFpbG9yX3YyX2Z1bGwvYXBwL2FwaS9wcm9jZXNzLWxpbmUtc2VsZWN0aW9ucy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvY2Vzcy1saW5lLXNlbGVjdGlvbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-line-selections%2Froute&page=%2Fapi%2Fprocess-line-selections%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-line-selections%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/process-line-selections/route.ts":
/*!**************************************************!*\
  !*** ./app/api/process-line-selections/route.ts ***!
  \**************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic),\n/* harmony export */   maxDuration: () => (/* binding */ maxDuration),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_line_marking_parser__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/line-marking-parser */ \"(rsc)/./lib/line-marking-parser.ts\");\n/* harmony import */ var _lib_guards__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/guards */ \"(rsc)/./lib/guards.ts\");\n/* harmony import */ var _lib_sessions__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/sessions */ \"(rsc)/./lib/sessions.ts\");\n/* harmony import */ var _lib_ai_response_parser__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../../../lib/ai-response-parser */ \"(rsc)/./lib/ai-response-parser.ts\");\n/* harmony import */ var _lib_ats__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../../../lib/ats */ \"(rsc)/./lib/ats.ts\");\n\n\n\n\n\n\nconst runtime = \"nodejs\";\nconst dynamic = \"force-dynamic\";\nconst maxDuration = 30;\nasync function POST(req) {\n    console.log(\"Process Line Selections API called:\", {\n        method: req.method,\n        url: req.url,\n        timestamp: new Date().toISOString()\n    });\n    try {\n        const guard = (0,_lib_guards__WEBPACK_IMPORTED_MODULE_2__.enforceGuards)(req);\n        if (!guard.ok) return guard.res;\n        const body = await req.json();\n        const { resumeText, selectedLines, sessionId, jdText, tone = \"professional\" } = body;\n        if (!resumeText || !selectedLines || !Array.isArray(selectedLines)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"invalid_input\",\n                message: \"Missing or invalid resumeText or selectedLines\"\n            }, {\n                status: 400\n            });\n        }\n        if (!jdText) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"missing_jd\",\n                message: \"Job description text is required for tailoring\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"Processing line selections:\", {\n            resumeTextLength: resumeText.length,\n            selectedLinesCount: selectedLines.length,\n            hasSessionId: !!sessionId,\n            jdTextLength: jdText.length,\n            tone\n        });\n        // Process the line selections into structured experience\n        const processedExperiences = (0,_lib_line_marking_parser__WEBPACK_IMPORTED_MODULE_1__.processLineSelections)(resumeText, selectedLines);\n        if (processedExperiences.length === 0) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"no_experience_processed\",\n                message: \"No valid experience could be extracted from the selected lines\"\n            }, {\n                status: 400\n            });\n        }\n        // Validate and clean the processed experiences\n        const validatedExperiences = processedExperiences.map(_lib_line_marking_parser__WEBPACK_IMPORTED_MODULE_1__.validateProcessedExperience);\n        // Create or get the original resume structure\n        let originalResume;\n        let existingSession = null;\n        if (sessionId) {\n            existingSession = (0,_lib_sessions__WEBPACK_IMPORTED_MODULE_3__.getSession)(sessionId);\n        }\n        if (existingSession) {\n            // Use existing resume structure and update experience\n            originalResume = {\n                ...existingSession.original,\n                experience: validatedExperiences\n            };\n        } else {\n            // Create a minimal resume structure with the processed experience\n            originalResume = {\n                summary: \"Professional with relevant experience\",\n                skills: [],\n                experience: validatedExperiences,\n                education: [],\n                certifications: []\n            };\n        }\n        console.log(\"Created resume structure:\", {\n            hasSummary: !!originalResume.summary,\n            skillsCount: originalResume.skills.length,\n            experienceCount: originalResume.experience.length,\n            educationCount: originalResume.education.length,\n            certificationsCount: originalResume.certifications.length\n        });\n        // Run ATS check\n        const keywordStats = (0,_lib_ats__WEBPACK_IMPORTED_MODULE_5__.atsCheck)(originalResume, jdText);\n        console.log(\"ATS check completed:\", {\n            coverage: keywordStats.coverage,\n            matchedKeywords: keywordStats.matched?.length || 0,\n            missingKeywords: keywordStats.missing?.length || 0\n        });\n        // Tailor the resume with AI\n        console.log(\"Starting AI tailoring...\");\n        const { tailored, tokens } = await (0,_lib_ai_response_parser__WEBPACK_IMPORTED_MODULE_4__.getTailoredResume)(originalResume, jdText, tone);\n        console.log(\"AI tailoring completed:\", {\n            hasSummary: !!tailored.summary,\n            skillsCount: tailored.skills_section?.length || 0,\n            experienceCount: tailored.experience?.length || 0,\n            tokensUsed: tokens\n        });\n        // Create or update session\n        let session;\n        if (existingSession) {\n            session = (0,_lib_sessions__WEBPACK_IMPORTED_MODULE_3__.updateSession)(sessionId, {\n                original: originalResume,\n                tailored: tailored,\n                jdText: jdText,\n                keywordStats: keywordStats\n            });\n        } else {\n            session = (0,_lib_sessions__WEBPACK_IMPORTED_MODULE_3__.createSession)(originalResume, tailored, jdText, keywordStats);\n        }\n        if (!session) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"session_error\",\n                message: \"Failed to create or update session\"\n            }, {\n                status: 500\n            });\n        }\n        // Create processing summary\n        const summary = (0,_lib_line_marking_parser__WEBPACK_IMPORTED_MODULE_1__.createProcessingSummary)(selectedLines, validatedExperiences);\n        console.log(\"Line selection processing completed successfully:\", {\n            sessionId: session.id,\n            summary\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            session_id: session.id,\n            session_version: session.version,\n            original_sections_json: originalResume,\n            preview_sections_json: tailored,\n            keyword_stats: keywordStats,\n            tokens_used: tokens,\n            processing_summary: summary,\n            message: \"Line selections processed and resume tailored successfully\"\n        });\n    } catch (error) {\n        console.error(\"Process line selections error:\", error);\n        console.error(\"Error stack:\", error instanceof Error ? error.stack : \"No stack trace\");\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            code: \"processing_failed\",\n            message: \"Failed to process line selections\",\n            details:  true ? String(error) : 0,\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2Nlc3MtbGluZS1zZWxlY3Rpb25zL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBdUQ7QUFDc0Y7QUFDMUY7QUFDNkI7QUFFYjtBQUN4QjtBQUVwQyxNQUFNVSxVQUFVLFNBQVE7QUFDeEIsTUFBTUMsVUFBVSxnQkFBZTtBQUMvQixNQUFNQyxjQUFjLEdBQUU7QUFFdEIsZUFBZUMsS0FBS0MsR0FBZ0I7SUFDekNDLFFBQVFDLEdBQUcsQ0FBQyx1Q0FBdUM7UUFDakRDLFFBQVFILElBQUlHLE1BQU07UUFDbEJDLEtBQUtKLElBQUlJLEdBQUc7UUFDWkMsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO0lBQ25DO0lBRUEsSUFBSTtRQUNGLE1BQU1DLFFBQVFsQiwwREFBYUEsQ0FBQ1U7UUFDNUIsSUFBSSxDQUFDUSxNQUFNQyxFQUFFLEVBQUUsT0FBT0QsTUFBTUUsR0FBRztRQUUvQixNQUFNQyxPQUFPLE1BQU1YLElBQUlZLElBQUk7UUFDM0IsTUFBTSxFQUNKQyxVQUFVLEVBQ1ZDLGFBQWEsRUFDYkMsU0FBUyxFQUNUQyxNQUFNLEVBQ05DLE9BQU8sY0FBYyxFQUN0QixHQUFHTjtRQUVKLElBQUksQ0FBQ0UsY0FBYyxDQUFDQyxpQkFBaUIsQ0FBQ0ksTUFBTUMsT0FBTyxDQUFDTCxnQkFBZ0I7WUFDbEUsT0FBTzVCLHFEQUFZQSxDQUFDMEIsSUFBSSxDQUFDO2dCQUN2QlEsTUFBTTtnQkFDTkMsU0FBUztZQUNYLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNuQjtRQUVBLElBQUksQ0FBQ04sUUFBUTtZQUNYLE9BQU85QixxREFBWUEsQ0FBQzBCLElBQUksQ0FBQztnQkFDdkJRLE1BQU07Z0JBQ05DLFNBQVM7WUFDWCxHQUFHO2dCQUFFQyxRQUFRO1lBQUk7UUFDbkI7UUFFQXJCLFFBQVFDLEdBQUcsQ0FBQywrQkFBK0I7WUFDekNxQixrQkFBa0JWLFdBQVdXLE1BQU07WUFDbkNDLG9CQUFvQlgsY0FBY1UsTUFBTTtZ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WUFBWUgsUUFBUUMsRUFBRTtZQUN0QkcsaUJBQWlCSixRQUFRSyxPQUFPO1lBQ2hDQyx3QkFBd0I3QjtZQUN4QjhCLHVCQUF1Qlg7WUFDdkJZLGVBQWVsQjtZQUNmbUIsYUFBYVo7WUFDYmEsb0JBQW9CN0I7WUFDcEJkLFNBQVM7UUFDWDtJQUVGLEVBQUUsT0FBTzRDLE9BQU87UUFDZGhFLFFBQVFnRSxLQUFLLENBQUMsa0NBQWtDQTtRQUNoRGhFLFFBQVFnRSxLQUFLLENBQUMsZ0JBQWdCQSxpQkFBaUJDLFFBQVFELE1BQU1FLEtBQUssR0FBRztRQUVyRSxPQUFPakYscURBQVlBLENBQUMwQixJQUFJLENBQUM7WUFDdkJRLE1BQU07WUFDTkMsU0FBUztZQUNUK0MsU0FBU0MsS0FBeUIsR0FBZ0JDLE9BQU9MLFNBQVNNLENBQVNBO1lBQzNFbEUsV0FBVyxJQUFJQyxPQUFPQyxXQUFXO1FBQ25DLEdBQUc7WUFBRWUsUUFBUTtRQUFJO0lBQ25CO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vYXBwL2FwaS9wcm9jZXNzLWxpbmUtc2VsZWN0aW9ucy9yb3V0ZS50cz80OTQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcidcbmltcG9ydCB7IHByb2Nlc3NMaW5lU2VsZWN0aW9ucywgdmFsaWRhdGVQcm9jZXNzZWRFeHBlcmllbmNlLCBjcmVhdGVQcm9jZXNzaW5nU3VtbWFyeSwgTGluZVNlbGVjdGlvbiB9IGZyb20gJy4uLy4uLy4uL2xpYi9saW5lLW1hcmtpbmctcGFyc2VyJ1xuaW1wb3J0IHsgZW5mb3JjZUd1YXJkcyB9IGZyb20gJy4uLy4uLy4uL2xpYi9ndWFyZHMnXG5pbXBvcnQgeyBjcmVhdGVTZXNzaW9uLCBnZXRTZXNzaW9uLCB1cGRhdGVTZXNzaW9uIH0gZnJvbSAnLi4vLi4vLi4vbGliL3Nlc3Npb25zJ1xuaW1wb3J0IHsgUmVzdW1lSlNPTiwgVGFpbG9yZWRSZXN1bHQsIEtleXdvcmRTdGF0cyB9IGZyb20gJy4uLy4uLy4uL2xpYi90eXBlcydcbmltcG9ydCB7IGdldFRhaWxvcmVkUmVzdW1lIH0gZnJvbSAnLi4vLi4vLi4vbGliL2FpLXJlc3BvbnNlLXBhcnNlcidcbmltcG9ydCB7IGF0c0NoZWNrIH0gZnJvbSAnLi4vLi4vLi4vbGliL2F0cydcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnbm9kZWpzJ1xuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYydcbmV4cG9ydCBjb25zdCBtYXhEdXJhdGlvbiA9IDMwXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogTmV4dFJlcXVlc3QpIHtcbiAgY29uc29sZS5sb2coJ1Byb2Nlc3MgTGluZSBTZWxlY3Rpb25zIEFQSSBjYWxsZWQ6Jywge1xuICAgIG1ldGhvZDogcmVxLm1ldGhvZCxcbiAgICB1cmw6IHJlcS51cmwsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgfSlcblxuICB0cnkge1xuICAgIGNvbnN0IGd1YXJkID0gZW5mb3JjZUd1YXJkcyhyZXEpXG4gICAgaWYgKCFndWFyZC5vaykgcmV0dXJuIGd1YXJkLnJlc1xuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKClcbiAgICBjb25zdCB7IFxuICAgICAgcmVzdW1lVGV4dCwgXG4gICAgICBzZWxlY3RlZExpbmVzLCBcbiAgICAgIHNlc3Npb25JZCwgXG4gICAgICBqZFRleHQsIFxuICAgICAgdG9uZSA9ICdwcm9mZXNzaW9uYWwnIFxuICAgIH0gPSBib2R5XG5cbiAgICBpZiAoIXJlc3VtZVRleHQgfHwgIXNlbGVjdGVkTGluZXMgfHwgIUFycmF5LmlzQXJyYXkoc2VsZWN0ZWRMaW5lcykpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGNvZGU6ICdpbnZhbGlkX2lucHV0JyxcbiAgICAgICAgbWVzc2FnZTogJ01pc3Npbmcgb3IgaW52YWxpZCByZXN1bWVUZXh0IG9yIHNlbGVjdGVkTGluZXMnXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgaWYgKCFqZFRleHQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGNvZGU6ICdtaXNzaW5nX2pkJyxcbiAgICAgICAgbWVzc2FnZTogJ0pvYiBkZXNjcmlwdGlvbiB0ZXh0IGlzIHJlcXVpcmVkIGZvciB0YWlsb3JpbmcnXG4gICAgICB9LCB7IHN0YXR1czogNDAwIH0pXG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ1Byb2Nlc3NpbmcgbGluZSBzZWxlY3Rpb25zOicsIHtcbiAgICAgIHJlc3VtZVRleHRMZW5ndGg6IHJlc3VtZVRleHQubGVuZ3RoLFxuICAgICAgc2VsZWN0ZWRMaW5lc0NvdW50OiBzZWxlY3RlZExpbmVzLmxlbmd0aCxcbiAgICAgIGhhc1Nlc3Npb25JZDogISFzZXNzaW9uSWQsXG4gICAgICBqZFRleHRMZW5ndGg6IGpkVGV4dC5sZW5ndGgsXG4gICAgICB0b25lXG4gICAgfSlcblxuICAgIC8vIFByb2Nlc3MgdGhlIGxpbmUgc2VsZWN0aW9ucyBpbnRvIHN0cnVjdHVyZWQgZXhwZXJpZW5jZVxuICAgIGNvbnN0IHByb2Nlc3NlZEV4cGVyaWVuY2VzID0gcHJvY2Vzc0xpbmVTZWxlY3Rpb25zKHJlc3VtZVRleHQsIHNlbGVjdGVkTGluZXMgYXMgTGluZVNlbGVjdGlvbltdKVxuICAgIFxuICAgIGlmIChwcm9jZXNzZWRFeHBlcmllbmNlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGNvZGU6ICdub19leHBlcmllbmNlX3Byb2Nlc3NlZCcsXG4gICAgICAgIG1lc3NhZ2U6ICdObyB2YWxpZCBleHBlcmllbmNlIGNvdWxkIGJlIGV4dHJhY3RlZCBmcm9tIHRoZSBzZWxlY3RlZCBsaW5lcydcbiAgICAgIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICB9XG5cbiAgICAvLyBWYWxpZGF0ZSBhbmQgY2xlYW4gdGhlIHByb2Nlc3NlZCBleHBlcmllbmNlc1xuICAgIGNvbnN0IHZhbGlkYXRlZEV4cGVyaWVuY2VzID0gcHJvY2Vzc2VkRXhwZXJpZW5jZXMubWFwKHZhbGlkYXRlUHJvY2Vzc2VkRXhwZXJpZW5jZSlcblxuICAgIC8vIENyZWF0ZSBvciBnZXQgdGhlIG9yaWdpbmFsIHJlc3VtZSBzdHJ1Y3R1cmVcbiAgICBsZXQgb3JpZ2luYWxSZXN1bWU6IFJlc3VtZUpTT05cbiAgICBsZXQgZXhpc3RpbmdTZXNzaW9uID0gbnVsbFxuXG4gICAgaWYgKHNlc3Npb25JZCkge1xuICAgICAgZXhpc3RpbmdTZXNzaW9uID0gZ2V0U2Vzc2lvbihzZXNzaW9uSWQpXG4gICAgfVxuXG4gICAgaWYgKGV4aXN0aW5nU2Vzc2lvbikge1xuICAgICAgLy8gVXNlIGV4aXN0aW5nIHJlc3VtZSBzdHJ1Y3R1cmUgYW5kIHVwZGF0ZSBleHBlcmllbmNlXG4gICAgICBvcmlnaW5hbFJlc3VtZSA9IHtcbiAgICAgICAgLi4uZXhpc3RpbmdTZXNzaW9uLm9yaWdpbmFsLFxuICAgICAgICBleHBlcmllbmNlOiB2YWxpZGF0ZWRFeHBlcmllbmNlc1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBDcmVhdGUgYSBtaW5pbWFsIHJlc3VtZSBzdHJ1Y3R1cmUgd2l0aCB0aGUgcHJvY2Vzc2VkIGV4cGVyaWVuY2VcbiAgICAgIG9yaWdpbmFsUmVzdW1lID0ge1xuICAgICAgICBzdW1tYXJ5OiAnUHJvZmVzc2lvbmFsIHdpdGggcmVsZXZhbnQgZXhwZXJpZW5jZScsXG4gICAgICAgIHNraWxsczogW10sXG4gICAgICAgIGV4cGVyaWVuY2U6IHZhbGlkYXRlZEV4cGVyaWVuY2VzLFxuICAgICAgICBlZHVjYXRpb246IFtdLFxuICAgICAgICBjZXJ0aWZpY2F0aW9uczogW11cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnQ3JlYXRlZCByZXN1bWUgc3RydWN0dXJlOicsIHtcbiAgICAgIGhhc1N1bW1hcnk6ICEhb3JpZ2luYWxSZXN1bWUuc3VtbWFyeSxcbiAgICAgIHNraWxsc0NvdW50OiBvcmlnaW5hbFJlc3VtZS5za2lsbHMubGVuZ3RoLFxuICAgICAgZXhwZXJpZW5jZUNvdW50OiBvcmlnaW5hbFJlc3VtZS5leHBlcmllbmNlLmxlbmd0aCxcbiAgICAgIGVkdWNhdGlvbkNvdW50OiBvcmlnaW5hbFJlc3VtZS5lZHVjYXRpb24ubGVuZ3RoLFxuICAgICAgY2VydGlmaWNhdGlvbnNDb3VudDogb3JpZ2luYWxSZXN1bWUuY2VydGlmaWNhdGlvbnMubGVuZ3RoXG4gICAgfSlcblxuICAgIC8vIFJ1biBBVFMgY2hlY2tcbiAgICBjb25zdCBrZXl3b3JkU3RhdHMgPSBhdHNDaGVjayhvcmlnaW5hbFJlc3VtZSwgamRUZXh0KVxuICAgIGNvbnNvbGUubG9nKCdBVFMgY2hlY2sgY29tcGxldGVkOicsIHtcbiAgICAgIGNvdmVyYWdlOiBrZXl3b3JkU3RhdHMuY292ZXJhZ2UsXG4gICAgICBtYXRjaGVkS2V5d29yZHM6IGtleXdvcmRTdGF0cy5tYXRjaGVkPy5sZW5ndGggfHwgMCxcbiAgICAgIG1pc3NpbmdLZXl3b3Jkczoga2V5d29yZFN0YXRzLm1pc3Npbmc/Lmxlbmd0aCB8fCAwXG4gICAgfSlcblxuICAgIC8vIFRhaWxvciB0aGUgcmVzdW1lIHdpdGggQUlcbiAgICBjb25zb2xlLmxvZygnU3RhcnRpbmcgQUkgdGFpbG9yaW5nLi4uJylcbiAgICBjb25zdCB7IHRhaWxvcmVkLCB0b2tlbnMgfSA9IGF3YWl0IGdldFRhaWxvcmVkUmVzdW1lKG9yaWdpbmFsUmVzdW1lLCBqZFRleHQsIHRvbmUpXG4gICAgY29uc29sZS5sb2coJ0FJIHRhaWxvcmluZyBjb21wbGV0ZWQ6Jywge1xuICAgICAgaGFzU3VtbWFyeTogISF0YWlsb3JlZC5zdW1tYXJ5LFxuICAgICAgc2tpbGxzQ291bnQ6IHRhaWxvcmVkLnNraWxsc19zZWN0aW9uPy5sZW5ndGggfHwgMCxcbiAgICAgIGV4cGVyaWVuY2VDb3VudDogdGFpbG9yZWQuZXhwZXJpZW5jZT8ubGVuZ3RoIHx8IDAsXG4gICAgICB0b2tlbnNVc2VkOiB0b2tlbnNcbiAgICB9KVxuXG4gICAgLy8gQ3JlYXRlIG9yIHVwZGF0ZSBzZXNzaW9uXG4gICAgbGV0IHNlc3Npb25cbiAgICBpZiAoZXhpc3RpbmdTZXNzaW9uKSB7XG4gICAgICBzZXNzaW9uID0gdXBkYXRlU2Vzc2lvbihzZXNzaW9uSWQsIHtcbiAgICAgICAgb3JpZ2luYWw6IG9yaWdpbmFsUmVzdW1lLFxuICAgICAgICB0YWlsb3JlZDogdGFpbG9yZWQsXG4gICAgICAgIGpkVGV4dDogamRUZXh0LFxuICAgICAgICBrZXl3b3JkU3RhdHM6IGtleXdvcmRTdGF0c1xuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgc2Vzc2lvbiA9IGNyZWF0ZVNlc3Npb24ob3JpZ2luYWxSZXN1bWUsIHRhaWxvcmVkLCBqZFRleHQsIGtleXdvcmRTdGF0cylcbiAgICB9XG5cbiAgICBpZiAoIXNlc3Npb24pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICAgIGNvZGU6ICdzZXNzaW9uX2Vycm9yJyxcbiAgICAgICAgbWVzc2FnZTogJ0ZhaWxlZCB0byBjcmVhdGUgb3IgdXBkYXRlIHNlc3Npb24nXG4gICAgICB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHByb2Nlc3Npbmcgc3VtbWFyeVxuICAgIGNvbnN0IHN1bW1hcnkgPSBjcmVhdGVQcm9jZXNzaW5nU3VtbWFyeShzZWxlY3RlZExpbmVzIGFzIExpbmVTZWxlY3Rpb25bXSwgdmFsaWRhdGVkRXhwZXJpZW5jZXMpXG5cbiAgICBjb25zb2xlLmxvZygnTGluZSBzZWxlY3Rpb24gcHJvY2Vzc2luZyBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5OicsIHtcbiAgICAgIHNlc3Npb25JZDogc2Vzc2lvbi5pZCxcbiAgICAgIHN1bW1hcnlcbiAgICB9KVxuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzZXNzaW9uX2lkOiBzZXNzaW9uLmlkLFxuICAgICAgc2Vzc2lvbl92ZXJzaW9uOiBzZXNzaW9uLnZlcnNpb24sXG4gICAgICBvcmlnaW5hbF9zZWN0aW9uc19qc29uOiBvcmlnaW5hbFJlc3VtZSxcbiAgICAgIHByZXZpZXdfc2VjdGlvbnNfanNvbjogdGFpbG9yZWQsXG4gICAgICBrZXl3b3JkX3N0YXRzOiBrZXl3b3JkU3RhdHMsXG4gICAgICB0b2tlbnNfdXNlZDogdG9rZW5zLFxuICAgICAgcHJvY2Vzc2luZ19zdW1tYXJ5OiBzdW1tYXJ5LFxuICAgICAgbWVzc2FnZTogJ0xpbmUgc2VsZWN0aW9ucyBwcm9jZXNzZWQgYW5kIHJlc3VtZSB0YWlsb3JlZCBzdWNjZXNzZnVsbHknXG4gICAgfSlcblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1Byb2Nlc3MgbGluZSBzZWxlY3Rpb25zIGVycm9yOicsIGVycm9yKVxuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YWNrOicsIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6ICdObyBzdGFjayB0cmFjZScpXG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIGNvZGU6ICdwcm9jZXNzaW5nX2ZhaWxlZCcsXG4gICAgICBtZXNzYWdlOiAnRmFpbGVkIHRvIHByb2Nlc3MgbGluZSBzZWxlY3Rpb25zJyxcbiAgICAgIGRldGFpbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnID8gU3RyaW5nKGVycm9yKSA6IHVuZGVmaW5lZCxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwicHJvY2Vzc0xpbmVTZWxlY3Rpb25zIiwidmFsaWRhdGVQcm9jZXNzZWRFeHBlcmllbmNlIiwiY3JlYXRlUHJvY2Vzc2luZ1N1bW1hcnkiLCJlbmZvcmNlR3VhcmRzIiwiY3JlYXRlU2Vzc2lvbiIsImdldFNlc3Npb24iLCJ1cGRhdGVTZXNzaW9uIiwiZ2V0VGFpbG9yZWRSZXN1bWUiLCJhdHNDaGVjayIsInJ1bnRpbWUiLCJkeW5hbWljIiwibWF4RHVyYXRpb24iLCJQT1NUIiwicmVxIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsInVybCIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImd1YXJkIiwib2siLCJyZXMiLCJib2R5IiwianNvbiIsInJlc3VtZVRleHQiLCJzZWxlY3RlZExpbmVzIiwic2Vzc2lvbklkIiwiamRUZXh0IiwidG9uZSIsIkFycmF5IiwiaXNBcnJheSIsImNvZGUiLCJtZXNzYWdlIiwic3RhdHVzIiwicmVzdW1lVGV4dExlbmd0aCIsImxlbmd0aCIsInNlbGVjdGVkTGluZXNDb3VudCIsImhhc1Nlc3Npb25JZCIsImpkVGV4dExlbmd0aCIsInByb2Nlc3NlZEV4cGVyaWVuY2VzIiwidmFsaWRhdGVkRXhwZXJpZW5jZXMiLCJtYXAiLCJvcmlnaW5hbFJlc3VtZSIsImV4aXN0aW5nU2Vzc2lvbiIsIm9yaWdpbmFsIiwiZXhwZXJpZW5jZSIsInN1bW1hcnkiLCJza2lsbHMiLCJlZHVjYXRpb24iLCJjZXJ0aWZpY2F0aW9ucyIsImhhc1N1bW1hcnkiLCJza2lsbHNDb3VudCIsImV4cGVyaWVuY2VDb3VudCIsImVkdWNhdGlvbkNvdW50IiwiY2VydGlmaWNhdGlvbnNDb3VudCIsImtleXdvcmRTdGF0cyIsImNvdmVyYWdlIiwibWF0Y2hlZEtleXdvcmRzIiwibWF0Y2hlZCIsIm1pc3NpbmdLZXl3b3JkcyIsIm1pc3NpbmciLCJ0YWlsb3JlZCIsInRva2VucyIsInNraWxsc19zZWN0aW9uIiwidG9rZW5zVXNlZCIsInNlc3Npb24iLCJpZCIsInN1Y2Nlc3MiLCJzZXNzaW9uX2lkIiwic2Vzc2lvbl92ZXJzaW9uIiwidmVyc2lvbiIsIm9yaWdpbmFsX3NlY3Rpb25zX2pzb24iLCJwcmV2aWV3X3NlY3Rpb25zX2pzb24iLCJrZXl3b3JkX3N0YXRzIiwidG9rZW5zX3VzZWQiLCJwcm9jZXNzaW5nX3N1bW1hcnkiLCJlcnJvciIsIkVycm9yIiwic3RhY2siLCJkZXRhaWxzIiwicHJvY2VzcyIsIlN0cmluZyIsInVuZGVmaW5lZCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/process-line-selections/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ai-response-parser.ts":
/*!***********************************!*\
  !*** ./lib/ai-response-parser.ts ***!
  \***********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractBulletsFromFreeText: () => (/* binding */ extractBulletsFromFreeText),\n/* harmony export */   getTailoredResume: () => (/* binding */ getTailoredResume),\n/* harmony export */   parseAIResponse: () => (/* binding */ parseAIResponse)\n/* harmony export */ });\n/* harmony import */ var _schemas__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./schemas */ \"(rsc)/./lib/schemas.ts\");\n/* harmony import */ var _telemetry__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./telemetry */ \"(rsc)/./lib/telemetry.ts\");\n/* harmony import */ var _jd__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./jd */ \"(rsc)/./lib/jd.ts\");\n/* harmony import */ var _openai__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./openai */ \"(rsc)/./lib/openai.ts\");\n/* harmony import */ var _prompts__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./prompts */ \"(rsc)/./lib/prompts.ts\");\n\n\n\n\n\nasync function parseAIResponse(raw, maxRetries = 3) {\n    let lastError = null;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            // Clean the response\n            const cleaned = cleanAIResponse(raw);\n            // Try to parse\n            const parsed = JSON.parse(cleaned);\n            // Validate and coerce into schema\n            const validated = await validateAndCoerceResponse(parsed, attempt);\n            // Log successful parsing\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, true, undefined, raw.length);\n            return validated;\n        } catch (error) {\n            lastError = error;\n            console.warn(`AI response parsing attempt ${attempt} failed:`, error);\n            // Log failed attempt with detailed error\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, false, error.message, raw.length);\n            if (attempt < maxRetries) {\n                // Wait before retry\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * attempt));\n            }\n        }\n    }\n    // Log final failure with detailed error information\n    (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(maxRetries, false, lastError?.message, raw.length);\n    throw new Error(`Failed to parse AI response after ${maxRetries} attempts: ${lastError?.message}`);\n}\nasync function validateAndCoerceResponse(parsed, attempt) {\n    try {\n        // First try direct validation\n        return _schemas__WEBPACK_IMPORTED_MODULE_0__.TailoredResultSchema.parse(parsed);\n    } catch (validationError) {\n        console.log(`Direct validation failed (attempt ${attempt}), attempting coercion:`, validationError);\n        // Attempt to coerce the response into the correct schema\n        const coerced = coerceToSchema(parsed);\n        try {\n            // Validate the coerced response\n            return _schemas__WEBPACK_IMPORTED_MODULE_0__.TailoredResultSchema.parse(coerced);\n        } catch (coercionError) {\n            console.error(\"Coercion also failed:\", coercionError);\n            // Log detailed failure information\n            const failureDetails = {\n                originalResponse: parsed,\n                coercedResponse: coerced,\n                validationError: validationError.message,\n                coercionError: coercionError.message,\n                attempt\n            };\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(new Error(\"Schema validation and coercion failed\"), failureDetails);\n            throw new Error(`Schema validation failed: ${validationError.message}. Coercion failed: ${coercionError.message}`);\n        }\n    }\n}\nfunction coerceToSchema(parsed) {\n    const coerced = {};\n    // Coerce summary\n    if (parsed.summary && typeof parsed.summary === \"string\") {\n        coerced.summary = parsed.summary.trim() || \"Professional summary not available\";\n    } else if (parsed.summary && typeof parsed.summary === \"object\") {\n        // If summary is an object, try to extract text\n        coerced.summary = extractTextFromObject(parsed.summary) || \"Professional summary not available\";\n    } else {\n        coerced.summary = \"Professional summary not available\";\n    }\n    // Coerce skills_section\n    if (Array.isArray(parsed.skills_section)) {\n        coerced.skills_section = parsed.skills_section.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else if (parsed.skills_section && typeof parsed.skills_section === \"string\") {\n        // If skills is a string, split it\n        coerced.skills_section = parsed.skills_section.split(/[,;|•\\n]/).map((s)=>s.trim()).filter((s)=>s.length > 0);\n    } else if (parsed.skills && Array.isArray(parsed.skills)) {\n        // Alternative field name\n        coerced.skills_section = parsed.skills.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else {\n        coerced.skills_section = [];\n    }\n    // Coerce experience\n    if (Array.isArray(parsed.experience)) {\n        coerced.experience = parsed.experience.map((exp)=>coerceExperience(exp)).filter(Boolean);\n    } else if (parsed.experience && typeof parsed.experience === \"object\") {\n        // If experience is an object, try to convert to array\n        coerced.experience = [\n            coerceExperience(parsed.experience)\n        ].filter(Boolean);\n    } else {\n        coerced.experience = [];\n    }\n    return coerced;\n}\nfunction coerceExperience(exp) {\n    if (!exp || typeof exp !== \"object\") return null;\n    const coerced = {};\n    // Coerce company\n    if (typeof exp.company === \"string\") {\n        coerced.company = exp.company.trim() || \"Unknown Company\";\n    } else if (exp.company && typeof exp.company === \"object\") {\n        coerced.company = extractTextFromObject(exp.company) || \"Unknown Company\";\n    } else {\n        coerced.company = \"Unknown Company\";\n    }\n    // Coerce role\n    if (typeof exp.role === \"string\") {\n        coerced.role = exp.role.trim() || \"Unknown Role\";\n    } else if (exp.role && typeof exp.role === \"object\") {\n        coerced.role = extractTextFromObject(exp.role) || \"Unknown Role\";\n    } else {\n        coerced.role = \"Unknown Role\";\n    }\n    // Coerce bullets\n    if (Array.isArray(exp.bullets)) {\n        coerced.bullets = exp.bullets.filter((bullet)=>typeof bullet === \"string\" && bullet.trim().length > 0).map((bullet)=>bullet.trim());\n    } else if (exp.bullets && typeof exp.bullets === \"string\") {\n        // If bullets is a string, split it\n        coerced.bullets = exp.bullets.split(/[•\\n]/).map((b)=>b.trim()).filter((b)=>b.length > 0);\n    } else if (exp.description && typeof exp.description === \"string\") {\n        // Alternative field name\n        coerced.bullets = exp.description.split(/[•\\n]/).map((b)=>b.trim()).filter((b)=>b.length > 0);\n    } else {\n        coerced.bullets = [];\n    }\n    return coerced;\n}\nfunction extractTextFromObject(obj) {\n    if (typeof obj === \"string\") return obj;\n    if (typeof obj === \"number\") return obj.toString();\n    if (Array.isArray(obj)) return obj.map(extractTextFromObject).filter(Boolean).join(\" \");\n    if (obj && typeof obj === \"object\") {\n        // Try common text fields\n        const textFields = [\n            \"text\",\n            \"content\",\n            \"value\",\n            \"description\",\n            \"title\"\n        ];\n        for (const field of textFields){\n            if (obj[field] && typeof obj[field] === \"string\") {\n                return obj[field];\n            }\n        }\n        // Fallback to first string value\n        for (const [key, value] of Object.entries(obj)){\n            if (typeof value === \"string\" && value.trim().length > 0) {\n                return value;\n            }\n        }\n    }\n    return null;\n}\nfunction cleanAIResponse(raw) {\n    // Remove any text before the first {\n    const firstBrace = raw.indexOf(\"{\");\n    if (firstBrace > 0) {\n        raw = raw.substring(firstBrace);\n    }\n    // Remove any text after the last }\n    const lastBrace = raw.lastIndexOf(\"}\");\n    if (lastBrace > 0 && lastBrace < raw.length - 1) {\n        raw = raw.substring(0, lastBrace + 1);\n    }\n    // Fix common JSON issues\n    raw = raw.replace(/\\n/g, \" \") // Replace newlines with spaces\n    .replace(/\\s+/g, \" \") // Normalize whitespace\n    .replace(/,(\\s*[}\\]])/g, \"$1\") // Remove trailing commas\n    .replace(/([^\\\\])\\\\([^\"\\\\\\/bfnrt])/g, \"$1\\\\\\\\$2\") // Fix unescaped backslashes\n    .replace(/([^\\\\])\\\\([^\"\\\\\\/bfnrt])/g, \"$1\\\\\\\\$2\") // Fix unescaped backslashes (second pass)\n    .replace(/\"/g, '\"') // Fix smart quotes\n    .replace(/'/g, \"'\") // Fix smart apostrophes\n    ;\n    return raw;\n}\nasync function getTailoredResume(original, jdText, tone) {\n    const maxRetries = 3;\n    let lastError = null;\n    // Enhanced validation - check if we have meaningful data to work with\n    if (!original.experience || original.experience.length === 0) {\n        console.warn(\"No experience data available for tailoring, attempting extraction from free text\");\n        return await handleMissingExperience(original, jdText, tone);\n    }\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            const messages = [\n                {\n                    role: \"system\",\n                    content: _prompts__WEBPACK_IMPORTED_MODULE_4__.SYSTEM_PROMPT\n                },\n                {\n                    role: \"user\",\n                    content: (0,_prompts__WEBPACK_IMPORTED_MODULE_4__.makeUserPrompt)({\n                        resume_json: original,\n                        job_text: jdText,\n                        tone\n                    })\n                }\n            ];\n            const chat = await (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)().chat.completions.create({\n                model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n                messages,\n                temperature: 0.2,\n                response_format: {\n                    type: \"json_object\"\n                },\n                max_tokens: 4000 // Ensure we don't get truncated responses\n            });\n            const raw = chat.choices[0]?.message?.content || \"{}\";\n            if (!raw || raw.trim() === \"\") {\n                throw new Error(\"Empty response from AI\");\n            }\n            // Parse and validate with detailed error reporting\n            const tailored = await parseAIResponse(raw);\n            // Additional validation - ensure we got meaningful content\n            if (!tailored || typeof tailored !== \"object\") {\n                throw new Error(\"AI response is not a valid object\");\n            }\n            // If experience is missing or empty, try to preserve original\n            if (!tailored.experience || tailored.experience.length === 0) {\n                console.warn(\"AI response missing experience, preserving original experience\");\n                tailored.experience = original.experience || [];\n            }\n            // Extract token usage\n            const tokens = chat.usage?.total_tokens || 0;\n            // Log successful AI request\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, true, undefined, raw.length);\n            return {\n                tailored,\n                tokens\n            };\n        } catch (error) {\n            lastError = error;\n            console.warn(`AI request attempt ${attempt} failed:`, error);\n            console.warn(\"Error details:\", {\n                message: error.message,\n                stack: error.stack,\n                originalExperienceLength: original.experience?.length || 0,\n                jdLength: jdText.length,\n                attempt\n            });\n            // Log failed attempt with detailed context\n            (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logAIResponse)(attempt, false, error.message);\n            if (attempt < maxRetries) {\n                // Wait before retry with exponential backoff\n                await new Promise((resolve)=>setTimeout(resolve, 1000 * Math.pow(2, attempt - 1)));\n            }\n        }\n    }\n    // Final fallback: return original resume with minimal changes\n    console.error(\"All AI attempts failed, returning fallback response\");\n    console.error(\"Last error:\", lastError?.message);\n    (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(new Error(\"All AI attempts failed\"), {\n        original,\n        jdText,\n        tone,\n        lastError: lastError?.message,\n        attempts: maxRetries\n    });\n    return {\n        tailored: createFallbackResponse(original, jdText),\n        tokens: 0\n    };\n}\nasync function handleMissingExperience(original, jdText, tone) {\n    console.log(\"Handling missing experience - attempting extraction from free text\");\n    try {\n        // First, try to extract experience from free text\n        const extractionPrompt = `Extract work experience from the following resume text. Return a JSON object with an \"experience\" array. Each experience should have \"company\", \"role\", and \"bullets\" fields.\n\nResume text: ${JSON.stringify(original)}\n\nReturn only valid JSON.`;\n        const extractionChat = await (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)().chat.completions.create({\n            model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n            messages: [\n                {\n                    role: \"system\",\n                    content: \"You are an expert at extracting structured data from resume text. Return only valid JSON.\"\n                },\n                {\n                    role: \"user\",\n                    content: extractionPrompt\n                }\n            ],\n            temperature: 0.1,\n            response_format: {\n                type: \"json_object\"\n            },\n            max_tokens: 2000\n        });\n        const extractionRaw = extractionChat.choices[0]?.message?.content || \"{}\";\n        const extractedData = JSON.parse(extractionRaw);\n        if (extractedData.experience && Array.isArray(extractedData.experience) && extractedData.experience.length > 0) {\n            console.log(\"Successfully extracted experience from free text\");\n            // Now tailor the extracted experience\n            const tailored = await getTailoredResume({\n                ...original,\n                experience: extractedData.experience\n            }, jdText, tone);\n            return tailored;\n        }\n    } catch (error) {\n        console.error(\"Failed to extract experience from free text:\", error);\n    }\n    // If extraction fails, return fallback\n    return {\n        tailored: createFallbackResponse(original, jdText),\n        tokens: 0\n    };\n}\nfunction createFallbackResponse(original, jdText) {\n    // Extract keywords from job description\n    const keywords = (0,_jd__WEBPACK_IMPORTED_MODULE_2__.extractKeywords)(jdText, 10);\n    // Create a minimal tailored response that preserves original data\n    return {\n        summary: original.summary || \"Experienced professional with relevant skills and experience.\",\n        skills_section: original.skills || [],\n        experience: original.experience || []\n    };\n}\n/**\n * Extract structured experience from free-form text using AI\n */ async function extractBulletsFromFreeText(freeText) {\n    if (!freeText || freeText.trim().length === 0) {\n        return [];\n    }\n    const openai = (0,_openai__WEBPACK_IMPORTED_MODULE_3__.getOpenAI)();\n    if (!openai) {\n        console.warn(\"OpenAI not available for bullet extraction\");\n        return [];\n    }\n    const prompt = `Given the following free-form text describing work experience, extract it into a JSON array of roles. Each role should have 'company', 'role', 'dates' (optional, can be empty string), and 'bullets' (an array of strings). If no specific role or company is clear, group related bullets under a generic \"Experience\" role.\n\nExample:\nText: \"Company A (2020-2022) - Software Engineer. Developed X, Implemented Y. Company B (2018-2020) - Junior Dev. Assisted with Z.\"\nOutput:\n[\n  {\n    \"company\": \"Company A\",\n    \"role\": \"Software Engineer\",\n    \"dates\": \"2020-2022\",\n    \"bullets\": [\"Developed X\", \"Implemented Y\"]\n  },\n  {\n    \"company\": \"Company B\",\n    \"role\": \"Junior Dev\",\n    \"dates\": \"2018-2020\",\n    \"bullets\": [\"Assisted with Z\"]\n  }\n]\n\nText: \"${freeText}\"\nOutput:`;\n    try {\n        const chatCompletion = await openai.chat.completions.create({\n            model: _openai__WEBPACK_IMPORTED_MODULE_3__.OPENAI_MODEL,\n            messages: [\n                {\n                    role: \"user\",\n                    content: prompt\n                }\n            ],\n            temperature: 0.2,\n            response_format: {\n                type: \"json_object\"\n            }\n        });\n        const rawResponse = chatCompletion.choices[0].message.content;\n        if (!rawResponse) {\n            throw new Error(\"AI returned an empty response for bullet extraction\");\n        }\n        const parsed = JSON.parse(rawResponse);\n        // Validate the structure\n        if (Array.isArray(parsed)) {\n            return parsed.map((role)=>({\n                    company: (role.company || \"\").trim() || \"Unknown Company\",\n                    role: (role.role || \"\").trim() || \"Unknown Role\",\n                    dates: (role.dates || \"\").trim() || \"\",\n                    bullets: Array.isArray(role.bullets) ? role.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n                }));\n        } else if (parsed.experience && Array.isArray(parsed.experience)) {\n            return parsed.experience.map((role)=>({\n                    company: (role.company || \"\").trim() || \"Unknown Company\",\n                    role: (role.role || \"\").trim() || \"Unknown Role\",\n                    dates: (role.dates || \"\").trim() || \"\",\n                    bullets: Array.isArray(role.bullets) ? role.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n                }));\n        } else {\n            throw new Error(\"Unexpected response format from AI\");\n        }\n    } catch (error) {\n        console.error(\"Error extracting bullets from free text:\", error);\n        (0,_telemetry__WEBPACK_IMPORTED_MODULE_1__.logError)(error, {\n            context: \"bullet_extraction\"\n        });\n        return [];\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxJQUFLQSxFQUFFbkIsSUFBSSxNQUFNLEVBQUU7Z0JBQ3ZJO1FBQ0YsT0FBTztZQUNMLE1BQU0sSUFBSVYsTUFBTTtRQUNsQjtJQUVGLEVBQUUsT0FBT1AsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsNENBQTRDQTtRQUMxRHBCLG9EQUFRQSxDQUFDb0IsT0FBZ0I7WUFBRStGLFNBQVM7UUFBb0I7UUFDeEQsT0FBTyxFQUFFO0lBQ1g7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvYWktcmVzcG9uc2UtcGFyc2VyLnRzP2UxYTUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVGFpbG9yZWRSZXN1bHRTY2hlbWEsIHR5cGUgVGFpbG9yZWRSZXN1bHRUeXBlIH0gZnJvbSAnLi9zY2hlbWFzJ1xuaW1wb3J0IHsgUmVzdW1lSlNPTiB9IGZyb20gJy4vdHlwZXMnXG5pbXBvcnQgeyBsb2dBSVJlc3BvbnNlLCBsb2dFcnJvciB9IGZyb20gJy4vdGVsZW1ldHJ5J1xuaW1wb3J0IHsgZXh0cmFjdEtleXdvcmRzIH0gZnJvbSAnLi9qZCdcbmltcG9ydCB7IGdldE9wZW5BSSwgT1BFTkFJX01PREVMIH0gZnJvbSAnLi9vcGVuYWknXG5pbXBvcnQgeyBTWVNURU1fUFJPTVBULCBtYWtlVXNlclByb21wdCB9IGZyb20gJy4vcHJvbXB0cydcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHBhcnNlQUlSZXNwb25zZShyYXc6IHN0cmluZywgbWF4UmV0cmllczogbnVtYmVyID0gMyk6IFByb21pc2U8VGFpbG9yZWRSZXN1bHRUeXBlPiB7XG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICAvLyBDbGVhbiB0aGUgcmVzcG9uc2VcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSBjbGVhbkFJUmVzcG9uc2UocmF3KVxuICAgICAgXG4gICAgICAvLyBUcnkgdG8gcGFyc2VcbiAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoY2xlYW5lZClcbiAgICAgIFxuICAgICAgLy8gVmFsaWRhdGUgYW5kIGNvZXJjZSBpbnRvIHNjaGVtYVxuICAgICAgY29uc3QgdmFsaWRhdGVkID0gYXdhaXQgdmFsaWRhdGVBbmRDb2VyY2VSZXNwb25zZShwYXJzZWQsIGF0dGVtcHQpXG4gICAgICBcbiAgICAgIC8vIExvZyBzdWNjZXNzZnVsIHBhcnNpbmdcbiAgICAgIGxvZ0FJUmVzcG9uc2UoYXR0ZW1wdCwgdHJ1ZSwgdW5kZWZpbmVkLCByYXcubGVuZ3RoKVxuICAgICAgXG4gICAgICByZXR1cm4gdmFsaWRhdGVkXG4gICAgICBcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbGFzdEVycm9yID0gZXJyb3IgYXMgRXJyb3JcbiAgICAgIGNvbnNvbGUud2FybihgQUkgcmVzcG9uc2UgcGFyc2luZyBhdHRlbXB0ICR7YXR0ZW1wdH0gZmFpbGVkOmAsIGVycm9yKVxuICAgICAgXG4gICAgICAvLyBMb2cgZmFpbGVkIGF0dGVtcHQgd2l0aCBkZXRhaWxlZCBlcnJvclxuICAgICAgbG9nQUlSZXNwb25zZShhdHRlbXB0LCBmYWxzZSwgZXJyb3IubWVzc2FnZSwgcmF3Lmxlbmd0aClcbiAgICAgIFxuICAgICAgaWYgKGF0dGVtcHQgPCBtYXhSZXRyaWVzKSB7XG4gICAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwICogYXR0ZW1wdCkpXG4gICAgICB9XG4gICAgfVxuICB9XG4gIFxuICAvLyBMb2cgZmluYWwgZmFpbHVyZSB3aXRoIGRldGFpbGVkIGVycm9yIGluZm9ybWF0aW9uXG4gIGxvZ0FJUmVzcG9uc2UobWF4UmV0cmllcywgZmFsc2UsIGxhc3RFcnJvcj8ubWVzc2FnZSwgcmF3Lmxlbmd0aClcbiAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gcGFyc2UgQUkgcmVzcG9uc2UgYWZ0ZXIgJHttYXhSZXRyaWVzfSBhdHRlbXB0czogJHtsYXN0RXJyb3I/Lm1lc3NhZ2V9YClcbn1cblxuYXN5bmMgZnVuY3Rpb24gdmFsaWRhdGVBbmRDb2VyY2VSZXNwb25zZShwYXJzZWQ6IGFueSwgYXR0ZW1wdDogbnVtYmVyKTogUHJvbWlzZTxUYWlsb3JlZFJlc3VsdFR5cGU+IHtcbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCB0cnkgZGlyZWN0IHZhbGlkYXRpb25cbiAgICByZXR1cm4gVGFpbG9yZWRSZXN1bHRTY2hlbWEucGFyc2UocGFyc2VkKVxuICB9IGNhdGNoICh2YWxpZGF0aW9uRXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZyhgRGlyZWN0IHZhbGlkYXRpb24gZmFpbGVkIChhdHRlbXB0ICR7YXR0ZW1wdH0pLCBhdHRlbXB0aW5nIGNvZXJjaW9uOmAsIHZhbGlkYXRpb25FcnJvcilcbiAgICBcbiAgICAvLyBBdHRlbXB0IHRvIGNvZXJjZSB0aGUgcmVzcG9uc2UgaW50byB0aGUgY29ycmVjdCBzY2hlbWFcbiAgICBjb25zdCBjb2VyY2VkID0gY29lcmNlVG9TY2hlbWEocGFyc2VkKVxuICAgIFxuICAgIHRyeSB7XG4gICAgICAvLyBWYWxpZGF0ZSB0aGUgY29lcmNlZCByZXNwb25zZVxuICAgICAgcmV0dXJuIFRhaWxvcmVkUmVzdWx0U2NoZW1hLnBhcnNlKGNvZXJjZWQpXG4gICAgfSBjYXRjaCAoY29lcmNpb25FcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignQ29lcmNpb24gYWxzbyBmYWlsZWQ6JywgY29lcmNpb25FcnJvcilcbiAgICAgIFxuICAgICAgLy8gTG9nIGRldGFpbGVkIGZhaWx1cmUgaW5mb3JtYXRpb25cbiAgICAgIGNvbnN0IGZhaWx1cmVEZXRhaWxzID0ge1xuICAgICAgICBvcmlnaW5hbFJlc3BvbnNlOiBwYXJzZWQsXG4gICAgICAgIGNvZXJjZWRSZXNwb25zZTogY29lcmNlZCxcbiAgICAgICAgdmFsaWRhdGlvbkVycm9yOiB2YWxpZGF0aW9uRXJyb3IubWVzc2FnZSxcbiAgICAgICAgY29lcmNpb25FcnJvcjogY29lcmNpb25FcnJvci5tZXNzYWdlLFxuICAgICAgICBhdHRlbXB0XG4gICAgICB9XG4gICAgICBcbiAgICAgIGxvZ0Vycm9yKG5ldyBFcnJvcignU2NoZW1hIHZhbGlkYXRpb24gYW5kIGNvZXJjaW9uIGZhaWxlZCcpLCBmYWlsdXJlRGV0YWlscylcbiAgICAgIFxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBTY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWQ6ICR7dmFsaWRhdGlvbkVycm9yLm1lc3NhZ2V9LiBDb2VyY2lvbiBmYWlsZWQ6ICR7Y29lcmNpb25FcnJvci5tZXNzYWdlfWApXG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGNvZXJjZVRvU2NoZW1hKHBhcnNlZDogYW55KTogYW55IHtcbiAgY29uc3QgY29lcmNlZDogYW55ID0ge31cbiAgXG4gIC8vIENvZXJjZSBzdW1tYXJ5XG4gIGlmIChwYXJzZWQuc3VtbWFyeSAmJiB0eXBlb2YgcGFyc2VkLnN1bW1hcnkgPT09ICdzdHJpbmcnKSB7XG4gICAgY29lcmNlZC5zdW1tYXJ5ID0gcGFyc2VkLnN1bW1hcnkudHJpbSgpIHx8ICdQcm9mZXNzaW9uYWwgc3VtbWFyeSBub3QgYXZhaWxhYmxlJ1xuICB9IGVsc2UgaWYgKHBhcnNlZC5zdW1tYXJ5ICYmIHR5cGVvZiBwYXJzZWQuc3VtbWFyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAvLyBJZiBzdW1tYXJ5IGlzIGFuIG9iamVjdCwgdHJ5IHRvIGV4dHJhY3QgdGV4dFxuICAgIGNvZXJjZWQuc3VtbWFyeSA9IGV4dHJhY3RUZXh0RnJvbU9iamVjdChwYXJzZWQuc3VtbWFyeSkgfHwgJ1Byb2Zlc3Npb25hbCBzdW1tYXJ5IG5vdCBhdmFpbGFibGUnXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5zdW1tYXJ5ID0gJ1Byb2Zlc3Npb25hbCBzdW1tYXJ5IG5vdCBhdmFpbGFibGUnXG4gIH1cbiAgXG4gIC8vIENvZXJjZSBza2lsbHNfc2VjdGlvblxuICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQuc2tpbGxzX3NlY3Rpb24pKSB7XG4gICAgY29lcmNlZC5za2lsbHNfc2VjdGlvbiA9IHBhcnNlZC5za2lsbHNfc2VjdGlvbi5maWx0ZXIoc2tpbGwgPT4gXG4gICAgICB0eXBlb2Ygc2tpbGwgPT09ICdzdHJpbmcnICYmIHNraWxsLnRyaW0oKS5sZW5ndGggPiAwXG4gICAgKS5tYXAoc2tpbGwgPT4gc2tpbGwudHJpbSgpKVxuICB9IGVsc2UgaWYgKHBhcnNlZC5za2lsbHNfc2VjdGlvbiAmJiB0eXBlb2YgcGFyc2VkLnNraWxsc19zZWN0aW9uID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIHNraWxscyBpcyBhIHN0cmluZywgc3BsaXQgaXRcbiAgICBjb2VyY2VkLnNraWxsc19zZWN0aW9uID0gcGFyc2VkLnNraWxsc19zZWN0aW9uXG4gICAgICAuc3BsaXQoL1ssO3zigKJcXG5dLylcbiAgICAgIC5tYXAocyA9PiBzLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIocyA9PiBzLmxlbmd0aCA+IDApXG4gIH0gZWxzZSBpZiAocGFyc2VkLnNraWxscyAmJiBBcnJheS5pc0FycmF5KHBhcnNlZC5za2lsbHMpKSB7XG4gICAgLy8gQWx0ZXJuYXRpdmUgZmllbGQgbmFtZVxuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBwYXJzZWQuc2tpbGxzLmZpbHRlcihza2lsbCA9PiBcbiAgICAgIHR5cGVvZiBza2lsbCA9PT0gJ3N0cmluZycgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDBcbiAgICApLm1hcChza2lsbCA9PiBza2lsbC50cmltKCkpXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5za2lsbHNfc2VjdGlvbiA9IFtdXG4gIH1cbiAgXG4gIC8vIENvZXJjZSBleHBlcmllbmNlXG4gIGlmIChBcnJheS5pc0FycmF5KHBhcnNlZC5leHBlcmllbmNlKSkge1xuICAgIGNvZXJjZWQuZXhwZXJpZW5jZSA9IHBhcnNlZC5leHBlcmllbmNlLm1hcChleHAgPT4gY29lcmNlRXhwZXJpZW5jZShleHApKS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIGlmIChwYXJzZWQuZXhwZXJpZW5jZSAmJiB0eXBlb2YgcGFyc2VkLmV4cGVyaWVuY2UgPT09ICdvYmplY3QnKSB7XG4gICAgLy8gSWYgZXhwZXJpZW5jZSBpcyBhbiBvYmplY3QsIHRyeSB0byBjb252ZXJ0IHRvIGFycmF5XG4gICAgY29lcmNlZC5leHBlcmllbmNlID0gW2NvZXJjZUV4cGVyaWVuY2UocGFyc2VkLmV4cGVyaWVuY2UpXS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLmV4cGVyaWVuY2UgPSBbXVxuICB9XG4gIFxuICByZXR1cm4gY29lcmNlZFxufVxuXG5mdW5jdGlvbiBjb2VyY2VFeHBlcmllbmNlKGV4cDogYW55KTogYW55IHtcbiAgaWYgKCFleHAgfHwgdHlwZW9mIGV4cCAhPT0gJ29iamVjdCcpIHJldHVybiBudWxsXG4gIFxuICBjb25zdCBjb2VyY2VkOiBhbnkgPSB7fVxuICBcbiAgLy8gQ29lcmNlIGNvbXBhbnlcbiAgaWYgKHR5cGVvZiBleHAuY29tcGFueSA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2VyY2VkLmNvbXBhbnkgPSBleHAuY29tcGFueS50cmltKCkgfHwgJ1Vua25vd24gQ29tcGFueSdcbiAgfSBlbHNlIGlmIChleHAuY29tcGFueSAmJiB0eXBlb2YgZXhwLmNvbXBhbnkgPT09ICdvYmplY3QnKSB7XG4gICAgY29lcmNlZC5jb21wYW55ID0gZXh0cmFjdFRleHRGcm9tT2JqZWN0KGV4cC5jb21wYW55KSB8fCAnVW5rbm93biBDb21wYW55J1xuICB9IGVsc2Uge1xuICAgIGNvZXJjZWQuY29tcGFueSA9ICdVbmtub3duIENvbXBhbnknXG4gIH1cbiAgXG4gIC8vIENvZXJjZSByb2xlXG4gIGlmICh0eXBlb2YgZXhwLnJvbGUgPT09ICdzdHJpbmcnKSB7XG4gICAgY29lcmNlZC5yb2xlID0gZXhwLnJvbGUudHJpbSgpIHx8ICdVbmtub3duIFJvbGUnXG4gIH0gZWxzZSBpZiAoZXhwLnJvbGUgJiYgdHlwZW9mIGV4cC5yb2xlID09PSAnb2JqZWN0Jykge1xuICAgIGNvZXJjZWQucm9sZSA9IGV4dHJhY3RUZXh0RnJvbU9iamVjdChleHAucm9sZSkgfHwgJ1Vua25vd24gUm9sZSdcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLnJvbGUgPSAnVW5rbm93biBSb2xlJ1xuICB9XG4gIFxuICAvLyBDb2VyY2UgYnVsbGV0c1xuICBpZiAoQXJyYXkuaXNBcnJheShleHAuYnVsbGV0cykpIHtcbiAgICBjb2VyY2VkLmJ1bGxldHMgPSBleHAuYnVsbGV0cy5maWx0ZXIoYnVsbGV0ID0+IFxuICAgICAgdHlwZW9mIGJ1bGxldCA9PT0gJ3N0cmluZycgJiYgYnVsbGV0LnRyaW0oKS5sZW5ndGggPiAwXG4gICAgKS5tYXAoYnVsbGV0ID0+IGJ1bGxldC50cmltKCkpXG4gIH0gZWxzZSBpZiAoZXhwLmJ1bGxldHMgJiYgdHlwZW9mIGV4cC5idWxsZXRzID09PSAnc3RyaW5nJykge1xuICAgIC8vIElmIGJ1bGxldHMgaXMgYSBzdHJpbmcsIHNwbGl0IGl0XG4gICAgY29lcmNlZC5idWxsZXRzID0gZXhwLmJ1bGxldHNcbiAgICAgIC5zcGxpdCgvW+KAolxcbl0vKVxuICAgICAgLm1hcChiID0+IGIudHJpbSgpKVxuICAgICAgLmZpbHRlcihiID0+IGIubGVuZ3RoID4gMClcbiAgfSBlbHNlIGlmIChleHAuZGVzY3JpcHRpb24gJiYgdHlwZW9mIGV4cC5kZXNjcmlwdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICAvLyBBbHRlcm5hdGl2ZSBmaWVsZCBuYW1lXG4gICAgY29lcmNlZC5idWxsZXRzID0gZXhwLmRlc2NyaXB0aW9uXG4gICAgICAuc3BsaXQoL1vigKJcXG5dLylcbiAgICAgIC5tYXAoYiA9PiBiLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoYiA9PiBiLmxlbmd0aCA+IDApXG4gIH0gZWxzZSB7XG4gICAgY29lcmNlZC5idWxsZXRzID0gW11cbiAgfVxuICBcbiAgcmV0dXJuIGNvZXJjZWRcbn1cblxuZnVuY3Rpb24gZXh0cmFjdFRleHRGcm9tT2JqZWN0KG9iajogYW55KTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2Ygb2JqID09PSAnc3RyaW5nJykgcmV0dXJuIG9ialxuICBpZiAodHlwZW9mIG9iaiA9PT0gJ251bWJlcicpIHJldHVybiBvYmoudG9TdHJpbmcoKVxuICBpZiAoQXJyYXkuaXNBcnJheShvYmopKSByZXR1cm4gb2JqLm1hcChleHRyYWN0VGV4dEZyb21PYmplY3QpLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJylcbiAgaWYgKG9iaiAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jykge1xuICAgIC8vIFRyeSBjb21tb24gdGV4dCBmaWVsZHNcbiAgICBjb25zdCB0ZXh0RmllbGRzID0gWyd0ZXh0JywgJ2NvbnRlbnQnLCAndmFsdWUnLCAnZGVzY3JpcHRpb24nLCAndGl0bGUnXVxuICAgIGZvciAoY29uc3QgZmllbGQgb2YgdGV4dEZpZWxkcykge1xuICAgICAgaWYgKG9ialtmaWVsZF0gJiYgdHlwZW9mIG9ialtmaWVsZF0gPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBvYmpbZmllbGRdXG4gICAgICB9XG4gICAgfVxuICAgIC8vIEZhbGxiYWNrIHRvIGZpcnN0IHN0cmluZyB2YWx1ZVxuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKG9iaikpIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gbnVsbFxufVxuXG5mdW5jdGlvbiBjbGVhbkFJUmVzcG9uc2UocmF3OiBzdHJpbmcpOiBzdHJpbmcge1xuICAvLyBSZW1vdmUgYW55IHRleHQgYmVmb3JlIHRoZSBmaXJzdCB7XG4gIGNvbnN0IGZpcnN0QnJhY2UgPSByYXcuaW5kZXhPZigneycpXG4gIGlmIChmaXJzdEJyYWNlID4gMCkge1xuICAgIHJhdyA9IHJhdy5zdWJzdHJpbmcoZmlyc3RCcmFjZSlcbiAgfVxuICBcbiAgLy8gUmVtb3ZlIGFueSB0ZXh0IGFmdGVyIHRoZSBsYXN0IH1cbiAgY29uc3QgbGFzdEJyYWNlID0gcmF3Lmxhc3RJbmRleE9mKCd9JylcbiAgaWYgKGxhc3RCcmFjZSA+IDAgJiYgbGFzdEJyYWNlIDwgcmF3Lmxlbmd0aCAtIDEpIHtcbiAgICByYXcgPSByYXcuc3Vic3RyaW5nKDAsIGxhc3RCcmFjZSArIDEpXG4gIH1cbiAgXG4gIC8vIEZpeCBjb21tb24gSlNPTiBpc3N1ZXNcbiAgcmF3ID0gcmF3XG4gICAgLnJlcGxhY2UoL1xcbi9nLCAnICcpIC8vIFJlcGxhY2UgbmV3bGluZXMgd2l0aCBzcGFjZXNcbiAgICAucmVwbGFjZSgvXFxzKy9nLCAnICcpIC8vIE5vcm1hbGl6ZSB3aGl0ZXNwYWNlXG4gICAgLnJlcGxhY2UoLywoXFxzKlt9XFxdXSkvZywgJyQxJykgLy8gUmVtb3ZlIHRyYWlsaW5nIGNvbW1hc1xuICAgIC5yZXBsYWNlKC8oW15cXFxcXSlcXFxcKFteXCJcXFxcXFwvYmZucnRdKS9nLCAnJDFcXFxcXFxcXCQyJykgLy8gRml4IHVuZXNjYXBlZCBiYWNrc2xhc2hlc1xuICAgIC5yZXBsYWNlKC8oW15cXFxcXSlcXFxcKFteXCJcXFxcXFwvYmZucnRdKS9nLCAnJDFcXFxcXFxcXCQyJykgLy8gRml4IHVuZXNjYXBlZCBiYWNrc2xhc2hlcyAoc2Vjb25kIHBhc3MpXG4gICAgLnJlcGxhY2UoL1wiL2csICdcIicpIC8vIEZpeCBzbWFydCBxdW90ZXNcbiAgICAucmVwbGFjZSgvJy9nLCBcIidcIikgLy8gRml4IHNtYXJ0IGFwb3N0cm9waGVzXG4gIFxuICByZXR1cm4gcmF3XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUYWlsb3JlZFJlc3VtZShcbiAgb3JpZ2luYWw6IFJlc3VtZUpTT04sIFxuICBqZFRleHQ6IHN0cmluZywgXG4gIHRvbmU6ICdwcm9mZXNzaW9uYWwnIHwgJ2NvbmNpc2UnIHwgJ2ltcGFjdC1oZWF2eSdcbik6IFByb21pc2U8eyB0YWlsb3JlZDogVGFpbG9yZWRSZXN1bHRUeXBlLCB0b2tlbnM6IG51bWJlciB9PiB7XG4gIGNvbnN0IG1heFJldHJpZXMgPSAzXG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcbiAgXG4gIC8vIEVuaGFuY2VkIHZhbGlkYXRpb24gLSBjaGVjayBpZiB3ZSBoYXZlIG1lYW5pbmdmdWwgZGF0YSB0byB3b3JrIHdpdGhcbiAgaWYgKCFvcmlnaW5hbC5leHBlcmllbmNlIHx8IG9yaWdpbmFsLmV4cGVyaWVuY2UubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc29sZS53YXJuKCdObyBleHBlcmllbmNlIGRhdGEgYXZhaWxhYmxlIGZvciB0YWlsb3JpbmcsIGF0dGVtcHRpbmcgZXh0cmFjdGlvbiBmcm9tIGZyZWUgdGV4dCcpXG4gICAgcmV0dXJuIGF3YWl0IGhhbmRsZU1pc3NpbmdFeHBlcmllbmNlKG9yaWdpbmFsLCBqZFRleHQsIHRvbmUpXG4gIH1cbiAgXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBtZXNzYWdlcyA9IFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJyBhcyBjb25zdCwgY29udGVudDogU1lTVEVNX1BST01QVCB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJyBhcyBjb25zdCwgY29udGVudDogbWFrZVVzZXJQcm9tcHQoeyByZXN1bWVfanNvbjogb3JpZ2luYWwsIGpvYl90ZXh0OiBqZFRleHQsIHRvbmUgfSkgfVxuICAgICAgXVxuXG4gICAgICBjb25zdCBjaGF0ID0gYXdhaXQgZ2V0T3BlbkFJKCkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgICBtb2RlbDogT1BFTkFJX01PREVMLFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAuMixcbiAgICAgICAgcmVzcG9uc2VfZm9ybWF0OiB7IHR5cGU6ICdqc29uX29iamVjdCcgfSxcbiAgICAgICAgbWF4X3Rva2VuczogNDAwMCAvLyBFbnN1cmUgd2UgZG9uJ3QgZ2V0IHRydW5jYXRlZCByZXNwb25zZXNcbiAgICAgIH0pXG5cbiAgICAgIGNvbnN0IHJhdyA9IGNoYXQuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nXG4gICAgICBcbiAgICAgIGlmICghcmF3IHx8IHJhdy50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRW1wdHkgcmVzcG9uc2UgZnJvbSBBSScpXG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFBhcnNlIGFuZCB2YWxpZGF0ZSB3aXRoIGRldGFpbGVkIGVycm9yIHJlcG9ydGluZ1xuICAgICAgY29uc3QgdGFpbG9yZWQgPSBhd2FpdCBwYXJzZUFJUmVzcG9uc2UocmF3KVxuICAgICAgXG4gICAgICAvLyBBZGRpdGlvbmFsIHZhbGlkYXRpb24gLSBlbnN1cmUgd2UgZ290IG1lYW5pbmdmdWwgY29udGVudFxuICAgICAgaWYgKCF0YWlsb3JlZCB8fCB0eXBlb2YgdGFpbG9yZWQgIT09ICdvYmplY3QnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQUkgcmVzcG9uc2UgaXMgbm90IGEgdmFsaWQgb2JqZWN0JylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gSWYgZXhwZXJpZW5jZSBpcyBtaXNzaW5nIG9yIGVtcHR5LCB0cnkgdG8gcHJlc2VydmUgb3JpZ2luYWxcbiAgICAgIGlmICghdGFpbG9yZWQuZXhwZXJpZW5jZSB8fCB0YWlsb3JlZC5leHBlcmllbmNlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0FJIHJlc3BvbnNlIG1pc3NpbmcgZXhwZXJpZW5jZSwgcHJlc2VydmluZyBvcmlnaW5hbCBleHBlcmllbmNlJylcbiAgICAgICAgdGFpbG9yZWQuZXhwZXJpZW5jZSA9IG9yaWdpbmFsLmV4cGVyaWVuY2UgfHwgW11cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gRXh0cmFjdCB0b2tlbiB1c2FnZVxuICAgICAgY29uc3QgdG9rZW5zID0gY2hhdC51c2FnZT8udG90YWxfdG9rZW5zIHx8IDBcbiAgICAgIFxuICAgICAgLy8gTG9nIHN1Y2Nlc3NmdWwgQUkgcmVxdWVzdFxuICAgICAgbG9nQUlSZXNwb25zZShhdHRlbXB0LCB0cnVlLCB1bmRlZmluZWQsIHJhdy5sZW5ndGgpXG4gICAgICBcbiAgICAgIHJldHVybiB7IHRhaWxvcmVkLCB0b2tlbnMgfVxuICAgICAgXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yIGFzIEVycm9yXG4gICAgICBjb25zb2xlLndhcm4oYEFJIHJlcXVlc3QgYXR0ZW1wdCAke2F0dGVtcHR9IGZhaWxlZDpgLCBlcnJvcilcbiAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZGV0YWlsczonLCB7XG4gICAgICAgIG1lc3NhZ2U6IGVycm9yLm1lc3NhZ2UsXG4gICAgICAgIHN0YWNrOiBlcnJvci5zdGFjayxcbiAgICAgICAgb3JpZ2luYWxFeHBlcmllbmNlTGVuZ3RoOiBvcmlnaW5hbC5leHBlcmllbmNlPy5sZW5ndGggfHwgMCxcbiAgICAgICAgamRMZW5ndGg6IGpkVGV4dC5sZW5ndGgsXG4gICAgICAgIGF0dGVtcHRcbiAgICAgIH0pXG4gICAgICBcbiAgICAgIC8vIExvZyBmYWlsZWQgYXR0ZW1wdCB3aXRoIGRldGFpbGVkIGNvbnRleHRcbiAgICAgIGxvZ0FJUmVzcG9uc2UoYXR0ZW1wdCwgZmFsc2UsIGVycm9yLm1lc3NhZ2UpXG4gICAgICBcbiAgICAgIGlmIChhdHRlbXB0IDwgbWF4UmV0cmllcykge1xuICAgICAgICAvLyBXYWl0IGJlZm9yZSByZXRyeSB3aXRoIGV4cG9uZW50aWFsIGJhY2tvZmZcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDAgKiBNYXRoLnBvdygyLCBhdHRlbXB0IC0gMSkpKVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgLy8gRmluYWwgZmFsbGJhY2s6IHJldHVybiBvcmlnaW5hbCByZXN1bWUgd2l0aCBtaW5pbWFsIGNoYW5nZXNcbiAgY29uc29sZS5lcnJvcignQWxsIEFJIGF0dGVtcHRzIGZhaWxlZCwgcmV0dXJuaW5nIGZhbGxiYWNrIHJlc3BvbnNlJylcbiAgY29uc29sZS5lcnJvcignTGFzdCBlcnJvcjonLCBsYXN0RXJyb3I/Lm1lc3NhZ2UpXG4gIGxvZ0Vycm9yKG5ldyBFcnJvcignQWxsIEFJIGF0dGVtcHRzIGZhaWxlZCcpLCB7IFxuICAgIG9yaWdpbmFsLCBcbiAgICBqZFRleHQsIFxuICAgIHRvbmUsIFxuICAgIGxhc3RFcnJvcjogbGFzdEVycm9yPy5tZXNzYWdlLFxuICAgIGF0dGVtcHRzOiBtYXhSZXRyaWVzXG4gIH0pXG4gIFxuICByZXR1cm4geyB0YWlsb3JlZDogY3JlYXRlRmFsbGJhY2tSZXNwb25zZShvcmlnaW5hbCwgamRUZXh0KSwgdG9rZW5zOiAwIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gaGFuZGxlTWlzc2luZ0V4cGVyaWVuY2UoXG4gIG9yaWdpbmFsOiBSZXN1bWVKU09OLCBcbiAgamRUZXh0OiBzdHJpbmcsIFxuICB0b25lOiAncHJvZmVzc2lvbmFsJyB8ICdjb25jaXNlJyB8ICdpbXBhY3QtaGVhdnknXG4pOiBQcm9taXNlPHsgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0VHlwZSwgdG9rZW5zOiBudW1iZXIgfT4ge1xuICBjb25zb2xlLmxvZygnSGFuZGxpbmcgbWlzc2luZyBleHBlcmllbmNlIC0gYXR0ZW1wdGluZyBleHRyYWN0aW9uIGZyb20gZnJlZSB0ZXh0JylcbiAgXG4gIHRyeSB7XG4gICAgLy8gRmlyc3QsIHRyeSB0byBleHRyYWN0IGV4cGVyaWVuY2UgZnJvbSBmcmVlIHRleHRcbiAgICBjb25zdCBleHRyYWN0aW9uUHJvbXB0ID0gYEV4dHJhY3Qgd29yayBleHBlcmllbmNlIGZyb20gdGhlIGZvbGxvd2luZyByZXN1bWUgdGV4dC4gUmV0dXJuIGEgSlNPTiBvYmplY3Qgd2l0aCBhbiBcImV4cGVyaWVuY2VcIiBhcnJheS4gRWFjaCBleHBlcmllbmNlIHNob3VsZCBoYXZlIFwiY29tcGFueVwiLCBcInJvbGVcIiwgYW5kIFwiYnVsbGV0c1wiIGZpZWxkcy5cblxuUmVzdW1lIHRleHQ6ICR7SlNPTi5zdHJpbmdpZnkob3JpZ2luYWwpfVxuXG5SZXR1cm4gb25seSB2YWxpZCBKU09OLmBcblxuICAgIGNvbnN0IGV4dHJhY3Rpb25DaGF0ID0gYXdhaXQgZ2V0T3BlbkFJKCkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IE9QRU5BSV9NT0RFTCxcbiAgICAgIG1lc3NhZ2VzOiBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdZb3UgYXJlIGFuIGV4cGVydCBhdCBleHRyYWN0aW5nIHN0cnVjdHVyZWQgZGF0YSBmcm9tIHJlc3VtZSB0ZXh0LiBSZXR1cm4gb25seSB2YWxpZCBKU09OLicgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6IGV4dHJhY3Rpb25Qcm9tcHQgfVxuICAgICAgXSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjEsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogJ2pzb25fb2JqZWN0JyB9LFxuICAgICAgbWF4X3Rva2VuczogMjAwMFxuICAgIH0pXG5cbiAgICBjb25zdCBleHRyYWN0aW9uUmF3ID0gZXh0cmFjdGlvbkNoYXQuY2hvaWNlc1swXT8ubWVzc2FnZT8uY29udGVudCB8fCAne30nXG4gICAgY29uc3QgZXh0cmFjdGVkRGF0YSA9IEpTT04ucGFyc2UoZXh0cmFjdGlvblJhdylcbiAgICBcbiAgICBpZiAoZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlICYmIEFycmF5LmlzQXJyYXkoZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlKSAmJiBleHRyYWN0ZWREYXRhLmV4cGVyaWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgY29uc29sZS5sb2coJ1N1Y2Nlc3NmdWxseSBleHRyYWN0ZWQgZXhwZXJpZW5jZSBmcm9tIGZyZWUgdGV4dCcpXG4gICAgICAvLyBOb3cgdGFpbG9yIHRoZSBleHRyYWN0ZWQgZXhwZXJpZW5jZVxuICAgICAgY29uc3QgdGFpbG9yZWQgPSBhd2FpdCBnZXRUYWlsb3JlZFJlc3VtZShcbiAgICAgICAgeyAuLi5vcmlnaW5hbCwgZXhwZXJpZW5jZTogZXh0cmFjdGVkRGF0YS5leHBlcmllbmNlIH0sIFxuICAgICAgICBqZFRleHQsIFxuICAgICAgICB0b25lXG4gICAgICApXG4gICAgICByZXR1cm4gdGFpbG9yZWRcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGV4dHJhY3QgZXhwZXJpZW5jZSBmcm9tIGZyZWUgdGV4dDonLCBlcnJvcilcbiAgfVxuICBcbiAgLy8gSWYgZXh0cmFjdGlvbiBmYWlscywgcmV0dXJuIGZhbGxiYWNrXG4gIHJldHVybiB7IHRhaWxvcmVkOiBjcmVhdGVGYWxsYmFja1Jlc3BvbnNlKG9yaWdpbmFsLCBqZFRleHQpLCB0b2tlbnM6IDAgfVxufVxuXG5mdW5jdGlvbiBjcmVhdGVGYWxsYmFja1Jlc3BvbnNlKG9yaWdpbmFsOiBSZXN1bWVKU09OLCBqZFRleHQ6IHN0cmluZyk6IFRhaWxvcmVkUmVzdWx0VHlwZSB7XG4gIC8vIEV4dHJhY3Qga2V5d29yZHMgZnJvbSBqb2IgZGVzY3JpcHRpb25cbiAgY29uc3Qga2V5d29yZHMgPSBleHRyYWN0S2V5d29yZHMoamRUZXh0LCAxMClcbiAgXG4gIC8vIENyZWF0ZSBhIG1pbmltYWwgdGFpbG9yZWQgcmVzcG9uc2UgdGhhdCBwcmVzZXJ2ZXMgb3JpZ2luYWwgZGF0YVxuICByZXR1cm4ge1xuICAgIHN1bW1hcnk6IG9yaWdpbmFsLnN1bW1hcnkgfHwgJ0V4cGVyaWVuY2VkIHByb2Zlc3Npb25hbCB3aXRoIHJlbGV2YW50IHNraWxscyBhbmQgZXhwZXJpZW5jZS4nLFxuICAgIHNraWxsc19zZWN0aW9uOiBvcmlnaW5hbC5za2lsbHMgfHwgW10sXG4gICAgZXhwZXJpZW5jZTogb3JpZ2luYWwuZXhwZXJpZW5jZSB8fCBbXVxuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBzdHJ1Y3R1cmVkIGV4cGVyaWVuY2UgZnJvbSBmcmVlLWZvcm0gdGV4dCB1c2luZyBBSVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEJ1bGxldHNGcm9tRnJlZVRleHQoZnJlZVRleHQ6IHN0cmluZyk6IFByb21pc2U8UmVzdW1lSlNPTlsnZXhwZXJpZW5jZSddPiB7XG4gIGlmICghZnJlZVRleHQgfHwgZnJlZVRleHQudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgY29uc3Qgb3BlbmFpID0gZ2V0T3BlbkFJKClcbiAgaWYgKCFvcGVuYWkpIHtcbiAgICBjb25zb2xlLndhcm4oJ09wZW5BSSBub3QgYXZhaWxhYmxlIGZvciBidWxsZXQgZXh0cmFjdGlvbicpXG4gICAgcmV0dXJuIFtdXG4gIH1cblxuICBjb25zdCBwcm9tcHQgPSBgR2l2ZW4gdGhlIGZvbGxvd2luZyBmcmVlLWZvcm0gdGV4dCBkZXNjcmliaW5nIHdvcmsgZXhwZXJpZW5jZSwgZXh0cmFjdCBpdCBpbnRvIGEgSlNPTiBhcnJheSBvZiByb2xlcy4gRWFjaCByb2xlIHNob3VsZCBoYXZlICdjb21wYW55JywgJ3JvbGUnLCAnZGF0ZXMnIChvcHRpb25hbCwgY2FuIGJlIGVtcHR5IHN0cmluZyksIGFuZCAnYnVsbGV0cycgKGFuIGFycmF5IG9mIHN0cmluZ3MpLiBJZiBubyBzcGVjaWZpYyByb2xlIG9yIGNvbXBhbnkgaXMgY2xlYXIsIGdyb3VwIHJlbGF0ZWQgYnVsbGV0cyB1bmRlciBhIGdlbmVyaWMgXCJFeHBlcmllbmNlXCIgcm9sZS5cblxuRXhhbXBsZTpcblRleHQ6IFwiQ29tcGFueSBBICgyMDIwLTIwMjIpIC0gU29mdHdhcmUgRW5naW5lZXIuIERldmVsb3BlZCBYLCBJbXBsZW1lbnRlZCBZLiBDb21wYW55IEIgKDIwMTgtMjAyMCkgLSBKdW5pb3IgRGV2LiBBc3Npc3RlZCB3aXRoIFouXCJcbk91dHB1dDpcbltcbiAge1xuICAgIFwiY29tcGFueVwiOiBcIkNvbXBhbnkgQVwiLFxuICAgIFwicm9sZVwiOiBcIlNvZnR3YXJlIEVuZ2luZWVyXCIsXG4gICAgXCJkYXRlc1wiOiBcIjIwMjAtMjAyMlwiLFxuICAgIFwiYnVsbGV0c1wiOiBbXCJEZXZlbG9wZWQgWFwiLCBcIkltcGxlbWVudGVkIFlcIl1cbiAgfSxcbiAge1xuICAgIFwiY29tcGFueVwiOiBcIkNvbXBhbnkgQlwiLFxuICAgIFwicm9sZVwiOiBcIkp1bmlvciBEZXZcIixcbiAgICBcImRhdGVzXCI6IFwiMjAxOC0yMDIwXCIsXG4gICAgXCJidWxsZXRzXCI6IFtcIkFzc2lzdGVkIHdpdGggWlwiXVxuICB9XG5dXG5cblRleHQ6IFwiJHtmcmVlVGV4dH1cIlxuT3V0cHV0OmBcblxuICB0cnkge1xuICAgIGNvbnN0IGNoYXRDb21wbGV0aW9uID0gYXdhaXQgb3BlbmFpLmNoYXQuY29tcGxldGlvbnMuY3JlYXRlKHtcbiAgICAgIG1vZGVsOiBPUEVOQUlfTU9ERUwsXG4gICAgICBtZXNzYWdlczogW3sgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHByb21wdCB9XSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLjIsXG4gICAgICByZXNwb25zZV9mb3JtYXQ6IHsgdHlwZTogXCJqc29uX29iamVjdFwiIH0sXG4gICAgfSlcblxuICAgIGNvbnN0IHJhd1Jlc3BvbnNlID0gY2hhdENvbXBsZXRpb24uY2hvaWNlc1swXS5tZXNzYWdlLmNvbnRlbnRcbiAgICBpZiAoIXJhd1Jlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJBSSByZXR1cm5lZCBhbiBlbXB0eSByZXNwb25zZSBmb3IgYnVsbGV0IGV4dHJhY3Rpb25cIilcbiAgICB9XG5cbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhd1Jlc3BvbnNlKVxuICAgIFxuICAgIC8vIFZhbGlkYXRlIHRoZSBzdHJ1Y3R1cmVcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwYXJzZWQpKSB7XG4gICAgICByZXR1cm4gcGFyc2VkLm1hcCgocm9sZTogYW55KSA9PiAoe1xuICAgICAgICBjb21wYW55OiAocm9sZS5jb21wYW55IHx8ICcnKS50cmltKCkgfHwgJ1Vua25vd24gQ29tcGFueScsXG4gICAgICAgIHJvbGU6IChyb2xlLnJvbGUgfHwgJycpLnRyaW0oKSB8fCAnVW5rbm93biBSb2xlJyxcbiAgICAgICAgZGF0ZXM6IChyb2xlLmRhdGVzIHx8ICcnKS50cmltKCkgfHwgJycsXG4gICAgICAgIGJ1bGxldHM6IEFycmF5LmlzQXJyYXkocm9sZS5idWxsZXRzKSA/IHJvbGUuYnVsbGV0cy5maWx0ZXIoYiA9PiB0eXBlb2YgYiA9PT0gJ3N0cmluZycgJiYgYi50cmltKCkubGVuZ3RoID4gMCkubWFwKGIgPT4gYi50cmltKCkpIDogW11cbiAgICAgIH0pKVxuICAgIH0gZWxzZSBpZiAocGFyc2VkLmV4cGVyaWVuY2UgJiYgQXJyYXkuaXNBcnJheShwYXJzZWQuZXhwZXJpZW5jZSkpIHtcbiAgICAgIHJldHVybiBwYXJzZWQuZXhwZXJpZW5jZS5tYXAoKHJvbGU6IGFueSkgPT4gKHtcbiAgICAgICAgY29tcGFueTogKHJvbGUuY29tcGFueSB8fCAnJykudHJpbSgpIHx8ICdVbmtub3duIENvbXBhbnknLFxuICAgICAgICByb2xlOiAocm9sZS5yb2xlIHx8ICcnKS50cmltKCkgfHwgJ1Vua25vd24gUm9sZScsXG4gICAgICAgIGRhdGVzOiAocm9sZS5kYXRlcyB8fCAnJykudHJpbSgpIHx8ICcnLFxuICAgICAgICBidWxsZXRzOiBBcnJheS5pc0FycmF5KHJvbGUuYnVsbGV0cykgPyByb2xlLmJ1bGxldHMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT09ICdzdHJpbmcnICYmIGIudHJpbSgpLmxlbmd0aCA+IDApLm1hcChiID0+IGIudHJpbSgpKSA6IFtdXG4gICAgICB9KSlcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVW5leHBlY3RlZCByZXNwb25zZSBmb3JtYXQgZnJvbSBBSVwiKVxuICAgIH1cblxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBleHRyYWN0aW5nIGJ1bGxldHMgZnJvbSBmcmVlIHRleHQ6XCIsIGVycm9yKVxuICAgIGxvZ0Vycm9yKGVycm9yIGFzIEVycm9yLCB7IGNvbnRleHQ6ICdidWxsZXRfZXh0cmFjdGlvbicgfSlcbiAgICByZXR1cm4gW11cbiAgfVxufVxuXG4iXSwibmFtZXMiOlsiVGFpbG9yZWRSZXN1bHRTY2hlbWEiLCJsb2dBSVJlc3BvbnNlIiwibG9nRXJyb3IiLCJleHRyYWN0S2V5d29yZHMiLCJnZXRPcGVuQUkiLCJPUEVOQUlfTU9ERUwiLCJTWVNURU1fUFJPTVBUIiwibWFrZVVzZXJQcm9tcHQiLCJwYXJzZUFJUmVzcG9uc2UiLCJyYXciLCJtYXhSZXRyaWVzIiwibGFzdEVycm9yIiwiYXR0ZW1wdCIsImNsZWFuZWQiLCJjbGVhbkFJUmVzcG9uc2UiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJ2YWxpZGF0ZWQiLCJ2YWxpZGF0ZUFuZENvZXJjZVJlc3BvbnNlIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwiZXJyb3IiLCJjb25zb2xlIiwid2FybiIsIm1lc3NhZ2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInNldFRpbWVvdXQiLCJFcnJvciIsInZhbGlkYXRpb25FcnJvciIsImxvZyIsImNvZXJjZWQiLCJjb2VyY2VUb1NjaGVtYSIsImNvZXJjaW9uRXJyb3IiLCJmYWlsdXJlRGV0YWlscyIsIm9yaWdpbmFsUmVzcG9uc2UiLCJjb2VyY2VkUmVzcG9uc2UiLCJzdW1tYXJ5IiwidHJpbSIsImV4dHJhY3RUZXh0RnJvbU9iamVjdCIsIkFycmF5IiwiaXNBcnJheSIsInNraWxsc19zZWN0aW9uIiwiZmlsdGVyIiwic2tpbGwiLCJtYXAiLCJzcGxpdCIsInMiLCJza2lsbHMiLCJleHBlcmllbmNlIiwiZXhwIiwiY29lcmNlRXhwZXJpZW5jZSIsIkJvb2xlYW4iLCJjb21wYW55Iiwicm9sZSIsImJ1bGxldHMiLCJidWxsZXQiLCJiIiwiZGVzY3JpcHRpb24iLCJvYmoiLCJ0b1N0cmluZyIsImpvaW4iLCJ0ZXh0RmllbGRzIiwiZmllbGQiLCJrZXkiLCJ2YWx1ZSIsIk9iamVjdCIsImVudHJpZXMiLCJmaXJzdEJyYWNlIiwiaW5kZXhPZiIsInN1YnN0cmluZyIsImxhc3RCcmFjZSIsImxhc3RJbmRleE9mIiwicmVwbGFjZSIsImdldFRhaWxvcmVkUmVzdW1lIiwib3JpZ2luYWwiLCJqZFRleHQiLCJ0b25lIiwiaGFuZGxlTWlzc2luZ0V4cGVyaWVuY2UiLCJtZXNzYWdlcyIsImNvbnRlbnQiLCJyZXN1bWVfanNvbiIsImpvYl90ZXh0IiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsInJlc3BvbnNlX2Zvcm1hdCIsInR5cGUiLCJtYXhfdG9rZW5zIiwiY2hvaWNlcyIsInRhaWxvcmVkIiwidG9rZW5zIiwidXNhZ2UiLCJ0b3RhbF90b2tlbnMiLCJzdGFjayIsIm9yaWdpbmFsRXhwZXJpZW5jZUxlbmd0aCIsImpkTGVuZ3RoIiwiTWF0aCIsInBvdyIsImF0dGVtcHRzIiwiY3JlYXRlRmFsbGJhY2tSZXNwb25zZSIsImV4dHJhY3Rpb25Qcm9tcHQiLCJzdHJpbmdpZnkiLCJleHRyYWN0aW9uQ2hhdCIsImV4dHJhY3Rpb25SYXciLCJleHRyYWN0ZWREYXRhIiwia2V5d29yZHMiLCJleHRyYWN0QnVsbGV0c0Zyb21GcmVlVGV4dCIsImZyZWVUZXh0Iiwib3BlbmFpIiwicHJvbXB0IiwiY2hhdENvbXBsZXRpb24iLCJyYXdSZXNwb25zZSIsImRhdGVzIiwiY29udGV4dCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/ai-response-parser.ts\n");

/***/ }),

/***/ "(rsc)/./lib/ats.ts":
/*!********************!*\
  !*** ./lib/ats.ts ***!
  \********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   atsCheck: () => (/* binding */ atsCheck)\n/* harmony export */ });\n/* harmony import */ var _jd__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./jd */ \"(rsc)/./lib/jd.ts\");\n\nfunction atsCheck(resume, jdText) {\n    const { all, must, nice } = (0,_jd__WEBPACK_IMPORTED_MODULE_0__.extractKeywords2)(jdText, 20);\n    const resumeText = stringifyResume(resume).toLowerCase();\n    const matched = all.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const missing = all.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const mustMatched = must.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const mustMissing = must.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const niceMatched = nice.filter((k)=>resumeText.includes(k.toLowerCase()));\n    const niceMissing = nice.filter((k)=>!resumeText.includes(k.toLowerCase()));\n    const warnings = [];\n    // Enhanced section detection with better validation\n    if (!hasExperienceSection(resume)) {\n        warnings.push(\"No Experience section detected.\");\n    }\n    if (!hasSkillsSection(resume)) {\n        warnings.push(\"No Skills section detected.\");\n    }\n    const base = {\n        coverage: all.length ? matched.length / all.length : 0,\n        matched,\n        missing,\n        warnings,\n        mustCoverage: must.length ? mustMatched.length / must.length : 0,\n        niceCoverage: nice.length ? niceMatched.length / nice.length : 0,\n        mustMatched,\n        mustMissing,\n        niceMatched,\n        niceMissing,\n        topMissing: missing.slice(0, 5)\n    };\n    return base;\n}\nfunction hasExperienceSection(resume) {\n    if (!resume.experience || resume.experience.length === 0) return false;\n    // Check if experience has meaningful content\n    return resume.experience.some((exp)=>exp.company && exp.role && (exp.bullets?.length || 0) > 0);\n}\nfunction hasSkillsSection(resume) {\n    if (!resume.skills || resume.skills.length === 0) return false;\n    // Check if skills have meaningful content\n    return resume.skills.some((skill)=>skill && skill.trim().length > 2);\n}\nfunction stringifyResume(resume) {\n    const parts = [];\n    if (resume.summary) parts.push(resume.summary);\n    if (resume.skills?.length) parts.push(resume.skills.join(\" \"));\n    if (resume.experience?.length) {\n        resume.experience.forEach((exp)=>{\n            if (exp.company) parts.push(exp.company);\n            if (exp.role) parts.push(exp.role);\n            if (exp.bullets?.length) parts.push(exp.bullets.join(\" \"));\n        });\n    }\n    if (resume.education?.length) parts.push(resume.education.join(\" \"));\n    if (resume.certifications?.length) parts.push(resume.certifications.join(\" \"));\n    return parts.join(\" \");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSXZDLE9BQU80QixVQUFVLEVBQUVMLFFBQVE7UUFDN0J2QixPQUFPNEIsVUFBVSxDQUFDWSxPQUFPLENBQUNWLENBQUFBO1lBQ3hCLElBQUlBLElBQUlDLE9BQU8sRUFBRU0sTUFBTWxCLElBQUksQ0FBQ1csSUFBSUMsT0FBTztZQUN2QyxJQUFJRCxJQUFJRSxJQUFJLEVBQUVLLE1BQU1sQixJQUFJLENBQUNXLElBQUlFLElBQUk7WUFDakMsSUFBSUYsSUFBSUcsT0FBTyxFQUFFVixRQUFRYyxNQUFNbEIsSUFBSSxDQUFDVyxJQUFJRyxPQUFPLENBQUNNLElBQUksQ0FBQztRQUN2RDtJQUNGO0lBQ0EsSUFBSXZDLE9BQU95QyxTQUFTLEVBQUVsQixRQUFRYyxNQUFNbEIsSUFBSSxDQUFDbkIsT0FBT3lDLFNBQVMsQ0FBQ0YsSUFBSSxDQUFDO0lBQy9ELElBQUl2QyxPQUFPMEMsY0FBYyxFQUFFbkIsUUFBUWMsTUFBTWxCLElBQUksQ0FBQ25CLE9BQU8wQyxjQUFjLENBQUNILElBQUksQ0FBQztJQUV6RSxPQUFPRixNQUFNRSxJQUFJLENBQUM7QUFDcEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vbGliL2F0cy50cz8yN2RkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4dHJhY3RLZXl3b3JkczIgfSBmcm9tICcuL2pkJ1xuaW1wb3J0IHsgUmVzdW1lSlNPTiwgS2V5d29yZFN0YXRzIH0gZnJvbSAnLi90eXBlcydcbmltcG9ydCBPcGVuQUkgZnJvbSAnb3BlbmFpJ1xuXG5leHBvcnQgZnVuY3Rpb24gYXRzQ2hlY2socmVzdW1lOiBSZXN1bWVKU09OLCBqZFRleHQ6IHN0cmluZyk6IEtleXdvcmRTdGF0cyB7XG4gIGNvbnN0IHsgYWxsLCBtdXN0LCBuaWNlIH0gPSBleHRyYWN0S2V5d29yZHMyKGpkVGV4dCwgMjApXG4gIGNvbnN0IHJlc3VtZVRleHQgPSBzdHJpbmdpZnlSZXN1bWUocmVzdW1lKS50b0xvd2VyQ2FzZSgpXG5cbiAgY29uc3QgbWF0Y2hlZCA9IGFsbC5maWx0ZXIoayA9PiByZXN1bWVUZXh0LmluY2x1ZGVzKGsudG9Mb3dlckNhc2UoKSkpXG4gIGNvbnN0IG1pc3NpbmcgPSBhbGwuZmlsdGVyKGsgPT4gIXJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcblxuICBjb25zdCBtdXN0TWF0Y2hlZCA9IG11c3QuZmlsdGVyKGsgPT4gcmVzdW1lVGV4dC5pbmNsdWRlcyhrLnRvTG93ZXJDYXNlKCkpKVxuICBjb25zdCBtdXN0TWlzc2luZyA9IG11c3QuZmlsdGVyKGsgPT4gIXJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcbiAgY29uc3QgbmljZU1hdGNoZWQgPSBuaWNlLmZpbHRlcihrID0+IHJlc3VtZVRleHQuaW5jbHVkZXMoay50b0xvd2VyQ2FzZSgpKSlcbiAgY29uc3QgbmljZU1pc3NpbmcgPSBuaWNlLmZpbHRlcihrID0+ICFyZXN1bWVUZXh0LmluY2x1ZGVzKGsudG9Mb3dlckNhc2UoKSkpXG5cbiAgY29uc3Qgd2FybmluZ3M6c3RyaW5nW10gPSBbXVxuICBcbiAgLy8gRW5oYW5jZWQgc2VjdGlvbiBkZXRlY3Rpb24gd2l0aCBiZXR0ZXIgdmFsaWRhdGlvblxuICBpZiAoIWhhc0V4cGVyaWVuY2VTZWN0aW9uKHJlc3VtZSkpIHtcbiAgICB3YXJuaW5ncy5wdXNoKCdObyBFeHBlcmllbmNlIHNlY3Rpb24gZGV0ZWN0ZWQuJylcbiAgfVxuICBpZiAoIWhhc1NraWxsc1NlY3Rpb24ocmVzdW1lKSkge1xuICAgIHdhcm5pbmdzLnB1c2goJ05vIFNraWxscyBzZWN0aW9uIGRldGVjdGVkLicpXG4gIH1cblxuICBjb25zdCBiYXNlOiBLZXl3b3JkU3RhdHMgPSB7XG4gICAgY292ZXJhZ2U6IGFsbC5sZW5ndGggPyBtYXRjaGVkLmxlbmd0aCAvIGFsbC5sZW5ndGggOiAwLFxuICAgIG1hdGNoZWQsIG1pc3NpbmcsIHdhcm5pbmdzLFxuICAgIG11c3RDb3ZlcmFnZTogbXVzdC5sZW5ndGggPyBtdXN0TWF0Y2hlZC5sZW5ndGggLyBtdXN0Lmxlbmd0aCA6IDAsXG4gICAgbmljZUNvdmVyYWdlOiBuaWNlLmxlbmd0aCA/IG5pY2VNYXRjaGVkLmxlbmd0aCAvIG5pY2UubGVuZ3RoIDogMCxcbiAgICBtdXN0TWF0Y2hlZCwgbXVzdE1pc3NpbmcsIG5pY2VNYXRjaGVkLCBuaWNlTWlzc2luZyxcbiAgICB0b3BNaXNzaW5nOiBtaXNzaW5nLnNsaWNlKDAsNSlcbiAgfVxuICByZXR1cm4gYmFzZVxufVxuXG5mdW5jdGlvbiBoYXNFeHBlcmllbmNlU2VjdGlvbihyZXN1bWU6IFJlc3VtZUpTT04pOiBib29sZWFuIHtcbiAgaWYgKCFyZXN1bWUuZXhwZXJpZW5jZSB8fCByZXN1bWUuZXhwZXJpZW5jZS5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICBcbiAgLy8gQ2hlY2sgaWYgZXhwZXJpZW5jZSBoYXMgbWVhbmluZ2Z1bCBjb250ZW50XG4gIHJldHVybiByZXN1bWUuZXhwZXJpZW5jZS5zb21lKGV4cCA9PiBcbiAgICBleHAuY29tcGFueSAmJiBleHAucm9sZSAmJiBcbiAgICAoZXhwLmJ1bGxldHM/Lmxlbmd0aCB8fCAwKSA+IDBcbiAgKVxufVxuXG5mdW5jdGlvbiBoYXNTa2lsbHNTZWN0aW9uKHJlc3VtZTogUmVzdW1lSlNPTik6IGJvb2xlYW4ge1xuICBpZiAoIXJlc3VtZS5za2lsbHMgfHwgcmVzdW1lLnNraWxscy5sZW5ndGggPT09IDApIHJldHVybiBmYWxzZVxuICBcbiAgLy8gQ2hlY2sgaWYgc2tpbGxzIGhhdmUgbWVhbmluZ2Z1bCBjb250ZW50XG4gIHJldHVybiByZXN1bWUuc2tpbGxzLnNvbWUoc2tpbGwgPT4gXG4gICAgc2tpbGwgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDJcbiAgKVxufVxuXG5mdW5jdGlvbiBzdHJpbmdpZnlSZXN1bWUocmVzdW1lOiBSZXN1bWVKU09OKTogc3RyaW5nIHtcbiAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW11cbiAgXG4gIGlmIChyZXN1bWUuc3VtbWFyeSkgcGFydHMucHVzaChyZXN1bWUuc3VtbWFyeSlcbiAgaWYgKHJlc3VtZS5za2lsbHM/Lmxlbmd0aCkgcGFydHMucHVzaChyZXN1bWUuc2tpbGxzLmpvaW4oJyAnKSlcbiAgaWYgKHJlc3VtZS5leHBlcmllbmNlPy5sZW5ndGgpIHtcbiAgICByZXN1bWUuZXhwZXJpZW5jZS5mb3JFYWNoKGV4cCA9PiB7XG4gICAgICBpZiAoZXhwLmNvbXBhbnkpIHBhcnRzLnB1c2goZXhwLmNvbXBhbnkpXG4gICAgICBpZiAoZXhwLnJvbGUpIHBhcnRzLnB1c2goZXhwLnJvbGUpXG4gICAgICBpZiAoZXhwLmJ1bGxldHM/Lmxlbmd0aCkgcGFydHMucHVzaChleHAuYnVsbGV0cy5qb2luKCcgJykpXG4gICAgfSlcbiAgfVxuICBpZiAocmVzdW1lLmVkdWNhdGlvbj8ubGVuZ3RoKSBwYXJ0cy5wdXNoKHJlc3VtZS5lZHVjYXRpb24uam9pbignICcpKVxuICBpZiAocmVzdW1lLmNlcnRpZmljYXRpb25zPy5sZW5ndGgpIHBhcnRzLnB1c2gocmVzdW1lLmNlcnRpZmljYXRpb25zLmpvaW4oJyAnKSlcbiAgXG4gIHJldHVybiBwYXJ0cy5qb2luKCcgJylcbn1cbiJdLCJuYW1lcyI6WyJleHRyYWN0S2V5d29yZHMyIiwiYXRzQ2hlY2siLCJyZXN1bWUiLCJqZFRleHQiLCJhbGwiLCJtdXN0IiwibmljZSIsInJlc3VtZVRleHQiLCJzdHJpbmdpZnlSZXN1bWUiLCJ0b0xvd2VyQ2FzZSIsIm1hdGNoZWQiLCJmaWx0ZXIiLCJrIiwiaW5jbHVkZXMiLCJtaXNzaW5nIiwibXVzdE1hdGNoZWQiLCJtdXN0TWlzc2luZyIsIm5pY2VNYXRjaGVkIiwibmljZU1pc3NpbmciLCJ3YXJuaW5ncyIsImhhc0V4cGVyaWVuY2VTZWN0aW9uIiwicHVzaCIsImhhc1NraWxsc1NlY3Rpb24iLCJiYXNlIiwiY292ZXJhZ2UiLCJsZW5ndGgiLCJtdXN0Q292ZXJhZ2UiLCJuaWNlQ292ZXJhZ2UiLCJ0b3BNaXNzaW5nIiwic2xpY2UiLCJleHBlcmllbmNlIiwic29tZSIsImV4cCIsImNvbXBhbnkiLCJyb2xlIiwiYnVsbGV0cyIsInNraWxscyIsInNraWxsIiwidHJpbSIsInBhcnRzIiwic3VtbWFyeSIsImpvaW4iLCJmb3JFYWNoIiwiZWR1Y2F0aW9uIiwiY2VydGlmaWNhdGlvbnMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/ats.ts\n");

/***/ }),

/***/ "(rsc)/./lib/config.ts":
/*!***********************!*\
  !*** ./lib/config.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   getConfig: () => (/* binding */ getConfig),\n/* harmony export */   loadConfig: () => (/* binding */ loadConfig),\n/* harmony export */   saveConfig: () => (/* binding */ saveConfig),\n/* harmony export */   updateConfig: () => (/* binding */ updateConfig)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n\nconst CONFIG_PATH = \"/tmp/ai-resume-tailor-config.json\";\nlet config = {\n    rate: {\n        ipPerMin: Number(process.env.RATE_IP_PER_MIN || 30),\n        sessionPerMin: Number(process.env.RATE_SESSION_PER_MIN || 5)\n    },\n    invites: (process.env.INVITE_CODES || \"\").split(\",\").map((s)=>s.trim()).filter(Boolean),\n    openaiKey: undefined,\n    pauseTailor: false,\n    pauseExport: false\n};\nfunction loadConfig() {\n    try {\n        if (fs__WEBPACK_IMPORTED_MODULE_0___default().existsSync(CONFIG_PATH)) {\n            const raw = fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(CONFIG_PATH, \"utf8\");\n            const fileCfg = JSON.parse(raw);\n            config = {\n                ...config,\n                ...fileCfg\n            };\n        }\n    } catch  {}\n}\nfunction saveConfig() {\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(CONFIG_PATH, JSON.stringify(config, null, 2));\n    } catch  {}\n}\nfunction getConfig() {\n    return config;\n}\nfunction updateConfig(partial) {\n    config = {\n        ...config,\n        ...partial,\n        rate: {\n            ...config.rate,\n            ...partial.rate || {}\n        }\n    };\n    saveConfig();\n}\nloadConfig();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvY29uZmlnLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUFtQjtBQUNuQixNQUFNQyxjQUFjO0FBVXBCLElBQUlDLFNBQW9CO0lBQ3RCQyxNQUFNO1FBQUVDLFVBQVVDLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZSxJQUFFO1FBQUtDLGVBQWVKLE9BQU9DLFFBQVFDLEdBQUcsQ0FBQ0csb0JBQW9CLElBQUU7SUFBRztJQUN0SEMsU0FBUyxDQUFDTCxRQUFRQyxHQUFHLENBQUNLLFlBQVksSUFBRSxFQUFDLEVBQUdDLEtBQUssQ0FBQyxLQUFLQyxHQUFHLENBQUNDLENBQUFBLElBQUdBLEVBQUVDLElBQUksSUFBSUMsTUFBTSxDQUFDQztJQUMzRUMsV0FBV0M7SUFDWEMsYUFBYTtJQUNiQyxhQUFhO0FBQ2Y7QUFFTyxTQUFTQztJQUNkLElBQUk7UUFDRixJQUFJdkIsb0RBQWEsQ0FBQ0MsY0FBYztZQUM5QixNQUFNd0IsTUFBTXpCLHNEQUFlLENBQUNDLGFBQWE7WUFDekMsTUFBTTBCLFVBQVVDLEtBQUtDLEtBQUssQ0FBQ0o7WUFDM0J2QixTQUFTO2dCQUFFLEdBQUdBLE1BQU07Z0JBQUUsR0FBR3lCLE9BQU87WUFBQztRQUNuQztJQUNGLEVBQUUsT0FBTSxDQUFDO0FBQ1g7QUFFTyxTQUFTRztJQUNkLElBQUk7UUFBRTlCLHVEQUFnQixDQUFDQyxhQUFhMkIsS0FBS0ksU0FBUyxDQUFDOUIsUUFBUSxNQUFNO0lBQUksRUFBRSxPQUFNLENBQUM7QUFDaEY7QUFFTyxTQUFTK0I7SUFBeUIsT0FBTy9CO0FBQU87QUFFaEQsU0FBU2dDLGFBQWFDLE9BQTJCO0lBQ3REakMsU0FBUztRQUFFLEdBQUdBLE1BQU07UUFBRSxHQUFHaUMsT0FBTztRQUFFaEMsTUFBTTtZQUFFLEdBQUdELE9BQU9DLElBQUk7WUFBRSxHQUFJZ0MsUUFBUWhDLElBQUksSUFBRSxDQUFDLENBQUM7UUFBRTtJQUFFO0lBQ2xGMkI7QUFDRjtBQUNBUCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvY29uZmlnLnRzPzEyODUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuY29uc3QgQ09ORklHX1BBVEggPSAnL3RtcC9haS1yZXN1bWUtdGFpbG9yLWNvbmZpZy5qc29uJ1xuXG5leHBvcnQgdHlwZSBBcHBDb25maWcgPSB7XG4gIHJhdGU6IHsgaXBQZXJNaW46IG51bWJlciwgc2Vzc2lvblBlck1pbjogbnVtYmVyIH0sXG4gIGludml0ZXM6IHN0cmluZ1tdLFxuICBvcGVuYWlLZXk/OiBzdHJpbmcsXG4gIHBhdXNlVGFpbG9yPzogYm9vbGVhbixcbiAgcGF1c2VFeHBvcnQ/OiBib29sZWFuXG59XG5cbmxldCBjb25maWc6IEFwcENvbmZpZyA9IHtcbiAgcmF0ZTogeyBpcFBlck1pbjogTnVtYmVyKHByb2Nlc3MuZW52LlJBVEVfSVBfUEVSX01JTnx8MzApLCBzZXNzaW9uUGVyTWluOiBOdW1iZXIocHJvY2Vzcy5lbnYuUkFURV9TRVNTSU9OX1BFUl9NSU58fDUpIH0sXG4gIGludml0ZXM6IChwcm9jZXNzLmVudi5JTlZJVEVfQ09ERVN8fCcnKS5zcGxpdCgnLCcpLm1hcChzPT5zLnRyaW0oKSkuZmlsdGVyKEJvb2xlYW4pLFxuICBvcGVuYWlLZXk6IHVuZGVmaW5lZCxcbiAgcGF1c2VUYWlsb3I6IGZhbHNlLFxuICBwYXVzZUV4cG9ydDogZmFsc2Vcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRDb25maWcoKSB7XG4gIHRyeSB7XG4gICAgaWYgKGZzLmV4aXN0c1N5bmMoQ09ORklHX1BBVEgpKSB7XG4gICAgICBjb25zdCByYXcgPSBmcy5yZWFkRmlsZVN5bmMoQ09ORklHX1BBVEgsICd1dGY4JylcbiAgICAgIGNvbnN0IGZpbGVDZmcgPSBKU09OLnBhcnNlKHJhdylcbiAgICAgIGNvbmZpZyA9IHsgLi4uY29uZmlnLCAuLi5maWxlQ2ZnIH1cbiAgICB9XG4gIH0gY2F0Y2gge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVDb25maWcoKSB7XG4gIHRyeSB7IGZzLndyaXRlRmlsZVN5bmMoQ09ORklHX1BBVEgsIEpTT04uc3RyaW5naWZ5KGNvbmZpZywgbnVsbCwgMikpIH0gY2F0Y2gge31cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldENvbmZpZygpOiBBcHBDb25maWcgeyByZXR1cm4gY29uZmlnIH1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZUNvbmZpZyhwYXJ0aWFsOiBQYXJ0aWFsPEFwcENvbmZpZz4pIHtcbiAgY29uZmlnID0geyAuLi5jb25maWcsIC4uLnBhcnRpYWwsIHJhdGU6IHsgLi4uY29uZmlnLnJhdGUsIC4uLihwYXJ0aWFsLnJhdGV8fHt9KSB9IH1cbiAgc2F2ZUNvbmZpZygpXG59XG5sb2FkQ29uZmlnKClcbiJdLCJuYW1lcyI6WyJmcyIsIkNPTkZJR19QQVRIIiwiY29uZmlnIiwicmF0ZSIsImlwUGVyTWluIiwiTnVtYmVyIiwicHJvY2VzcyIsImVudiIsIlJBVEVfSVBfUEVSX01JTiIsInNlc3Npb25QZXJNaW4iLCJSQVRFX1NFU1NJT05fUEVSX01JTiIsImludml0ZXMiLCJJTlZJVEVfQ09ERVMiLCJzcGxpdCIsIm1hcCIsInMiLCJ0cmltIiwiZmlsdGVyIiwiQm9vbGVhbiIsIm9wZW5haUtleSIsInVuZGVmaW5lZCIsInBhdXNlVGFpbG9yIiwicGF1c2VFeHBvcnQiLCJsb2FkQ29uZmlnIiwiZXhpc3RzU3luYyIsInJhdyIsInJlYWRGaWxlU3luYyIsImZpbGVDZmciLCJKU09OIiwicGFyc2UiLCJzYXZlQ29uZmlnIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsImdldENvbmZpZyIsInVwZGF0ZUNvbmZpZyIsInBhcnRpYWwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./lib/guards.ts":
/*!***********************!*\
  !*** ./lib/guards.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   clientIP: () => (/* binding */ clientIP),\n/* harmony export */   enforceGuards: () => (/* binding */ enforceGuards),\n/* harmony export */   hasInvite: () => (/* binding */ hasInvite),\n/* harmony export */   sessionID: () => (/* binding */ sessionID)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n\n\nconst ipHits = new Map();\nconst sidHits = new Map();\nfunction now() {\n    return Date.now();\n}\nfunction slide(arr, windowMs) {\n    const t = now();\n    while(arr.length && t - arr[0] > windowMs)arr.shift();\n}\nfunction pushHit(map, key) {\n    const arr = map.get(key) || [];\n    arr.push(now());\n    map.set(key, arr);\n    return arr;\n}\nfunction cookieValue(req, name) {\n    const cookie = req.headers.get(\"cookie\") || \"\";\n    const match = cookie.match(new RegExp(\"(?:^|; )\" + name + \"=([^;]+)\"));\n    return match ? decodeURIComponent(match[1]) : null;\n}\nfunction clientIP(req) {\n    const fwd = req.headers.get(\"x-forwarded-for\") || \"\";\n    const ip = fwd.split(\",\")[0].trim() || \"0.0.0.0\";\n    return ip;\n}\nfunction sessionID(req) {\n    return cookieValue(req, \"sid\") || \"anon\";\n}\nfunction hasInvite(req) {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\n    if (!cfg.invites.length) return true;\n    const header = req.headers.get(\"x-invite-code\") || \"\";\n    const cookie = cookieValue(req, \"invite\") || \"\";\n    const code = header || cookie;\n    if (!code) return false;\n    return cfg.invites.includes(code);\n}\nfunction enforceGuards(req) {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_1__.getConfig)();\n    if (!hasInvite(req)) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"invite_required\",\n                message: \"Invite code required\"\n            }, {\n                status: 403\n            })\n        };\n    }\n    const ip = clientIP(req);\n    const sid = sessionID(req);\n    const ipArr = pushHit(ipHits, ip);\n    const sidArr = pushHit(sidHits, sid);\n    slide(ipArr, 60000);\n    slide(sidArr, 60000);\n    // prune empty and cap map sizes to avoid unbounded growth\n    pruneMaps();\n    if (ipArr.length > cfg.rate.ipPerMin) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"rate_limited\",\n                message: \"Too many requests\"\n            }, {\n                status: 429\n            })\n        };\n    }\n    if (sidArr.length > cfg.rate.sessionPerMin) {\n        return {\n            ok: false,\n            res: next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                code: \"rate_limited\",\n                message: \"Too many requests\"\n            }, {\n                status: 429\n            })\n        };\n    }\n    return {\n        ok: true\n    };\n}\nfunction pruneMaps(windowMs = 60000, maxKeys = 5000) {\n    const nowMs = now();\n    for (const [k, arr] of ipHits){\n        while(arr.length && nowMs - arr[0] > windowMs)arr.shift();\n        if (arr.length === 0) ipHits.delete(k);\n    }\n    for (const [k, arr] of sidHits){\n        while(arr.length && nowMs - arr[0] > windowMs)arr.shift();\n        if (arr.length === 0) sidHits.delete(k);\n    }\n    if (ipHits.size > maxKeys) {\n        for (const k of ipHits.keys()){\n            ipHits.delete(k);\n            if (ipHits.size <= maxKeys) break;\n        }\n    }\n    if (sidHits.size > maxKeys) {\n        for (const k of sidHits.keys()){\n            sidHits.delete(k);\n            if (sidHits.size <= maxKeys) break;\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUM7Z0JBQUVMLE1BQU07Z0JBQWdCTSxTQUFTO1lBQW9CLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUFHO0lBQ3RIO0lBQ0EsT0FBTztRQUFFSixJQUFJO0lBQUs7QUFDcEI7QUFFQSxTQUFTUSxVQUFVdkMsV0FBa0IsS0FBTSxFQUFFMkMsVUFBVSxJQUFJO0lBQ3pELE1BQU1DLFFBQVFoRDtJQUNkLEtBQUssTUFBTSxDQUFDaUQsR0FBRzlDLElBQUksSUFBSU4sT0FBUTtRQUM3QixNQUFPTSxJQUFJRyxNQUFNLElBQUksUUFBU0gsR0FBRyxDQUFDLEVBQUUsR0FBSUMsU0FBVUQsSUFBSUksS0FBSztRQUMzRCxJQUFJSixJQUFJRyxNQUFNLEtBQUssR0FBR1QsT0FBT3FELE1BQU0sQ0FBQ0Q7SUFDdEM7SUFDQSxLQUFLLE1BQU0sQ0FBQ0EsR0FBRzlDLElBQUksSUFBSUosUUFBUztRQUM5QixNQUFPSSxJQUFJRyxNQUFNLElBQUksUUFBU0gsR0FBRyxDQUFDLEVBQUUsR0FBSUMsU0FBVUQsSUFBSUksS0FBSztRQUMzRCxJQUFJSixJQUFJRyxNQUFNLEtBQUssR0FBR1AsUUFBUW1ELE1BQU0sQ0FBQ0Q7SUFDdkM7SUFDQSxJQUFJcEQsT0FBT3NELElBQUksR0FBR0osU0FBUztRQUN6QixLQUFLLE1BQU1FLEtBQUtwRCxPQUFPdUQsSUFBSSxHQUFJO1lBQUV2RCxPQUFPcUQsTUFBTSxDQUFDRDtZQUFJLElBQUlwRCxPQUFPc0QsSUFBSSxJQUFJSixTQUFTO1FBQU07SUFDdkY7SUFDQSxJQUFJaEQsUUFBUW9ELElBQUksR0FBR0osU0FBUztRQUMxQixLQUFLLE1BQU1FLEtBQUtsRCxRQUFRcUQsSUFBSSxHQUFJO1lBQUVyRCxRQUFRbUQsTUFBTSxDQUFDRDtZQUFJLElBQUlsRCxRQUFRb0QsSUFBSSxJQUFJSixTQUFTO1FBQU07SUFDMUY7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvZ3VhcmRzLnRzPzIyOTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xuaW1wb3J0IHsgZ2V0Q29uZmlnIH0gZnJvbSAnLi9jb25maWcnXG5cbmNvbnN0IGlwSGl0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXJbXT4oKVxuY29uc3Qgc2lkSGl0cyA9IG5ldyBNYXA8c3RyaW5nLCBudW1iZXJbXT4oKVxuXG5mdW5jdGlvbiBub3coKSB7IHJldHVybiBEYXRlLm5vdygpIH1cblxuZnVuY3Rpb24gc2xpZGUoYXJyOm51bWJlcltdLCB3aW5kb3dNczpudW1iZXIpIHtcbiAgY29uc3QgdCA9IG5vdygpXG4gIHdoaWxlIChhcnIubGVuZ3RoICYmICh0IC0gYXJyWzBdKSA+IHdpbmRvd01zKSBhcnIuc2hpZnQoKVxufVxuXG5mdW5jdGlvbiBwdXNoSGl0KG1hcDogTWFwPHN0cmluZywgbnVtYmVyW10+LCBrZXk6IHN0cmluZykge1xuICBjb25zdCBhcnIgPSBtYXAuZ2V0KGtleSkgfHwgW11cbiAgYXJyLnB1c2gobm93KCkpXG4gIG1hcC5zZXQoa2V5LCBhcnIpXG4gIHJldHVybiBhcnJcbn1cblxuZnVuY3Rpb24gY29va2llVmFsdWUocmVxOiBOZXh0UmVxdWVzdCwgbmFtZTogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IGNvb2tpZSA9IHJlcS5oZWFkZXJzLmdldCgnY29va2llJykgfHwgJydcbiAgY29uc3QgbWF0Y2ggPSBjb29raWUubWF0Y2gobmV3IFJlZ0V4cCgnKD86Xnw7ICknICsgbmFtZSArICc9KFteO10rKScpKVxuICByZXR1cm4gbWF0Y2ggPyBkZWNvZGVVUklDb21wb25lbnQobWF0Y2hbMV0pIDogbnVsbFxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xpZW50SVAocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBmd2QgPSByZXEuaGVhZGVycy5nZXQoJ3gtZm9yd2FyZGVkLWZvcicpIHx8ICcnXG4gIGNvbnN0IGlwID0gZndkLnNwbGl0KCcsJylbMF0udHJpbSgpIHx8ICcwLjAuMC4wJ1xuICByZXR1cm4gaXBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlc3Npb25JRChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHJldHVybiBjb29raWVWYWx1ZShyZXEsICdzaWQnKSB8fCAnYW5vbidcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGhhc0ludml0ZShyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpXG4gIGlmICghY2ZnLmludml0ZXMubGVuZ3RoKSByZXR1cm4gdHJ1ZVxuICBjb25zdCBoZWFkZXIgPSByZXEuaGVhZGVycy5nZXQoJ3gtaW52aXRlLWNvZGUnKSB8fCAnJ1xuICBjb25zdCBjb29raWUgPSBjb29raWVWYWx1ZShyZXEsICdpbnZpdGUnKSB8fCAnJ1xuICBjb25zdCBjb2RlID0gaGVhZGVyIHx8IGNvb2tpZVxuICBpZiAoIWNvZGUpIHJldHVybiBmYWxzZVxuICByZXR1cm4gY2ZnLmludml0ZXMuaW5jbHVkZXMoY29kZSlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuZm9yY2VHdWFyZHMocmVxOiBOZXh0UmVxdWVzdCkge1xuICBjb25zdCBjZmcgPSBnZXRDb25maWcoKVxuICBpZiAoIWhhc0ludml0ZShyZXEpKSB7XG4gICAgcmV0dXJuIHsgb2s6IGZhbHNlLCByZXM6IE5leHRSZXNwb25zZS5qc29uKHsgY29kZTogJ2ludml0ZV9yZXF1aXJlZCcsIG1lc3NhZ2U6ICdJbnZpdGUgY29kZSByZXF1aXJlZCcgfSwgeyBzdGF0dXM6IDQwMyB9KSB9XG4gIH1cbiAgY29uc3QgaXAgPSBjbGllbnRJUChyZXEpXG4gIGNvbnN0IHNpZCA9IHNlc3Npb25JRChyZXEpXG4gIGNvbnN0IGlwQXJyID0gcHVzaEhpdChpcEhpdHMsIGlwKVxuICBjb25zdCBzaWRBcnIgPSBwdXNoSGl0KHNpZEhpdHMsIHNpZClcbiAgc2xpZGUoaXBBcnIsIDYwXzAwMCk7IHNsaWRlKHNpZEFyciwgNjBfMDAwKVxuICAvLyBwcnVuZSBlbXB0eSBhbmQgY2FwIG1hcCBzaXplcyB0byBhdm9pZCB1bmJvdW5kZWQgZ3Jvd3RoXG4gIHBydW5lTWFwcygpXG4gIGlmIChpcEFyci5sZW5ndGggPiBjZmcucmF0ZS5pcFBlck1pbikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgcmVzOiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICdyYXRlX2xpbWl0ZWQnLCBtZXNzYWdlOiAnVG9vIG1hbnkgcmVxdWVzdHMnIH0sIHsgc3RhdHVzOiA0MjkgfSkgfVxuICB9XG4gIGlmIChzaWRBcnIubGVuZ3RoID4gY2ZnLnJhdGUuc2Vzc2lvblBlck1pbikge1xuICAgIHJldHVybiB7IG9rOiBmYWxzZSwgcmVzOiBOZXh0UmVzcG9uc2UuanNvbih7IGNvZGU6ICdyYXRlX2xpbWl0ZWQnLCBtZXNzYWdlOiAnVG9vIG1hbnkgcmVxdWVzdHMnIH0sIHsgc3RhdHVzOiA0MjkgfSkgfVxuICB9XG4gIHJldHVybiB7IG9rOiB0cnVlIH1cbn1cblxuZnVuY3Rpb24gcHJ1bmVNYXBzKHdpbmRvd01zOm51bWJlciA9IDYwXzAwMCwgbWF4S2V5cyA9IDUwMDApIHtcbiAgY29uc3Qgbm93TXMgPSBub3coKVxuICBmb3IgKGNvbnN0IFtrLCBhcnJdIG9mIGlwSGl0cykge1xuICAgIHdoaWxlIChhcnIubGVuZ3RoICYmIChub3dNcyAtIGFyclswXSkgPiB3aW5kb3dNcykgYXJyLnNoaWZ0KClcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgaXBIaXRzLmRlbGV0ZShrKVxuICB9XG4gIGZvciAoY29uc3QgW2ssIGFycl0gb2Ygc2lkSGl0cykge1xuICAgIHdoaWxlIChhcnIubGVuZ3RoICYmIChub3dNcyAtIGFyclswXSkgPiB3aW5kb3dNcykgYXJyLnNoaWZ0KClcbiAgICBpZiAoYXJyLmxlbmd0aCA9PT0gMCkgc2lkSGl0cy5kZWxldGUoaylcbiAgfVxuICBpZiAoaXBIaXRzLnNpemUgPiBtYXhLZXlzKSB7XG4gICAgZm9yIChjb25zdCBrIG9mIGlwSGl0cy5rZXlzKCkpIHsgaXBIaXRzLmRlbGV0ZShrKTsgaWYgKGlwSGl0cy5zaXplIDw9IG1heEtleXMpIGJyZWFrIH1cbiAgfVxuICBpZiAoc2lkSGl0cy5zaXplID4gbWF4S2V5cykge1xuICAgIGZvciAoY29uc3QgayBvZiBzaWRIaXRzLmtleXMoKSkgeyBzaWRIaXRzLmRlbGV0ZShrKTsgaWYgKHNpZEhpdHMuc2l6ZSA8PSBtYXhLZXlzKSBicmVhayB9XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRDb25maWciLCJpcEhpdHMiLCJNYXAiLCJzaWRIaXRzIiwibm93IiwiRGF0ZSIsInNsaWRlIiwiYXJyIiwid2luZG93TXMiLCJ0IiwibGVuZ3RoIiwic2hpZnQiLCJwdXNoSGl0IiwibWFwIiwia2V5IiwiZ2V0IiwicHVzaCIsInNldCIsImNvb2tpZVZhbHVlIiwicmVxIiwibmFtZSIsImNvb2tpZSIsImhlYWRlcnMiLCJtYXRjaCIsIlJlZ0V4cCIsImRlY29kZVVSSUNvbXBvbmVudCIsImNsaWVudElQIiwiZndkIiwiaXAiLCJzcGxpdCIsInRyaW0iLCJzZXNzaW9uSUQiLCJoYXNJbnZpdGUiLCJjZmciLCJpbnZpdGVzIiwiaGVhZGVyIiwiY29kZSIsImluY2x1ZGVzIiwiZW5mb3JjZUd1YXJkcyIsIm9rIiwicmVzIiwianNvbiIsIm1lc3NhZ2UiLCJzdGF0dXMiLCJzaWQiLCJpcEFyciIsInNpZEFyciIsInBydW5lTWFwcyIsInJhdGUiLCJpcFBlck1pbiIsInNlc3Npb25QZXJNaW4iLCJtYXhLZXlzIiwibm93TXMiLCJrIiwiZGVsZXRlIiwic2l6ZSIsImtleXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/guards.ts\n");

/***/ }),

/***/ "(rsc)/./lib/jd.ts":
/*!*******************!*\
  !*** ./lib/jd.ts ***!
  \*******************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   extractJDFromUrl: () => (/* binding */ extractJDFromUrl),\n/* harmony export */   extractKeywords: () => (/* binding */ extractKeywords),\n/* harmony export */   extractKeywords2: () => (/* binding */ extractKeywords2)\n/* harmony export */ });\nasync function extractJDFromUrl(url) {\n    const u = new URL(url);\n    if (!/^https?:$/.test(u.protocol)) throw new Error(\"Invalid protocol\");\n    const ctrl = new AbortController();\n    const to = setTimeout(()=>ctrl.abort(), 15000);\n    try {\n        const res = await fetch(url, {\n            signal: ctrl.signal,\n            headers: {\n                \"User-Agent\": \"Mozilla/5.0 AI-Resume-Tailor\"\n            }\n        });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const html = await res.text();\n        const text = html.replace(/<script[\\s\\S]*?<\\/script>/g, \" \").replace(/<style[\\s\\S]*?<\\/style>/g, \" \").replace(/<[^>]+>/g, \" \").replace(/\\s+/g, \" \");\n        return text.slice(0, 5000);\n    } finally{\n        clearTimeout(to);\n    }\n}\nfunction extractKeywords(jdText, topN = 20) {\n    return extractKeywords2(jdText, topN).all;\n}\nfunction extractKeywords2(jdText, topN = 20) {\n    const lower = (jdText || \"\").toLowerCase();\n    const tokens = lower.match(/[a-zA-Z0-9\\+#\\.\\-]{2,}/g) || [];\n    const stop = new Set([\n        \"and\",\n        \"the\",\n        \"for\",\n        \"with\",\n        \"you\",\n        \"our\",\n        \"will\",\n        \"are\",\n        \"is\",\n        \"to\",\n        \"in\",\n        \"of\",\n        \"a\",\n        \"an\",\n        \"on\",\n        \"as\",\n        \"be\",\n        \"by\",\n        \"or\",\n        \"we\",\n        \"your\",\n        \"this\",\n        \"that\",\n        \"at\",\n        \"from\",\n        \"preferred\",\n        \"requirements\",\n        \"responsibilities\",\n        \"experience\"\n    ]);\n    const counts = {};\n    for (const t of tokens){\n        if (stop.has(t)) continue;\n        if (t.length <= 2) continue;\n        counts[t] = (counts[t] || 0) + 1;\n    }\n    let ranked = Object.entries(counts).sort((a, b)=>b[1] - a[1]).map(([k])=>k);\n    const critical = [\n        \"sql\",\n        \"python\",\n        \"excel\",\n        \"tableau\",\n        \"crm\",\n        \"react\",\n        \"node\",\n        \"aws\",\n        \"azure\",\n        \"gcp\",\n        \"adwords\",\n        \"google\",\n        \"facebook\",\n        \"paid\",\n        \"seo\",\n        \"sem\",\n        \"kpi\",\n        \"etl\",\n        \"ml\",\n        \"terraform\",\n        \"salesforce\",\n        \"hubspot\",\n        \"redux\",\n        \"typescript\",\n        \"next\",\n        \"fastapi\",\n        \"django\",\n        \"flask\",\n        \"java\",\n        \"go\",\n        \"kotlin\",\n        \"swift\",\n        \"figma\"\n    ];\n    for (const c of critical)if (lower.includes(c) && !ranked.includes(c)) ranked.unshift(c);\n    ranked = Array.from(new Set(ranked)).slice(0, topN);\n    const must = ranked.filter((k)=>critical.includes(k));\n    const nice = ranked.filter((k)=>!critical.includes(k));\n    return {\n        all: ranked,\n        must,\n        nice\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T2UsTUFBTSxDQUFDUixDQUFBQSxJQUFLLENBQUNDLFNBQVNFLFFBQVEsQ0FBQ0g7SUFDbkQsT0FBTztRQUFFbEIsS0FBS1c7UUFBUWM7UUFBTUU7SUFBSztBQUNuQyIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvamQudHM/MDliZSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgYXN5bmMgZnVuY3Rpb24gZXh0cmFjdEpERnJvbVVybCh1cmw6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XG4gIGNvbnN0IHUgPSBuZXcgVVJMKHVybClcbiAgaWYgKCEvXmh0dHBzPzokLy50ZXN0KHUucHJvdG9jb2wpKSB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgcHJvdG9jb2wnKVxuXG4gIGNvbnN0IGN0cmwgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcbiAgY29uc3QgdG8gPSBzZXRUaW1lb3V0KCgpID0+IGN0cmwuYWJvcnQoKSwgMTUwMDApXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2godXJsLCB7IHNpZ25hbDogY3RybC5zaWduYWwsIGhlYWRlcnM6IHsgJ1VzZXItQWdlbnQnOiAnTW96aWxsYS81LjAgQUktUmVzdW1lLVRhaWxvcicgfSB9KVxuICAgIGlmICghcmVzLm9rKSB0aHJvdyBuZXcgRXJyb3IoYEhUVFAgJHtyZXMuc3RhdHVzfWApXG4gICAgY29uc3QgaHRtbCA9IGF3YWl0IHJlcy50ZXh0KClcbiAgICBjb25zdCB0ZXh0ID0gaHRtbFxuICAgICAgLnJlcGxhY2UoLzxzY3JpcHRbXFxzXFxTXSo/PFxcL3NjcmlwdD4vZywnICcpXG4gICAgICAucmVwbGFjZSgvPHN0eWxlW1xcc1xcU10qPzxcXC9zdHlsZT4vZywnICcpXG4gICAgICAucmVwbGFjZSgvPFtePl0rPi9nLCcgJylcbiAgICAgIC5yZXBsYWNlKC9cXHMrL2csJyAnKVxuICAgIHJldHVybiB0ZXh0LnNsaWNlKDAsIDUwMDApXG4gIH0gZmluYWxseSB7XG4gICAgY2xlYXJUaW1lb3V0KHRvKVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0S2V5d29yZHMoamRUZXh0OiBzdHJpbmcsIHRvcE49MjApOiBzdHJpbmdbXSB7XG4gIHJldHVybiBleHRyYWN0S2V5d29yZHMyKGpkVGV4dCwgdG9wTikuYWxsXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0S2V5d29yZHMyKGpkVGV4dDogc3RyaW5nLCB0b3BOPTIwKTogeyBhbGw6IHN0cmluZ1tdLCBtdXN0OiBzdHJpbmdbXSwgbmljZTogc3RyaW5nW10gfSB7XG4gIGNvbnN0IGxvd2VyID0gKGpkVGV4dHx8JycpLnRvTG93ZXJDYXNlKClcbiAgY29uc3QgdG9rZW5zID0gbG93ZXIubWF0Y2goL1thLXpBLVowLTlcXCsjXFwuXFwtXXsyLH0vZykgfHwgW11cbiAgY29uc3Qgc3RvcCA9IG5ldyBTZXQoWydhbmQnLCd0aGUnLCdmb3InLCd3aXRoJywneW91Jywnb3VyJywnd2lsbCcsJ2FyZScsJ2lzJywndG8nLCdpbicsJ29mJywnYScsJ2FuJywnb24nLCdhcycsJ2JlJywnYnknLCdvcicsJ3dlJywneW91cicsJ3RoaXMnLCd0aGF0JywnYXQnLCdmcm9tJywncHJlZmVycmVkJywncmVxdWlyZW1lbnRzJywncmVzcG9uc2liaWxpdGllcycsJ2V4cGVyaWVuY2UnXSlcbiAgY29uc3QgY291bnRzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge31cbiAgZm9yIChjb25zdCB0IG9mIHRva2Vucykge1xuICAgIGlmIChzdG9wLmhhcyh0KSkgY29udGludWVcbiAgICBpZiAodC5sZW5ndGggPD0gMikgY29udGludWVcbiAgICBjb3VudHNbdF0gPSAoY291bnRzW3RdIHx8IDApICsgMVxuICB9XG4gIGxldCByYW5rZWQgPSBPYmplY3QuZW50cmllcyhjb3VudHMpLnNvcnQoKGEsYik9PmJbMV0tYVsxXSkubWFwKChba10pPT5rKVxuICBjb25zdCBjcml0aWNhbCA9IFsnc3FsJywncHl0aG9uJywnZXhjZWwnLCd0YWJsZWF1JywnY3JtJywncmVhY3QnLCdub2RlJywnYXdzJywnYXp1cmUnLCdnY3AnLCdhZHdvcmRzJywnZ29vZ2xlJywnZmFjZWJvb2snLCdwYWlkJywnc2VvJywnc2VtJywna3BpJywnZXRsJywnbWwnLCd0ZXJyYWZvcm0nLCdzYWxlc2ZvcmNlJywnaHVic3BvdCcsJ3JlZHV4JywndHlwZXNjcmlwdCcsJ25leHQnLCdmYXN0YXBpJywnZGphbmdvJywnZmxhc2snLCdqYXZhJywnZ28nLCdrb3RsaW4nLCdzd2lmdCcsJ2ZpZ21hJ11cbiAgZm9yIChjb25zdCBjIG9mIGNyaXRpY2FsKSBpZiAobG93ZXIuaW5jbHVkZXMoYykgJiYgIXJhbmtlZC5pbmNsdWRlcyhjKSkgcmFua2VkLnVuc2hpZnQoYylcbiAgcmFua2VkID0gQXJyYXkuZnJvbShuZXcgU2V0KHJhbmtlZCkpLnNsaWNlKDAsIHRvcE4pXG4gIGNvbnN0IG11c3QgPSByYW5rZWQuZmlsdGVyKGsgPT4gY3JpdGljYWwuaW5jbHVkZXMoaykpXG4gIGNvbnN0IG5pY2UgPSByYW5rZWQuZmlsdGVyKGsgPT4gIWNyaXRpY2FsLmluY2x1ZGVzKGspKVxuICByZXR1cm4geyBhbGw6IHJhbmtlZCwgbXVzdCwgbmljZSB9XG59XG4iXSwibmFtZXMiOlsiZXh0cmFjdEpERnJvbVVybCIsInVybCIsInUiLCJVUkwiLCJ0ZXN0IiwicHJvdG9jb2wiLCJFcnJvciIsImN0cmwiLCJBYm9ydENvbnRyb2xsZXIiLCJ0byIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlcyIsImZldGNoIiwic2lnbmFsIiwiaGVhZGVycyIsIm9rIiwic3RhdHVzIiwiaHRtbCIsInRleHQiLCJyZXBsYWNlIiwic2xpY2UiLCJjbGVhclRpbWVvdXQiLCJleHRyYWN0S2V5d29yZHMiLCJqZFRleHQiLCJ0b3BOIiwiZXh0cmFjdEtleXdvcmRzMiIsImFsbCIsImxvd2VyIiwidG9Mb3dlckNhc2UiLCJ0b2tlbnMiLCJtYXRjaCIsInN0b3AiLCJTZXQiLCJjb3VudHMiLCJ0IiwiaGFzIiwibGVuZ3RoIiwicmFua2VkIiwiT2JqZWN0IiwiZW50cmllcyIsInNvcnQiLCJhIiwiYiIsIm1hcCIsImsiLCJjcml0aWNhbCIsImMiLCJpbmNsdWRlcyIsInVuc2hpZnQiLCJBcnJheSIsImZyb20iLCJtdXN0IiwiZmlsdGVyIiwibmljZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/jd.ts\n");

/***/ }),

/***/ "(rsc)/./lib/line-marking-parser.ts":
/*!************************************!*\
  !*** ./lib/line-marking-parser.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createProcessingSummary: () => (/* binding */ createProcessingSummary),\n/* harmony export */   processLineSelections: () => (/* binding */ processLineSelections),\n/* harmony export */   validateProcessedExperience: () => (/* binding */ validateProcessedExperience)\n/* harmony export */ });\n/**\n * Process line selections and convert them into structured experience data\n */ function processLineSelections(resumeText, selections) {\n    if (selections.length === 0) {\n        return [];\n    }\n    // Group selections by groupId\n    const groups = {};\n    const ungrouped = [];\n    selections.forEach((selection)=>{\n        if (selection.groupId) {\n            if (!groups[selection.groupId]) {\n                groups[selection.groupId] = [];\n            }\n            groups[selection.groupId].push(selection);\n        } else {\n            ungrouped.push(selection);\n        }\n    });\n    const experiences = [];\n    // Process grouped selections\n    Object.entries(groups).forEach(([groupId, groupSelections])=>{\n        const experience = processGroupedSelections(groupSelections);\n        if (experience) {\n            experiences.push(experience);\n        }\n    });\n    // Process ungrouped selections as a single experience entry\n    if (ungrouped.length > 0) {\n        const experience = processUngroupedSelections(ungrouped);\n        if (experience) {\n            experiences.push(experience);\n        }\n    }\n    return experiences;\n}\n/**\n * Process a group of related line selections into a single experience entry\n */ function processGroupedSelections(selections) {\n    if (selections.length === 0) return null;\n    // Sort by line index to maintain order\n    const sortedSelections = selections.sort((a, b)=>a.lineIndex - b.lineIndex);\n    let company = \"\";\n    let role = \"\";\n    let dates = \"\";\n    const bullets = [];\n    // Process each selection based on its type\n    sortedSelections.forEach((selection)=>{\n        const line = selection.lineText.trim();\n        switch(selection.type){\n            case \"company\":\n                if (!company) company = line;\n                break;\n            case \"role\":\n                if (!role) role = line;\n                break;\n            case \"date\":\n                if (!dates) dates = line;\n                break;\n            case \"bullet\":\n                bullets.push(line);\n                break;\n            default:\n                // Try to infer type from content patterns\n                const inferredType = inferLineType(line);\n                switch(inferredType){\n                    case \"company\":\n                        if (!company) company = line;\n                        break;\n                    case \"role\":\n                        if (!role) role = line;\n                        break;\n                    case \"date\":\n                        if (!dates) dates = line;\n                        break;\n                    case \"bullet\":\n                        bullets.push(line);\n                        break;\n                    default:\n                        // If we can't classify it, treat as a bullet point\n                        bullets.push(line);\n                }\n        }\n    });\n    // Ensure we have at least a company and role\n    if (!company && !role) {\n        // Try to extract from the first line\n        const firstLine = sortedSelections[0]?.lineText.trim() || \"\";\n        if (firstLine) {\n            const parts = firstLine.split(\" - \");\n            if (parts.length >= 2) {\n                company = parts[0].trim();\n                role = parts[1].trim();\n            } else {\n                company = firstLine;\n                role = \"Various Roles\";\n            }\n        }\n    }\n    if (!company) company = \"Unknown Company\";\n    if (!role) role = \"Various Roles\";\n    if (!dates) dates = \"Dates not specified\";\n    return {\n        company,\n        role,\n        dates,\n        bullets: bullets.length > 0 ? bullets : [\n            \"Experience details not specified\"\n        ]\n    };\n}\n/**\n * Process ungrouped selections as a single experience entry\n */ function processUngroupedSelections(selections) {\n    if (selections.length === 0) return null;\n    const sortedSelections = selections.sort((a, b)=>a.lineIndex - b.lineIndex);\n    const lines = sortedSelections.map((s)=>s.lineText.trim()).filter(Boolean);\n    if (lines.length === 0) return null;\n    // Try to extract company and role from the first few lines\n    let company = \"\";\n    let role = \"\";\n    let dates = \"\";\n    const bullets = [];\n    // Look for company/role patterns in the first few lines\n    for(let i = 0; i < Math.min(3, lines.length); i++){\n        const line = lines[i];\n        const inferredType = inferLineType(line);\n        if (inferredType === \"company\" && !company) {\n            company = line;\n        } else if (inferredType === \"role\" && !role) {\n            role = line;\n        } else if (inferredType === \"date\" && !dates) {\n            dates = line;\n        }\n    }\n    // If we still don't have company/role, try to extract from the first line\n    if (!company && !role && lines.length > 0) {\n        const firstLine = lines[0];\n        const parts = firstLine.split(\" - \");\n        if (parts.length >= 2) {\n            company = parts[0].trim();\n            role = parts[1].trim();\n        } else {\n            company = firstLine;\n            role = \"Various Roles\";\n        }\n    }\n    // Add remaining lines as bullets\n    lines.forEach((line, index)=>{\n        if (index >= 3 || !company || !role) {\n            bullets.push(line);\n        }\n    });\n    if (!company) company = \"Various Companies\";\n    if (!role) role = \"Various Roles\";\n    if (!dates) dates = \"Dates not specified\";\n    return {\n        company,\n        role,\n        dates,\n        bullets: bullets.length > 0 ? bullets : [\n            \"Experience details not specified\"\n        ]\n    };\n}\n/**\n * Infer the type of a line based on its content patterns\n */ function inferLineType(line) {\n    const trimmed = line.trim();\n    // Date patterns\n    if (/\\b(19|20)\\d{2}\\b/.test(trimmed) || /\\b(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)\\b/i.test(trimmed) || /\\b(present|current|ongoing)\\b/i.test(trimmed)) {\n        return \"date\";\n    }\n    // Company patterns (all caps, contains company indicators, or long capitalized text)\n    if (/^[A-Z][A-Z\\s&.,-]+$/.test(trimmed) && (/\\b(inc|llc|corp|ltd|company|co|group|technologies|systems|solutions|services)\\b/i.test(trimmed) || trimmed.length > 10)) {\n        return \"company\";\n    }\n    // Role patterns (title-like, often after company)\n    const roleKeywords = /\\b(engineer|developer|manager|director|analyst|specialist|coordinator|lead|senior|junior|architect|consultant|designer|programmer|administrator|supervisor|executive|officer|representative|assistant|intern|trainee)\\b/i;\n    if (/^[A-Z][a-z\\s&.,-]+$/.test(trimmed) && (roleKeywords.test(trimmed) || trimmed.length > 5 && trimmed.length < 50 && !trimmed.includes(\"•\") && !trimmed.includes(\"-\"))) {\n        return \"role\";\n    }\n    // Bullet patterns\n    const bulletKeywords = /^(developed|implemented|created|designed|managed|led|built|improved|increased|reduced|optimized|delivered|achieved|collaborated|coordinated|supervised|trained|mentored|analyzed|researched|planned|executed|maintained|supported|facilitated|organized|streamlined|enhanced|established|launched|initiated|oversaw|directed|guided|influenced|negotiated|presented|communicated|documented|tested|debugged|troubleshot|configured|deployed|integrated|customized|automated|scaled|monitored|evaluated|assessed|reviewed|audited|validated|verified|ensured|guaranteed|secured|protected|updated|upgraded|modernized|refactored)/i;\n    if (/^[•\\-\\*]\\s+/.test(trimmed) || bulletKeywords.test(trimmed)) {\n        return \"bullet\";\n    }\n    return \"other\";\n}\n/**\n * Validate and clean processed experience data\n */ function validateProcessedExperience(experience) {\n    return {\n        company: (experience.company || \"\").trim() || \"Unknown Company\",\n        role: (experience.role || \"\").trim() || \"Unknown Role\",\n        dates: (experience.dates || \"\").trim() || \"Dates not specified\",\n        bullets: (experience.bullets || []).map((bullet)=>bullet.trim()).filter((bullet)=>bullet.length > 0).slice(0, 12) // Limit to 12 bullets per experience\n    };\n}\n/**\n * Create a summary of the processing results\n */ function createProcessingSummary(originalSelections, processedExperiences) {\n    const groups = new Set(originalSelections.map((s)=>s.groupId).filter(Boolean));\n    return {\n        totalLines: originalSelections.length,\n        totalExperiences: processedExperiences.length,\n        totalBullets: processedExperiences.reduce((total, exp)=>total + exp.bullets.length, 0),\n        groups: groups.size,\n        ungrouped: originalSelections.filter((s)=>!s.groupId).length\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TUFBTWxELFNBQVMsSUFBSW1ELElBQUlGLG1CQUFtQmpCLEdBQUcsQ0FBQ0MsQ0FBQUEsSUFBS0EsRUFBRTdCLE9BQU8sRUFBRThCLE1BQU0sQ0FBQ0M7SUFFckUsT0FBTztRQUNMaUIsWUFBWUgsbUJBQW1CbEQsTUFBTTtRQUNyQ3NELGtCQUFrQkgscUJBQXFCbkQsTUFBTTtRQUM3Q3VELGNBQWNKLHFCQUFxQkssTUFBTSxDQUFDLENBQUNDLE9BQU9DLE1BQVFELFFBQVFDLElBQUlwQyxPQUFPLENBQUN0QixNQUFNLEVBQUU7UUFDdEZDLFFBQVFBLE9BQU8wRCxJQUFJO1FBQ25CekQsV0FBV2dELG1CQUFtQmYsTUFBTSxDQUFDRCxDQUFBQSxJQUFLLENBQUNBLEVBQUU3QixPQUFPLEVBQUVMLE1BQU07SUFDOUQ7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvbGluZS1tYXJraW5nLXBhcnNlci50cz85YWI2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFJlc3VtZUpTT04sIFJvbGUgfSBmcm9tICcuL3R5cGVzJ1xuXG5leHBvcnQgaW50ZXJmYWNlIExpbmVTZWxlY3Rpb24ge1xuICBsaW5lSW5kZXg6IG51bWJlclxuICBsaW5lVGV4dDogc3RyaW5nXG4gIGdyb3VwSWQ/OiBzdHJpbmdcbiAgdHlwZT86ICdjb21wYW55JyB8ICdyb2xlJyB8ICdkYXRlJyB8ICdidWxsZXQnIHwgJ290aGVyJ1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NlZEV4cGVyaWVuY2Uge1xuICBjb21wYW55OiBzdHJpbmdcbiAgcm9sZTogc3RyaW5nXG4gIGRhdGVzOiBzdHJpbmdcbiAgYnVsbGV0czogc3RyaW5nW11cbn1cblxuLyoqXG4gKiBQcm9jZXNzIGxpbmUgc2VsZWN0aW9ucyBhbmQgY29udmVydCB0aGVtIGludG8gc3RydWN0dXJlZCBleHBlcmllbmNlIGRhdGFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NMaW5lU2VsZWN0aW9ucyhcbiAgcmVzdW1lVGV4dDogc3RyaW5nLFxuICBzZWxlY3Rpb25zOiBMaW5lU2VsZWN0aW9uW11cbik6IFJlc3VtZUpTT05bJ2V4cGVyaWVuY2UnXSB7XG4gIGlmIChzZWxlY3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgIHJldHVybiBbXVxuICB9XG5cbiAgLy8gR3JvdXAgc2VsZWN0aW9ucyBieSBncm91cElkXG4gIGNvbnN0IGdyb3VwczogUmVjb3JkPHN0cmluZywgTGluZVNlbGVjdGlvbltdPiA9IHt9XG4gIGNvbnN0IHVuZ3JvdXBlZDogTGluZVNlbGVjdGlvbltdID0gW11cblxuICBzZWxlY3Rpb25zLmZvckVhY2goc2VsZWN0aW9uID0+IHtcbiAgICBpZiAoc2VsZWN0aW9uLmdyb3VwSWQpIHtcbiAgICAgIGlmICghZ3JvdXBzW3NlbGVjdGlvbi5ncm91cElkXSkge1xuICAgICAgICBncm91cHNbc2VsZWN0aW9uLmdyb3VwSWRdID0gW11cbiAgICAgIH1cbiAgICAgIGdyb3Vwc1tzZWxlY3Rpb24uZ3JvdXBJZF0ucHVzaChzZWxlY3Rpb24pXG4gICAgfSBlbHNlIHtcbiAgICAgIHVuZ3JvdXBlZC5wdXNoKHNlbGVjdGlvbilcbiAgICB9XG4gIH0pXG5cbiAgY29uc3QgZXhwZXJpZW5jZXM6IFJvbGVbXSA9IFtdXG5cbiAgLy8gUHJvY2VzcyBncm91cGVkIHNlbGVjdGlvbnNcbiAgT2JqZWN0LmVudHJpZXMoZ3JvdXBzKS5mb3JFYWNoKChbZ3JvdXBJZCwgZ3JvdXBTZWxlY3Rpb25zXSkgPT4ge1xuICAgIGNvbnN0IGV4cGVyaWVuY2UgPSBwcm9jZXNzR3JvdXBlZFNlbGVjdGlvbnMoZ3JvdXBTZWxlY3Rpb25zKVxuICAgIGlmIChleHBlcmllbmNlKSB7XG4gICAgICBleHBlcmllbmNlcy5wdXNoKGV4cGVyaWVuY2UpXG4gICAgfVxuICB9KVxuXG4gIC8vIFByb2Nlc3MgdW5ncm91cGVkIHNlbGVjdGlvbnMgYXMgYSBzaW5nbGUgZXhwZXJpZW5jZSBlbnRyeVxuICBpZiAodW5ncm91cGVkLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBleHBlcmllbmNlID0gcHJvY2Vzc1VuZ3JvdXBlZFNlbGVjdGlvbnModW5ncm91cGVkKVxuICAgIGlmIChleHBlcmllbmNlKSB7XG4gICAgICBleHBlcmllbmNlcy5wdXNoKGV4cGVyaWVuY2UpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGV4cGVyaWVuY2VzXG59XG5cbi8qKlxuICogUHJvY2VzcyBhIGdyb3VwIG9mIHJlbGF0ZWQgbGluZSBzZWxlY3Rpb25zIGludG8gYSBzaW5nbGUgZXhwZXJpZW5jZSBlbnRyeVxuICovXG5mdW5jdGlvbiBwcm9jZXNzR3JvdXBlZFNlbGVjdGlvbnMoc2VsZWN0aW9uczogTGluZVNlbGVjdGlvbltdKTogUm9sZSB8IG51bGwge1xuICBpZiAoc2VsZWN0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG5cbiAgLy8gU29ydCBieSBsaW5lIGluZGV4IHRvIG1haW50YWluIG9yZGVyXG4gIGNvbnN0IHNvcnRlZFNlbGVjdGlvbnMgPSBzZWxlY3Rpb25zLnNvcnQoKGEsIGIpID0+IGEubGluZUluZGV4IC0gYi5saW5lSW5kZXgpXG5cbiAgbGV0IGNvbXBhbnkgPSAnJ1xuICBsZXQgcm9sZSA9ICcnXG4gIGxldCBkYXRlcyA9ICcnXG4gIGNvbnN0IGJ1bGxldHM6IHN0cmluZ1tdID0gW11cblxuICAvLyBQcm9jZXNzIGVhY2ggc2VsZWN0aW9uIGJhc2VkIG9uIGl0cyB0eXBlXG4gIHNvcnRlZFNlbGVjdGlvbnMuZm9yRWFjaChzZWxlY3Rpb24gPT4ge1xuICAgIGNvbnN0IGxpbmUgPSBzZWxlY3Rpb24ubGluZVRleHQudHJpbSgpXG4gICAgXG4gICAgc3dpdGNoIChzZWxlY3Rpb24udHlwZSkge1xuICAgICAgY2FzZSAnY29tcGFueSc6XG4gICAgICAgIGlmICghY29tcGFueSkgY29tcGFueSA9IGxpbmVcbiAgICAgICAgYnJlYWtcbiAgICAgIGNhc2UgJ3JvbGUnOlxuICAgICAgICBpZiAoIXJvbGUpIHJvbGUgPSBsaW5lXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgaWYgKCFkYXRlcykgZGF0ZXMgPSBsaW5lXG4gICAgICAgIGJyZWFrXG4gICAgICBjYXNlICdidWxsZXQnOlxuICAgICAgICBidWxsZXRzLnB1c2gobGluZSlcbiAgICAgICAgYnJlYWtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIC8vIFRyeSB0byBpbmZlciB0eXBlIGZyb20gY29udGVudCBwYXR0ZXJuc1xuICAgICAgICBjb25zdCBpbmZlcnJlZFR5cGUgPSBpbmZlckxpbmVUeXBlKGxpbmUpXG4gICAgICAgIHN3aXRjaCAoaW5mZXJyZWRUeXBlKSB7XG4gICAgICAgICAgY2FzZSAnY29tcGFueSc6XG4gICAgICAgICAgICBpZiAoIWNvbXBhbnkpIGNvbXBhbnkgPSBsaW5lXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGNhc2UgJ3JvbGUnOlxuICAgICAgICAgICAgaWYgKCFyb2xlKSByb2xlID0gbGluZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdkYXRlJzpcbiAgICAgICAgICAgIGlmICghZGF0ZXMpIGRhdGVzID0gbGluZVxuICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICBjYXNlICdidWxsZXQnOlxuICAgICAgICAgICAgYnVsbGV0cy5wdXNoKGxpbmUpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAvLyBJZiB3ZSBjYW4ndCBjbGFzc2lmeSBpdCwgdHJlYXQgYXMgYSBidWxsZXQgcG9pbnRcbiAgICAgICAgICAgIGJ1bGxldHMucHVzaChsaW5lKVxuICAgICAgICB9XG4gICAgfVxuICB9KVxuXG4gIC8vIEVuc3VyZSB3ZSBoYXZlIGF0IGxlYXN0IGEgY29tcGFueSBhbmQgcm9sZVxuICBpZiAoIWNvbXBhbnkgJiYgIXJvbGUpIHtcbiAgICAvLyBUcnkgdG8gZXh0cmFjdCBmcm9tIHRoZSBmaXJzdCBsaW5lXG4gICAgY29uc3QgZmlyc3RMaW5lID0gc29ydGVkU2VsZWN0aW9uc1swXT8ubGluZVRleHQudHJpbSgpIHx8ICcnXG4gICAgaWYgKGZpcnN0TGluZSkge1xuICAgICAgY29uc3QgcGFydHMgPSBmaXJzdExpbmUuc3BsaXQoJyAtICcpXG4gICAgICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAgICAgY29tcGFueSA9IHBhcnRzWzBdLnRyaW0oKVxuICAgICAgICByb2xlID0gcGFydHNbMV0udHJpbSgpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb21wYW55ID0gZmlyc3RMaW5lXG4gICAgICAgIHJvbGUgPSAnVmFyaW91cyBSb2xlcydcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoIWNvbXBhbnkpIGNvbXBhbnkgPSAnVW5rbm93biBDb21wYW55J1xuICBpZiAoIXJvbGUpIHJvbGUgPSAnVmFyaW91cyBSb2xlcydcbiAgaWYgKCFkYXRlcykgZGF0ZXMgPSAnRGF0ZXMgbm90IHNwZWNpZmllZCdcblxuICByZXR1cm4ge1xuICAgIGNvbXBhbnksXG4gICAgcm9sZSxcbiAgICBkYXRlcyxcbiAgICBidWxsZXRzOiBidWxsZXRzLmxlbmd0aCA+IDAgPyBidWxsZXRzIDogWydFeHBlcmllbmNlIGRldGFpbHMgbm90IHNwZWNpZmllZCddXG4gIH1cbn1cblxuLyoqXG4gKiBQcm9jZXNzIHVuZ3JvdXBlZCBzZWxlY3Rpb25zIGFzIGEgc2luZ2xlIGV4cGVyaWVuY2UgZW50cnlcbiAqL1xuZnVuY3Rpb24gcHJvY2Vzc1VuZ3JvdXBlZFNlbGVjdGlvbnMoc2VsZWN0aW9uczogTGluZVNlbGVjdGlvbltdKTogUm9sZSB8IG51bGwge1xuICBpZiAoc2VsZWN0aW9ucy5sZW5ndGggPT09IDApIHJldHVybiBudWxsXG5cbiAgY29uc3Qgc29ydGVkU2VsZWN0aW9ucyA9IHNlbGVjdGlvbnMuc29ydCgoYSwgYikgPT4gYS5saW5lSW5kZXggLSBiLmxpbmVJbmRleClcbiAgY29uc3QgbGluZXMgPSBzb3J0ZWRTZWxlY3Rpb25zLm1hcChzID0+IHMubGluZVRleHQudHJpbSgpKS5maWx0ZXIoQm9vbGVhbilcblxuICBpZiAobGluZXMubGVuZ3RoID09PSAwKSByZXR1cm4gbnVsbFxuXG4gIC8vIFRyeSB0byBleHRyYWN0IGNvbXBhbnkgYW5kIHJvbGUgZnJvbSB0aGUgZmlyc3QgZmV3IGxpbmVzXG4gIGxldCBjb21wYW55ID0gJydcbiAgbGV0IHJvbGUgPSAnJ1xuICBsZXQgZGF0ZXMgPSAnJ1xuICBjb25zdCBidWxsZXRzOiBzdHJpbmdbXSA9IFtdXG5cbiAgLy8gTG9vayBmb3IgY29tcGFueS9yb2xlIHBhdHRlcm5zIGluIHRoZSBmaXJzdCBmZXcgbGluZXNcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBNYXRoLm1pbigzLCBsaW5lcy5sZW5ndGgpOyBpKyspIHtcbiAgICBjb25zdCBsaW5lID0gbGluZXNbaV1cbiAgICBjb25zdCBpbmZlcnJlZFR5cGUgPSBpbmZlckxpbmVUeXBlKGxpbmUpXG4gICAgXG4gICAgaWYgKGluZmVycmVkVHlwZSA9PT0gJ2NvbXBhbnknICYmICFjb21wYW55KSB7XG4gICAgICBjb21wYW55ID0gbGluZVxuICAgIH0gZWxzZSBpZiAoaW5mZXJyZWRUeXBlID09PSAncm9sZScgJiYgIXJvbGUpIHtcbiAgICAgIHJvbGUgPSBsaW5lXG4gICAgfSBlbHNlIGlmIChpbmZlcnJlZFR5cGUgPT09ICdkYXRlJyAmJiAhZGF0ZXMpIHtcbiAgICAgIGRhdGVzID0gbGluZVxuICAgIH1cbiAgfVxuXG4gIC8vIElmIHdlIHN0aWxsIGRvbid0IGhhdmUgY29tcGFueS9yb2xlLCB0cnkgdG8gZXh0cmFjdCBmcm9tIHRoZSBmaXJzdCBsaW5lXG4gIGlmICghY29tcGFueSAmJiAhcm9sZSAmJiBsaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgZmlyc3RMaW5lID0gbGluZXNbMF1cbiAgICBjb25zdCBwYXJ0cyA9IGZpcnN0TGluZS5zcGxpdCgnIC0gJylcbiAgICBpZiAocGFydHMubGVuZ3RoID49IDIpIHtcbiAgICAgIGNvbXBhbnkgPSBwYXJ0c1swXS50cmltKClcbiAgICAgIHJvbGUgPSBwYXJ0c1sxXS50cmltKClcbiAgICB9IGVsc2Uge1xuICAgICAgY29tcGFueSA9IGZpcnN0TGluZVxuICAgICAgcm9sZSA9ICdWYXJpb3VzIFJvbGVzJ1xuICAgIH1cbiAgfVxuXG4gIC8vIEFkZCByZW1haW5pbmcgbGluZXMgYXMgYnVsbGV0c1xuICBsaW5lcy5mb3JFYWNoKChsaW5lLCBpbmRleCkgPT4ge1xuICAgIGlmIChpbmRleCA+PSAzIHx8ICFjb21wYW55IHx8ICFyb2xlKSB7XG4gICAgICBidWxsZXRzLnB1c2gobGluZSlcbiAgICB9XG4gIH0pXG5cbiAgaWYgKCFjb21wYW55KSBjb21wYW55ID0gJ1ZhcmlvdXMgQ29tcGFuaWVzJ1xuICBpZiAoIXJvbGUpIHJvbGUgPSAnVmFyaW91cyBSb2xlcydcbiAgaWYgKCFkYXRlcykgZGF0ZXMgPSAnRGF0ZXMgbm90IHNwZWNpZmllZCdcblxuICByZXR1cm4ge1xuICAgIGNvbXBhbnksXG4gICAgcm9sZSxcbiAgICBkYXRlcyxcbiAgICBidWxsZXRzOiBidWxsZXRzLmxlbmd0aCA+IDAgPyBidWxsZXRzIDogWydFeHBlcmllbmNlIGRldGFpbHMgbm90IHNwZWNpZmllZCddXG4gIH1cbn1cblxuLyoqXG4gKiBJbmZlciB0aGUgdHlwZSBvZiBhIGxpbmUgYmFzZWQgb24gaXRzIGNvbnRlbnQgcGF0dGVybnNcbiAqL1xuZnVuY3Rpb24gaW5mZXJMaW5lVHlwZShsaW5lOiBzdHJpbmcpOiBMaW5lU2VsZWN0aW9uWyd0eXBlJ10ge1xuICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKClcbiAgXG4gIC8vIERhdGUgcGF0dGVybnNcbiAgaWYgKC9cXGIoMTl8MjApXFxkezJ9XFxiLy50ZXN0KHRyaW1tZWQpIHx8IFxuICAgICAgL1xcYihqYW58ZmVifG1hcnxhcHJ8bWF5fGp1bnxqdWx8YXVnfHNlcHxvY3R8bm92fGRlYylcXGIvaS50ZXN0KHRyaW1tZWQpIHx8XG4gICAgICAvXFxiKHByZXNlbnR8Y3VycmVudHxvbmdvaW5nKVxcYi9pLnRlc3QodHJpbW1lZCkpIHtcbiAgICByZXR1cm4gJ2RhdGUnXG4gIH1cbiAgXG4gIC8vIENvbXBhbnkgcGF0dGVybnMgKGFsbCBjYXBzLCBjb250YWlucyBjb21wYW55IGluZGljYXRvcnMsIG9yIGxvbmcgY2FwaXRhbGl6ZWQgdGV4dClcbiAgaWYgKC9eW0EtWl1bQS1aXFxzJi4sLV0rJC8udGVzdCh0cmltbWVkKSAmJiBcbiAgICAgICgvXFxiKGluY3xsbGN8Y29ycHxsdGR8Y29tcGFueXxjb3xncm91cHx0ZWNobm9sb2dpZXN8c3lzdGVtc3xzb2x1dGlvbnN8c2VydmljZXMpXFxiL2kudGVzdCh0cmltbWVkKSB8fFxuICAgICAgIHRyaW1tZWQubGVuZ3RoID4gMTApKSB7XG4gICAgcmV0dXJuICdjb21wYW55J1xuICB9XG4gIFxuICAvLyBSb2xlIHBhdHRlcm5zICh0aXRsZS1saWtlLCBvZnRlbiBhZnRlciBjb21wYW55KVxuICBjb25zdCByb2xlS2V5d29yZHMgPSAvXFxiKGVuZ2luZWVyfGRldmVsb3BlcnxtYW5hZ2VyfGRpcmVjdG9yfGFuYWx5c3R8c3BlY2lhbGlzdHxjb29yZGluYXRvcnxsZWFkfHNlbmlvcnxqdW5pb3J8YXJjaGl0ZWN0fGNvbnN1bHRhbnR8ZGVzaWduZXJ8cHJvZ3JhbW1lcnxhZG1pbmlzdHJhdG9yfHN1cGVydmlzb3J8ZXhlY3V0aXZlfG9mZmljZXJ8cmVwcmVzZW50YXRpdmV8YXNzaXN0YW50fGludGVybnx0cmFpbmVlKVxcYi9pXG4gIGlmICgvXltBLVpdW2EtelxccyYuLC1dKyQvLnRlc3QodHJpbW1lZCkgJiYgXG4gICAgICAocm9sZUtleXdvcmRzLnRlc3QodHJpbW1lZCkgfHxcbiAgICAgICAodHJpbW1lZC5sZW5ndGggPiA1ICYmIHRyaW1tZWQubGVuZ3RoIDwgNTAgJiYgIXRyaW1tZWQuaW5jbHVkZXMoJ+KAoicpICYmICF0cmltbWVkLmluY2x1ZGVzKCctJykpKSkge1xuICAgIHJldHVybiAncm9sZSdcbiAgfVxuICBcbiAgLy8gQnVsbGV0IHBhdHRlcm5zXG4gIGNvbnN0IGJ1bGxldEtleXdvcmRzID0gL14oZGV2ZWxvcGVkfGltcGxlbWVudGVkfGNyZWF0ZWR8ZGVzaWduZWR8bWFuYWdlZHxsZWR8YnVpbHR8aW1wcm92ZWR8aW5jcmVhc2VkfHJlZHVjZWR8b3B0aW1pemVkfGRlbGl2ZXJlZHxhY2hpZXZlZHxjb2xsYWJvcmF0ZWR8Y29vcmRpbmF0ZWR8c3VwZXJ2aXNlZHx0cmFpbmVkfG1lbnRvcmVkfGFuYWx5emVkfHJlc2VhcmNoZWR8cGxhbm5lZHxleGVjdXRlZHxtYWludGFpbmVkfHN1cHBvcnRlZHxmYWNpbGl0YXRlZHxvcmdhbml6ZWR8c3RyZWFtbGluZWR8ZW5oYW5jZWR8ZXN0YWJsaXNoZWR8bGF1bmNoZWR8aW5pdGlhdGVkfG92ZXJzYXd8ZGlyZWN0ZWR8Z3VpZGVkfGluZmx1ZW5jZWR8bmVnb3RpYXRlZHxwcmVzZW50ZWR8Y29tbXVuaWNhdGVkfGRvY3VtZW50ZWR8dGVzdGVkfGRlYnVnZ2VkfHRyb3VibGVzaG90fGNvbmZpZ3VyZWR8ZGVwbG95ZWR8aW50ZWdyYXRlZHxjdXN0b21pemVkfGF1dG9tYXRlZHxzY2FsZWR8bW9uaXRvcmVkfGV2YWx1YXRlZHxhc3Nlc3NlZHxyZXZpZXdlZHxhdWRpdGVkfHZhbGlkYXRlZHx2ZXJpZmllZHxlbnN1cmVkfGd1YXJhbnRlZWR8c2VjdXJlZHxwcm90ZWN0ZWR8dXBkYXRlZHx1cGdyYWRlZHxtb2Rlcm5pemVkfHJlZmFjdG9yZWQpL2lcbiAgaWYgKC9eW+KAolxcLVxcKl1cXHMrLy50ZXN0KHRyaW1tZWQpIHx8IGJ1bGxldEtleXdvcmRzLnRlc3QodHJpbW1lZCkpIHtcbiAgICByZXR1cm4gJ2J1bGxldCdcbiAgfVxuICBcbiAgcmV0dXJuICdvdGhlcidcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZSBhbmQgY2xlYW4gcHJvY2Vzc2VkIGV4cGVyaWVuY2UgZGF0YVxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm9jZXNzZWRFeHBlcmllbmNlKGV4cGVyaWVuY2U6IFJvbGUpOiBSb2xlIHtcbiAgcmV0dXJuIHtcbiAgICBjb21wYW55OiAoZXhwZXJpZW5jZS5jb21wYW55IHx8ICcnKS50cmltKCkgfHwgJ1Vua25vd24gQ29tcGFueScsXG4gICAgcm9sZTogKGV4cGVyaWVuY2Uucm9sZSB8fCAnJykudHJpbSgpIHx8ICdVbmtub3duIFJvbGUnLFxuICAgIGRhdGVzOiAoZXhwZXJpZW5jZS5kYXRlcyB8fCAnJykudHJpbSgpIHx8ICdEYXRlcyBub3Qgc3BlY2lmaWVkJyxcbiAgICBidWxsZXRzOiAoZXhwZXJpZW5jZS5idWxsZXRzIHx8IFtdKVxuICAgICAgLm1hcChidWxsZXQgPT4gYnVsbGV0LnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoYnVsbGV0ID0+IGJ1bGxldC5sZW5ndGggPiAwKVxuICAgICAgLnNsaWNlKDAsIDEyKSAvLyBMaW1pdCB0byAxMiBidWxsZXRzIHBlciBleHBlcmllbmNlXG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzdW1tYXJ5IG9mIHRoZSBwcm9jZXNzaW5nIHJlc3VsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb2Nlc3NpbmdTdW1tYXJ5KFxuICBvcmlnaW5hbFNlbGVjdGlvbnM6IExpbmVTZWxlY3Rpb25bXSxcbiAgcHJvY2Vzc2VkRXhwZXJpZW5jZXM6IFJvbGVbXVxuKToge1xuICB0b3RhbExpbmVzOiBudW1iZXJcbiAgdG90YWxFeHBlcmllbmNlczogbnVtYmVyXG4gIHRvdGFsQnVsbGV0czogbnVtYmVyXG4gIGdyb3VwczogbnVtYmVyXG4gIHVuZ3JvdXBlZDogbnVtYmVyXG59IHtcbiAgY29uc3QgZ3JvdXBzID0gbmV3IFNldChvcmlnaW5hbFNlbGVjdGlvbnMubWFwKHMgPT4gcy5ncm91cElkKS5maWx0ZXIoQm9vbGVhbikpXG4gIFxuICByZXR1cm4ge1xuICAgIHRvdGFsTGluZXM6IG9yaWdpbmFsU2VsZWN0aW9ucy5sZW5ndGgsXG4gICAgdG90YWxFeHBlcmllbmNlczogcHJvY2Vzc2VkRXhwZXJpZW5jZXMubGVuZ3RoLFxuICAgIHRvdGFsQnVsbGV0czogcHJvY2Vzc2VkRXhwZXJpZW5jZXMucmVkdWNlKCh0b3RhbCwgZXhwKSA9PiB0b3RhbCArIGV4cC5idWxsZXRzLmxlbmd0aCwgMCksXG4gICAgZ3JvdXBzOiBncm91cHMuc2l6ZSxcbiAgICB1bmdyb3VwZWQ6IG9yaWdpbmFsU2VsZWN0aW9ucy5maWx0ZXIocyA9PiAhcy5ncm91cElkKS5sZW5ndGhcbiAgfVxufVxuIl0sIm5hbWVzIjpbInByb2Nlc3NMaW5lU2VsZWN0aW9ucyIsInJlc3VtZVRleHQiLCJzZWxlY3Rpb25zIiwibGVuZ3RoIiwiZ3JvdXBzIiwidW5ncm91cGVkIiwiZm9yRWFjaCIsInNlbGVjdGlvbiIsImdyb3VwSWQiLCJwdXNoIiwiZXhwZXJpZW5jZXMiLCJPYmplY3QiLCJlbnRyaWVzIiwiZ3JvdXBTZWxlY3Rpb25zIiwiZXhwZXJpZW5jZSIsInByb2Nlc3NHcm91cGVkU2VsZWN0aW9ucyIsInByb2Nlc3NVbmdyb3VwZWRTZWxlY3Rpb25zIiwic29ydGVkU2VsZWN0aW9ucyIsInNvcnQiLCJhIiwiYiIsImxpbmVJbmRleCIsImNvbXBhbnkiLCJyb2xlIiwiZGF0ZXMiLCJidWxsZXRzIiwibGluZSIsImxpbmVUZXh0IiwidHJpbSIsInR5cGUiLCJpbmZlcnJlZFR5cGUiLCJpbmZlckxpbmVUeXBlIiwiZmlyc3RMaW5lIiwicGFydHMiLCJzcGxpdCIsImxpbmVzIiwibWFwIiwicyIsImZpbHRlciIsIkJvb2xlYW4iLCJpIiwiTWF0aCIsIm1pbiIsImluZGV4IiwidHJpbW1lZCIsInRlc3QiLCJyb2xlS2V5d29yZHMiLCJpbmNsdWRlcyIsImJ1bGxldEtleXdvcmRzIiwidmFsaWRhdGVQcm9jZXNzZWRFeHBlcmllbmNlIiwiYnVsbGV0Iiwic2xpY2UiLCJjcmVhdGVQcm9jZXNzaW5nU3VtbWFyeSIsIm9yaWdpbmFsU2VsZWN0aW9ucyIsInByb2Nlc3NlZEV4cGVyaWVuY2VzIiwiU2V0IiwidG90YWxMaW5lcyIsInRvdGFsRXhwZXJpZW5jZXMiLCJ0b3RhbEJ1bGxldHMiLCJyZWR1Y2UiLCJ0b3RhbCIsImV4cCIsInNpemUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/line-marking-parser.ts\n");

/***/ }),

/***/ "(rsc)/./lib/openai.ts":
/*!***********************!*\
  !*** ./lib/openai.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   OPENAI_MODEL: () => (/* binding */ OPENAI_MODEL),\n/* harmony export */   getOpenAI: () => (/* binding */ getOpenAI)\n/* harmony export */ });\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./config */ \"(rsc)/./lib/config.ts\");\n\n\nlet client = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nfunction getOpenAI() {\n    const cfg = (0,_config__WEBPACK_IMPORTED_MODULE_0__.getConfig)();\n    if (cfg.openaiKey) {\n        client = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            apiKey: cfg.openaiKey\n        });\n    }\n    return client;\n}\nconst OPENAI_MODEL = process.env.OPENAI_MODEL || \"gpt-4o-mini\";\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvb3BlbmFpLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBMkI7QUFDUztBQUVwQyxJQUFJRSxTQUFTLElBQUlGLDhDQUFNQSxDQUFDO0lBQUVHLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsY0FBYztBQUFDO0FBRXRELFNBQVNDO0lBQ2QsTUFBTUMsTUFBTVAsa0RBQVNBO0lBQ3JCLElBQUlPLElBQUlDLFNBQVMsRUFBRTtRQUNqQlAsU0FBUyxJQUFJRiw4Q0FBTUEsQ0FBQztZQUFFRyxRQUFRSyxJQUFJQyxTQUFTO1FBQUM7SUFDOUM7SUFDQSxPQUFPUDtBQUNUO0FBRU8sTUFBTVEsZUFBZU4sUUFBUUMsR0FBRyxDQUFDSyxZQUFZLElBQUksY0FBYSIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvb3BlbmFpLnRzPzAwZDgiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE9wZW5BSSBmcm9tICdvcGVuYWknXG5pbXBvcnQgeyBnZXRDb25maWcgfSBmcm9tICcuL2NvbmZpZydcblxubGV0IGNsaWVudCA9IG5ldyBPcGVuQUkoeyBhcGlLZXk6IHByb2Nlc3MuZW52Lk9QRU5BSV9BUElfS0VZIH0pXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVuQUkoKSB7XG4gIGNvbnN0IGNmZyA9IGdldENvbmZpZygpXG4gIGlmIChjZmcub3BlbmFpS2V5KSB7XG4gICAgY2xpZW50ID0gbmV3IE9wZW5BSSh7IGFwaUtleTogY2ZnLm9wZW5haUtleSB9KVxuICB9XG4gIHJldHVybiBjbGllbnRcbn1cblxuZXhwb3J0IGNvbnN0IE9QRU5BSV9NT0RFTCA9IHByb2Nlc3MuZW52Lk9QRU5BSV9NT0RFTCB8fCAnZ3B0LTRvLW1pbmknXG4iXSwibmFtZXMiOlsiT3BlbkFJIiwiZ2V0Q29uZmlnIiwiY2xpZW50IiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiZ2V0T3BlbkFJIiwiY2ZnIiwib3BlbmFpS2V5IiwiT1BFTkFJX01PREVMIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/openai.ts\n");

/***/ }),

/***/ "(rsc)/./lib/prompts.ts":
/*!************************!*\
  !*** ./lib/prompts.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   SYSTEM_PROMPT: () => (/* binding */ SYSTEM_PROMPT),\n/* harmony export */   makeUserPrompt: () => (/* binding */ makeUserPrompt)\n/* harmony export */ });\nconst SYSTEM_PROMPT = `You are a resume tailoring assistant. You must never invent employment, responsibilities, or metrics not present in the user's resume.\nYou may rephrase and reorder text, emphasize relevant achievements, insert synonyms and role-specific keywords ONLY IF they are consistent with the original experience.\nTarget: ATS-friendly, concise impact bullets: Action verb + what + tools/skills + measurable outcome or scope.\nBullets must be 1–2 lines each, no first-person, no fluff.\nPolicy: absolutely no fabricated credentials, roles, companies, tools, or metrics.`;\nfunction makeUserPrompt({ resume_json, job_text, tone }) {\n    return `RESUME (STRUCTURED JSON):\n${JSON.stringify(resume_json)}\n\nJOB DESCRIPTION:\n${job_text}\n\nTASKS:\n1) Identify top 10 skills/keywords in the JD.\n2) For each experience bullet in the resume, rewrite it to align with the JD when truthful.\n3) If a bullet is irrelevant to the JD, compress or remove it.\n4) Do NOT introduce new employers, roles, or fabricated metrics. If metric unknown, keep qualitative impact.\n5) Return:\n{\n  \"skills_matched\": [...],\n  \"skills_missing_but_relevant\": [...],\n  \"summary\": \"2-3 lines tailored to JD, no I/Me\",\n  \"experience\": [\n    {\"company\": \"...\",\"role\":\"...\",\"dates\":\"...\",\"bullets\":[ \"...\", \"...\", \"...\" ]},\n    ...\n  ],\n  \"skills_section\": [\"...\"],\n  \"notes_to_user\": [\"Flagged ambiguity...\", \"Consider adding ... if true\"]\n}\n\nTONE: ${tone}\nIf the JOB DESCRIPTION content is very short (< 400 chars), only optimize wording and ordering; do not add any new keywords beyond what appears in the resume or JD.\nReturn JSON exactly in the specified schema; no extra keys.`;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvcHJvbXB0cy50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLE1BQU1BLGdCQUFnQixDQUFDOzs7O2tGQUlvRCxDQUFDO0FBRTVFLFNBQVNDLGVBQWUsRUFBRUMsV0FBVyxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBdUQ7SUFDakgsT0FBTyxDQUFDO0FBQ1YsRUFBRUMsS0FBS0MsU0FBUyxDQUFDSixhQUFhOzs7QUFHOUIsRUFBRUMsU0FBUzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7TUFvQkwsRUFBRUMsS0FBSzs7MkRBRThDLENBQUM7QUFDNUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9haS1yZXN1bWUtdGFpbG9yLy4vbGliL3Byb21wdHMudHM/YzE1NiJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgU1lTVEVNX1BST01QVCA9IGBZb3UgYXJlIGEgcmVzdW1lIHRhaWxvcmluZyBhc3Npc3RhbnQuIFlvdSBtdXN0IG5ldmVyIGludmVudCBlbXBsb3ltZW50LCByZXNwb25zaWJpbGl0aWVzLCBvciBtZXRyaWNzIG5vdCBwcmVzZW50IGluIHRoZSB1c2VyJ3MgcmVzdW1lLlxuWW91IG1heSByZXBocmFzZSBhbmQgcmVvcmRlciB0ZXh0LCBlbXBoYXNpemUgcmVsZXZhbnQgYWNoaWV2ZW1lbnRzLCBpbnNlcnQgc3lub255bXMgYW5kIHJvbGUtc3BlY2lmaWMga2V5d29yZHMgT05MWSBJRiB0aGV5IGFyZSBjb25zaXN0ZW50IHdpdGggdGhlIG9yaWdpbmFsIGV4cGVyaWVuY2UuXG5UYXJnZXQ6IEFUUy1mcmllbmRseSwgY29uY2lzZSBpbXBhY3QgYnVsbGV0czogQWN0aW9uIHZlcmIgKyB3aGF0ICsgdG9vbHMvc2tpbGxzICsgbWVhc3VyYWJsZSBvdXRjb21lIG9yIHNjb3BlLlxuQnVsbGV0cyBtdXN0IGJlIDHigJMyIGxpbmVzIGVhY2gsIG5vIGZpcnN0LXBlcnNvbiwgbm8gZmx1ZmYuXG5Qb2xpY3k6IGFic29sdXRlbHkgbm8gZmFicmljYXRlZCBjcmVkZW50aWFscywgcm9sZXMsIGNvbXBhbmllcywgdG9vbHMsIG9yIG1ldHJpY3MuYFxuXG5leHBvcnQgZnVuY3Rpb24gbWFrZVVzZXJQcm9tcHQoeyByZXN1bWVfanNvbiwgam9iX3RleHQsIHRvbmUgfTp7IHJlc3VtZV9qc29uOiBhbnksIGpvYl90ZXh0OiBzdHJpbmcsIHRvbmU6IHN0cmluZyB9KSB7XG4gIHJldHVybiBgUkVTVU1FIChTVFJVQ1RVUkVEIEpTT04pOlxuJHtKU09OLnN0cmluZ2lmeShyZXN1bWVfanNvbil9XG5cbkpPQiBERVNDUklQVElPTjpcbiR7am9iX3RleHR9XG5cblRBU0tTOlxuMSkgSWRlbnRpZnkgdG9wIDEwIHNraWxscy9rZXl3b3JkcyBpbiB0aGUgSkQuXG4yKSBGb3IgZWFjaCBleHBlcmllbmNlIGJ1bGxldCBpbiB0aGUgcmVzdW1lLCByZXdyaXRlIGl0IHRvIGFsaWduIHdpdGggdGhlIEpEIHdoZW4gdHJ1dGhmdWwuXG4zKSBJZiBhIGJ1bGxldCBpcyBpcnJlbGV2YW50IHRvIHRoZSBKRCwgY29tcHJlc3Mgb3IgcmVtb3ZlIGl0LlxuNCkgRG8gTk9UIGludHJvZHVjZSBuZXcgZW1wbG95ZXJzLCByb2xlcywgb3IgZmFicmljYXRlZCBtZXRyaWNzLiBJZiBtZXRyaWMgdW5rbm93biwga2VlcCBxdWFsaXRhdGl2ZSBpbXBhY3QuXG41KSBSZXR1cm46XG57XG4gIFwic2tpbGxzX21hdGNoZWRcIjogWy4uLl0sXG4gIFwic2tpbGxzX21pc3NpbmdfYnV0X3JlbGV2YW50XCI6IFsuLi5dLFxuICBcInN1bW1hcnlcIjogXCIyLTMgbGluZXMgdGFpbG9yZWQgdG8gSkQsIG5vIEkvTWVcIixcbiAgXCJleHBlcmllbmNlXCI6IFtcbiAgICB7XCJjb21wYW55XCI6IFwiLi4uXCIsXCJyb2xlXCI6XCIuLi5cIixcImRhdGVzXCI6XCIuLi5cIixcImJ1bGxldHNcIjpbIFwiLi4uXCIsIFwiLi4uXCIsIFwiLi4uXCIgXX0sXG4gICAgLi4uXG4gIF0sXG4gIFwic2tpbGxzX3NlY3Rpb25cIjogW1wiLi4uXCJdLFxuICBcIm5vdGVzX3RvX3VzZXJcIjogW1wiRmxhZ2dlZCBhbWJpZ3VpdHkuLi5cIiwgXCJDb25zaWRlciBhZGRpbmcgLi4uIGlmIHRydWVcIl1cbn1cblxuVE9ORTogJHt0b25lfVxuSWYgdGhlIEpPQiBERVNDUklQVElPTiBjb250ZW50IGlzIHZlcnkgc2hvcnQgKDwgNDAwIGNoYXJzKSwgb25seSBvcHRpbWl6ZSB3b3JkaW5nIGFuZCBvcmRlcmluZzsgZG8gbm90IGFkZCBhbnkgbmV3IGtleXdvcmRzIGJleW9uZCB3aGF0IGFwcGVhcnMgaW4gdGhlIHJlc3VtZSBvciBKRC5cblJldHVybiBKU09OIGV4YWN0bHkgaW4gdGhlIHNwZWNpZmllZCBzY2hlbWE7IG5vIGV4dHJhIGtleXMuYFxufVxuIl0sIm5hbWVzIjpbIlNZU1RFTV9QUk9NUFQiLCJtYWtlVXNlclByb21wdCIsInJlc3VtZV9qc29uIiwiam9iX3RleHQiLCJ0b25lIiwiSlNPTiIsInN0cmluZ2lmeSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/prompts.ts\n");

/***/ }),

/***/ "(rsc)/./lib/schemas.ts":
/*!************************!*\
  !*** ./lib/schemas.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   RoleSchema: () => (/* binding */ RoleSchema),\n/* harmony export */   TailoredResultSchema: () => (/* binding */ TailoredResultSchema),\n/* harmony export */   coerceTailoredResult: () => (/* binding */ coerceTailoredResult),\n/* harmony export */   validateTailoredResult: () => (/* binding */ validateTailoredResult)\n/* harmony export */ });\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/types.js\");\n/* harmony import */ var zod__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! zod */ \"(rsc)/./node_modules/zod/v3/ZodError.js\");\n\nconst RoleSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    company: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Company name is required\"),\n    role: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Role title is required\"),\n    dates: zod__WEBPACK_IMPORTED_MODULE_0__.string().optional().default(\"\"),\n    bullets: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Bullet point cannot be empty\")).max(12, \"Too many bullet points\")\n}).strict();\nconst TailoredResultSchema = zod__WEBPACK_IMPORTED_MODULE_0__.object({\n    skills_matched: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([]),\n    skills_missing_but_relevant: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([]),\n    summary: zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Summary is required\").optional().default(\"\"),\n    experience: zod__WEBPACK_IMPORTED_MODULE_0__.array(RoleSchema).min(0, \"Experience array is required\"),\n    skills_section: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string().min(1, \"Skill cannot be empty\")).min(0, \"Skills array is required\"),\n    notes_to_user: zod__WEBPACK_IMPORTED_MODULE_0__.array(zod__WEBPACK_IMPORTED_MODULE_0__.string()).optional().default([])\n}).strict();\n// Enhanced validation with detailed error reporting\nfunction validateTailoredResult(data) {\n    try {\n        const result = TailoredResultSchema.parse(data);\n        return {\n            valid: true,\n            data: result,\n            errors: []\n        };\n    } catch (error) {\n        if (error instanceof zod__WEBPACK_IMPORTED_MODULE_1__.ZodError) {\n            const errors = error.errors.map((err)=>{\n                const path = err.path.join(\".\");\n                return `${path}: ${err.message}`;\n            });\n            return {\n                valid: false,\n                errors\n            };\n        }\n        return {\n            valid: false,\n            errors: [\n                String(error)\n            ]\n        };\n    }\n}\n// Coercion helpers for common data issues\nfunction coerceTailoredResult(data) {\n    const coerced = {};\n    // Coerce summary\n    coerced.summary = typeof data.summary === \"string\" ? data.summary.trim() : \"\";\n    // Coerce skills_section\n    if (Array.isArray(data.skills_section)) {\n        coerced.skills_section = data.skills_section.filter((skill)=>typeof skill === \"string\" && skill.trim().length > 0).map((skill)=>skill.trim());\n    } else if (typeof data.skills_section === \"string\") {\n        coerced.skills_section = data.skills_section.split(/[,;|•\\n]/).map((s)=>s.trim()).filter((s)=>s.length > 0);\n    } else {\n        coerced.skills_section = [];\n    }\n    // Coerce experience\n    if (Array.isArray(data.experience)) {\n        coerced.experience = data.experience.map((exp)=>coerceRole(exp)).filter(Boolean);\n    } else {\n        coerced.experience = [];\n    }\n    // Coerce optional fields\n    coerced.skills_matched = Array.isArray(data.skills_matched) ? data.skills_matched : [];\n    coerced.skills_missing_but_relevant = Array.isArray(data.skills_missing_but_relevant) ? data.skills_missing_but_relevant : [];\n    coerced.notes_to_user = Array.isArray(data.notes_to_user) ? data.notes_to_user : [];\n    return coerced;\n}\nfunction coerceRole(exp) {\n    if (!exp || typeof exp !== \"object\") return null;\n    return {\n        company: typeof exp.company === \"string\" ? exp.company.trim() : \"Unknown Company\",\n        role: typeof exp.role === \"string\" ? exp.role.trim() : \"Unknown Role\",\n        dates: typeof exp.dates === \"string\" ? exp.dates.trim() : \"\",\n        bullets: Array.isArray(exp.bullets) ? exp.bullets.filter((b)=>typeof b === \"string\" && b.trim().length > 0).map((b)=>b.trim()) : []\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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WUEsRUFBRVgsSUFBSSxHQUFHSyxNQUFNLEdBQUcsR0FBR2IsR0FBRyxDQUFDbUIsQ0FBQUEsSUFBS0EsRUFBRVgsSUFBSSxNQUNyRixFQUFFO0lBQ1I7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvc2NoZW1hcy50cz80NWMzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHogfSBmcm9tICd6b2QnXG5cbmV4cG9ydCBjb25zdCBSb2xlU2NoZW1hID0gei5vYmplY3Qoe1xuICBjb21wYW55OiB6LnN0cmluZygpLm1pbigxLCAnQ29tcGFueSBuYW1lIGlzIHJlcXVpcmVkJyksXG4gIHJvbGU6IHouc3RyaW5nKCkubWluKDEsICdSb2xlIHRpdGxlIGlzIHJlcXVpcmVkJyksXG4gIGRhdGVzOiB6LnN0cmluZygpLm9wdGlvbmFsKCkuZGVmYXVsdCgnJyksXG4gIGJ1bGxldHM6IHouYXJyYXkoei5zdHJpbmcoKS5taW4oMSwgJ0J1bGxldCBwb2ludCBjYW5ub3QgYmUgZW1wdHknKSkubWF4KDEyLCAnVG9vIG1hbnkgYnVsbGV0IHBvaW50cycpXG59KS5zdHJpY3QoKVxuXG5leHBvcnQgY29uc3QgVGFpbG9yZWRSZXN1bHRTY2hlbWEgPSB6Lm9iamVjdCh7XG4gIHNraWxsc19tYXRjaGVkOiB6LmFycmF5KHouc3RyaW5nKCkpLm9wdGlvbmFsKCkuZGVmYXVsdChbXSksXG4gIHNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudDogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pLFxuICBzdW1tYXJ5OiB6LnN0cmluZygpLm1pbigxLCAnU3VtbWFyeSBpcyByZXF1aXJlZCcpLm9wdGlvbmFsKCkuZGVmYXVsdCgnJyksXG4gIGV4cGVyaWVuY2U6IHouYXJyYXkoUm9sZVNjaGVtYSkubWluKDAsICdFeHBlcmllbmNlIGFycmF5IGlzIHJlcXVpcmVkJyksXG4gIHNraWxsc19zZWN0aW9uOiB6LmFycmF5KHouc3RyaW5nKCkubWluKDEsICdTa2lsbCBjYW5ub3QgYmUgZW1wdHknKSkubWluKDAsICdTa2lsbHMgYXJyYXkgaXMgcmVxdWlyZWQnKSxcbiAgbm90ZXNfdG9fdXNlcjogei5hcnJheSh6LnN0cmluZygpKS5vcHRpb25hbCgpLmRlZmF1bHQoW10pXG59KS5zdHJpY3QoKVxuXG5leHBvcnQgdHlwZSBUYWlsb3JlZFJlc3VsdFR5cGUgPSB6LmluZmVyPHR5cGVvZiBUYWlsb3JlZFJlc3VsdFNjaGVtYT5cblxuLy8gRW5oYW5jZWQgdmFsaWRhdGlvbiB3aXRoIGRldGFpbGVkIGVycm9yIHJlcG9ydGluZ1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlVGFpbG9yZWRSZXN1bHQoZGF0YTogYW55KTogeyBcbiAgdmFsaWQ6IGJvb2xlYW4sIFxuICBkYXRhPzogVGFpbG9yZWRSZXN1bHRUeXBlLCBcbiAgZXJyb3JzOiBzdHJpbmdbXSBcbn0ge1xuICB0cnkge1xuICAgIGNvbnN0IHJlc3VsdCA9IFRhaWxvcmVkUmVzdWx0U2NoZW1hLnBhcnNlKGRhdGEpXG4gICAgcmV0dXJuIHsgdmFsaWQ6IHRydWUsIGRhdGE6IHJlc3VsdCwgZXJyb3JzOiBbXSB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2Ygei5ab2RFcnJvcikge1xuICAgICAgY29uc3QgZXJyb3JzID0gZXJyb3IuZXJyb3JzLm1hcChlcnIgPT4ge1xuICAgICAgICBjb25zdCBwYXRoID0gZXJyLnBhdGguam9pbignLicpXG4gICAgICAgIHJldHVybiBgJHtwYXRofTogJHtlcnIubWVzc2FnZX1gXG4gICAgICB9KVxuICAgICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcnMgfVxuICAgIH1cbiAgICByZXR1cm4geyB2YWxpZDogZmFsc2UsIGVycm9yczogW1N0cmluZyhlcnJvcildIH1cbiAgfVxufVxuXG4vLyBDb2VyY2lvbiBoZWxwZXJzIGZvciBjb21tb24gZGF0YSBpc3N1ZXNcbmV4cG9ydCBmdW5jdGlvbiBjb2VyY2VUYWlsb3JlZFJlc3VsdChkYXRhOiBhbnkpOiBUYWlsb3JlZFJlc3VsdFR5cGUge1xuICBjb25zdCBjb2VyY2VkOiBhbnkgPSB7fVxuICBcbiAgLy8gQ29lcmNlIHN1bW1hcnlcbiAgY29lcmNlZC5zdW1tYXJ5ID0gdHlwZW9mIGRhdGEuc3VtbWFyeSA9PT0gJ3N0cmluZycgPyBkYXRhLnN1bW1hcnkudHJpbSgpIDogJydcbiAgXG4gIC8vIENvZXJjZSBza2lsbHNfc2VjdGlvblxuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLnNraWxsc19zZWN0aW9uKSkge1xuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBkYXRhLnNraWxsc19zZWN0aW9uXG4gICAgICAuZmlsdGVyKHNraWxsID0+IHR5cGVvZiBza2lsbCA9PT0gJ3N0cmluZycgJiYgc2tpbGwudHJpbSgpLmxlbmd0aCA+IDApXG4gICAgICAubWFwKHNraWxsID0+IHNraWxsLnRyaW0oKSlcbiAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YS5za2lsbHNfc2VjdGlvbiA9PT0gJ3N0cmluZycpIHtcbiAgICBjb2VyY2VkLnNraWxsc19zZWN0aW9uID0gZGF0YS5za2lsbHNfc2VjdGlvblxuICAgICAgLnNwbGl0KC9bLDt84oCiXFxuXS8pXG4gICAgICAubWFwKHMgPT4gcy50cmltKCkpXG4gICAgICAuZmlsdGVyKHMgPT4gcy5sZW5ndGggPiAwKVxuICB9IGVsc2Uge1xuICAgIGNvZXJjZWQuc2tpbGxzX3NlY3Rpb24gPSBbXVxuICB9XG4gIFxuICAvLyBDb2VyY2UgZXhwZXJpZW5jZVxuICBpZiAoQXJyYXkuaXNBcnJheShkYXRhLmV4cGVyaWVuY2UpKSB7XG4gICAgY29lcmNlZC5leHBlcmllbmNlID0gZGF0YS5leHBlcmllbmNlLm1hcChleHAgPT4gY29lcmNlUm9sZShleHApKS5maWx0ZXIoQm9vbGVhbilcbiAgfSBlbHNlIHtcbiAgICBjb2VyY2VkLmV4cGVyaWVuY2UgPSBbXVxuICB9XG4gIFxuICAvLyBDb2VyY2Ugb3B0aW9uYWwgZmllbGRzXG4gIGNvZXJjZWQuc2tpbGxzX21hdGNoZWQgPSBBcnJheS5pc0FycmF5KGRhdGEuc2tpbGxzX21hdGNoZWQpID8gZGF0YS5za2lsbHNfbWF0Y2hlZCA6IFtdXG4gIGNvZXJjZWQuc2tpbGxzX21pc3NpbmdfYnV0X3JlbGV2YW50ID0gQXJyYXkuaXNBcnJheShkYXRhLnNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCkgPyBkYXRhLnNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCA6IFtdXG4gIGNvZXJjZWQubm90ZXNfdG9fdXNlciA9IEFycmF5LmlzQXJyYXkoZGF0YS5ub3Rlc190b191c2VyKSA/IGRhdGEubm90ZXNfdG9fdXNlciA6IFtdXG4gIFxuICByZXR1cm4gY29lcmNlZCBhcyBUYWlsb3JlZFJlc3VsdFR5cGVcbn1cblxuZnVuY3Rpb24gY29lcmNlUm9sZShleHA6IGFueSk6IGFueSB7XG4gIGlmICghZXhwIHx8IHR5cGVvZiBleHAgIT09ICdvYmplY3QnKSByZXR1cm4gbnVsbFxuICBcbiAgcmV0dXJuIHtcbiAgICBjb21wYW55OiB0eXBlb2YgZXhwLmNvbXBhbnkgPT09ICdzdHJpbmcnID8gZXhwLmNvbXBhbnkudHJpbSgpIDogJ1Vua25vd24gQ29tcGFueScsXG4gICAgcm9sZTogdHlwZW9mIGV4cC5yb2xlID09PSAnc3RyaW5nJyA/IGV4cC5yb2xlLnRyaW0oKSA6ICdVbmtub3duIFJvbGUnLFxuICAgIGRhdGVzOiB0eXBlb2YgZXhwLmRhdGVzID09PSAnc3RyaW5nJyA/IGV4cC5kYXRlcy50cmltKCkgOiAnJyxcbiAgICBidWxsZXRzOiBBcnJheS5pc0FycmF5KGV4cC5idWxsZXRzKSBcbiAgICAgID8gZXhwLmJ1bGxldHMuZmlsdGVyKGIgPT4gdHlwZW9mIGIgPT09ICdzdHJpbmcnICYmIGIudHJpbSgpLmxlbmd0aCA+IDApLm1hcChiID0+IGIudHJpbSgpKVxuICAgICAgOiBbXVxuICB9XG59XG4iXSwibmFtZXMiOlsieiIsIlJvbGVTY2hlbWEiLCJvYmplY3QiLCJjb21wYW55Iiwic3RyaW5nIiwibWluIiwicm9sZSIsImRhdGVzIiwib3B0aW9uYWwiLCJkZWZhdWx0IiwiYnVsbGV0cyIsImFycmF5IiwibWF4Iiwic3RyaWN0IiwiVGFpbG9yZWRSZXN1bHRTY2hlbWEiLCJza2lsbHNfbWF0Y2hlZCIsInNraWxsc19taXNzaW5nX2J1dF9yZWxldmFudCIsInN1bW1hcnkiLCJleHBlcmllbmNlIiwic2tpbGxzX3NlY3Rpb24iLCJub3Rlc190b191c2VyIiwidmFsaWRhdGVUYWlsb3JlZFJlc3VsdCIsImRhdGEiLCJyZXN1bHQiLCJwYXJzZSIsInZhbGlkIiwiZXJyb3JzIiwiZXJyb3IiLCJab2RFcnJvciIsIm1hcCIsImVyciIsInBhdGgiLCJqb2luIiwibWVzc2FnZSIsIlN0cmluZyIsImNvZXJjZVRhaWxvcmVkUmVzdWx0IiwiY29lcmNlZCIsInRyaW0iLCJBcnJheSIsImlzQXJyYXkiLCJmaWx0ZXIiLCJza2lsbCIsImxlbmd0aCIsInNwbGl0IiwicyIsImV4cCIsImNvZXJjZVJvbGUiLCJCb29sZWFuIiwiYiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/schemas.ts\n");

/***/ }),

/***/ "(rsc)/./lib/sessions.ts":
/*!*************************!*\
  !*** ./lib/sessions.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSession: () => (/* binding */ createSession),\n/* harmony export */   deleteSession: () => (/* binding */ deleteSession),\n/* harmony export */   getSession: () => (/* binding */ getSession),\n/* harmony export */   getSessionVersion: () => (/* binding */ getSessionVersion),\n/* harmony export */   updateSession: () => (/* binding */ updateSession),\n/* harmony export */   validateSessionVersion: () => (/* binding */ validateSessionVersion)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\nconst store = new Map();\nfunction purgeExpired(ttlMs = 60 * 60 * 1000) {\n    const now = Date.now();\n    for (const [id, s] of store){\n        if (now - s.createdAt > ttlMs) store.delete(id);\n    }\n}\nfunction createSession(original, tailored, jdText, keywordStats) {\n    purgeExpired();\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])();\n    const version = generateSessionVersion(original, tailored);\n    const s = {\n        id,\n        version,\n        createdAt: Date.now(),\n        original,\n        tailored,\n        jdText,\n        keywordStats\n    };\n    store.set(id, s);\n    return s;\n}\nfunction getSession(id) {\n    purgeExpired();\n    const s = store.get(id);\n    if (!s) return null;\n    if (Date.now() - s.createdAt > 60 * 60 * 1000) {\n        store.delete(id);\n        return null;\n    }\n    return s;\n}\nfunction updateSession(id, updates) {\n    const s = store.get(id);\n    if (!s) return null;\n    const updated = {\n        ...s,\n        ...updates\n    };\n    if (updates.original || updates.tailored) {\n        updated.version = generateSessionVersion(updated.original, updated.tailored);\n    }\n    store.set(id, updated);\n    return updated;\n}\nfunction deleteSession(id) {\n    return store.delete(id);\n}\nfunction getSessionVersion(id) {\n    const s = getSession(id);\n    return s ? s.version : null;\n}\nfunction generateSessionVersion(original, tailored) {\n    // Create a hash of the content to detect changes\n    const content = JSON.stringify({\n        original,\n        tailored\n    });\n    return btoa(content).slice(0, 16) // Simple hash, first 16 chars\n    ;\n}\nfunction validateSessionVersion(id, providedVersion) {\n    const currentVersion = getSessionVersion(id);\n    return currentVersion === providedVersion;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2Vzc2lvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUFpQztBQWFqQyxNQUFNRSxRQUFRLElBQUlDO0FBRWxCLFNBQVNDLGFBQWFDLFFBQVEsS0FBSyxLQUFLLElBQUk7SUFDMUMsTUFBTUMsTUFBTUMsS0FBS0QsR0FBRztJQUNwQixLQUFLLE1BQU0sQ0FBQ0UsSUFBSUMsRUFBRSxJQUFJUCxNQUFPO1FBQzNCLElBQUlJLE1BQU1HLEVBQUVDLFNBQVMsR0FBR0wsT0FBT0gsTUFBTVMsTUFBTSxDQUFDSDtJQUM5QztBQUNGO0FBRU8sU0FBU0ksY0FBY0MsUUFBb0IsRUFBRUMsUUFBd0IsRUFBRUMsTUFBYyxFQUFFQyxZQUEwQjtJQUN0SFo7SUFDQSxNQUFNSSxLQUFLUCxnREFBSUE7SUFDZixNQUFNZ0IsVUFBVUMsdUJBQXVCTCxVQUFVQztJQUNqRCxNQUFNTCxJQUFhO1FBQUVEO1FBQUlTO1FBQVNQLFdBQVdILEtBQUtELEdBQUc7UUFBSU87UUFBVUM7UUFBVUM7UUFBUUM7SUFBYTtJQUNsR2QsTUFBTWlCLEdBQUcsQ0FBQ1gsSUFBSUM7SUFDZCxPQUFPQTtBQUNUO0FBRU8sU0FBU1csV0FBV1osRUFBVTtJQUNuQ0o7SUFDQSxNQUFNSyxJQUFJUCxNQUFNbUIsR0FBRyxDQUFDYjtJQUNwQixJQUFJLENBQUNDLEdBQUcsT0FBTztJQUNmLElBQUlGLEtBQUtELEdBQUcsS0FBS0csRUFBRUMsU0FBUyxHQUFHLEtBQUssS0FBSyxNQUFNO1FBQzdDUixNQUFNUyxNQUFNLENBQUNIO1FBQ2IsT0FBTztJQUNUO0lBQ0EsT0FBT0M7QUFDVDtBQUVPLFNBQVNhLGNBQWNkLEVBQVUsRUFBRWUsT0FBeUI7SUFDakUsTUFBTWQsSUFBSVAsTUFBTW1CLEdBQUcsQ0FBQ2I7SUFDcEIsSUFBSSxDQUFDQyxHQUFHLE9BQU87SUFFZixNQUFNZSxVQUFVO1FBQUUsR0FBR2YsQ0FBQztRQUFFLEdBQUdjLE9BQU87SUFBQztJQUNuQyxJQUFJQSxRQUFRVixRQUFRLElBQUlVLFFBQVFULFFBQVEsRUFBRTtRQUN4Q1UsUUFBUVAsT0FBTyxHQUFHQyx1QkFBdUJNLFFBQVFYLFFBQVEsRUFBRVcsUUFBUVYsUUFBUTtJQUM3RTtJQUVBWixNQUFNaUIsR0FBRyxDQUFDWCxJQUFJZ0I7SUFDZCxPQUFPQTtBQUNUO0FBRU8sU0FBU0MsY0FBY2pCLEVBQVU7SUFDdEMsT0FBT04sTUFBTVMsTUFBTSxDQUFDSDtBQUN0QjtBQUVPLFNBQVNrQixrQkFBa0JsQixFQUFVO0lBQzFDLE1BQU1DLElBQUlXLFdBQVdaO0lBQ3JCLE9BQU9DLElBQUlBLEVBQUVRLE9BQU8sR0FBRztBQUN6QjtBQUVBLFNBQVNDLHVCQUF1QkwsUUFBb0IsRUFBRUMsUUFBd0I7SUFDNUUsaURBQWlEO0lBQ2pELE1BQU1hLFVBQVVDLEtBQUtDLFNBQVMsQ0FBQztRQUFFaEI7UUFBVUM7SUFBUztJQUNwRCxPQUFPZ0IsS0FBS0gsU0FBU0ksS0FBSyxDQUFDLEdBQUcsSUFBSSw4QkFBOEI7O0FBQ2xFO0FBRU8sU0FBU0MsdUJBQXVCeEIsRUFBVSxFQUFFeUIsZUFBdUI7SUFDeEUsTUFBTUMsaUJBQWlCUixrQkFBa0JsQjtJQUN6QyxPQUFPMEIsbUJBQW1CRDtBQUM1QiIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvc2Vzc2lvbnMudHM/MWY5ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkIH0gZnJvbSAndXVpZCdcbmltcG9ydCB7IFJlc3VtZUpTT04sIFRhaWxvcmVkUmVzdWx0LCBLZXl3b3JkU3RhdHMgfSBmcm9tICcuL3R5cGVzJ1xuXG50eXBlIFNlc3Npb24gPSB7XG4gIGlkOiBzdHJpbmdcbiAgdmVyc2lvbjogc3RyaW5nXG4gIGNyZWF0ZWRBdDogbnVtYmVyXG4gIG9yaWdpbmFsOiBSZXN1bWVKU09OXG4gIHRhaWxvcmVkOiBUYWlsb3JlZFJlc3VsdFxuICBqZFRleHQ6IHN0cmluZ1xuICBrZXl3b3JkU3RhdHM6IEtleXdvcmRTdGF0c1xufVxuXG5jb25zdCBzdG9yZSA9IG5ldyBNYXA8c3RyaW5nLCBTZXNzaW9uPigpXG5cbmZ1bmN0aW9uIHB1cmdlRXhwaXJlZCh0dGxNcyA9IDYwICogNjAgKiAxMDAwKSB7XG4gIGNvbnN0IG5vdyA9IERhdGUubm93KClcbiAgZm9yIChjb25zdCBbaWQsIHNdIG9mIHN0b3JlKSB7XG4gICAgaWYgKG5vdyAtIHMuY3JlYXRlZEF0ID4gdHRsTXMpIHN0b3JlLmRlbGV0ZShpZClcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlU2Vzc2lvbihvcmlnaW5hbDogUmVzdW1lSlNPTiwgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0LCBqZFRleHQ6IHN0cmluZywga2V5d29yZFN0YXRzOiBLZXl3b3JkU3RhdHMpIHtcbiAgcHVyZ2VFeHBpcmVkKClcbiAgY29uc3QgaWQgPSB1dWlkKClcbiAgY29uc3QgdmVyc2lvbiA9IGdlbmVyYXRlU2Vzc2lvblZlcnNpb24ob3JpZ2luYWwsIHRhaWxvcmVkKVxuICBjb25zdCBzOiBTZXNzaW9uID0geyBpZCwgdmVyc2lvbiwgY3JlYXRlZEF0OiBEYXRlLm5vdygpLCBvcmlnaW5hbCwgdGFpbG9yZWQsIGpkVGV4dCwga2V5d29yZFN0YXRzIH1cbiAgc3RvcmUuc2V0KGlkLCBzKVxuICByZXR1cm4gc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2Vzc2lvbihpZDogc3RyaW5nKSB7XG4gIHB1cmdlRXhwaXJlZCgpXG4gIGNvbnN0IHMgPSBzdG9yZS5nZXQoaWQpXG4gIGlmICghcykgcmV0dXJuIG51bGxcbiAgaWYgKERhdGUubm93KCkgLSBzLmNyZWF0ZWRBdCA+IDYwICogNjAgKiAxMDAwKSB7XG4gICAgc3RvcmUuZGVsZXRlKGlkKVxuICAgIHJldHVybiBudWxsXG4gIH1cbiAgcmV0dXJuIHNcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZVNlc3Npb24oaWQ6IHN0cmluZywgdXBkYXRlczogUGFydGlhbDxTZXNzaW9uPikge1xuICBjb25zdCBzID0gc3RvcmUuZ2V0KGlkKVxuICBpZiAoIXMpIHJldHVybiBudWxsXG4gIFxuICBjb25zdCB1cGRhdGVkID0geyAuLi5zLCAuLi51cGRhdGVzIH1cbiAgaWYgKHVwZGF0ZXMub3JpZ2luYWwgfHwgdXBkYXRlcy50YWlsb3JlZCkge1xuICAgIHVwZGF0ZWQudmVyc2lvbiA9IGdlbmVyYXRlU2Vzc2lvblZlcnNpb24odXBkYXRlZC5vcmlnaW5hbCwgdXBkYXRlZC50YWlsb3JlZClcbiAgfVxuICBcbiAgc3RvcmUuc2V0KGlkLCB1cGRhdGVkKVxuICByZXR1cm4gdXBkYXRlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihpZDogc3RyaW5nKSB7XG4gIHJldHVybiBzdG9yZS5kZWxldGUoaWQpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRTZXNzaW9uVmVyc2lvbihpZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIGNvbnN0IHMgPSBnZXRTZXNzaW9uKGlkKVxuICByZXR1cm4gcyA/IHMudmVyc2lvbiA6IG51bGxcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVTZXNzaW9uVmVyc2lvbihvcmlnaW5hbDogUmVzdW1lSlNPTiwgdGFpbG9yZWQ6IFRhaWxvcmVkUmVzdWx0KTogc3RyaW5nIHtcbiAgLy8gQ3JlYXRlIGEgaGFzaCBvZiB0aGUgY29udGVudCB0byBkZXRlY3QgY2hhbmdlc1xuICBjb25zdCBjb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoeyBvcmlnaW5hbCwgdGFpbG9yZWQgfSlcbiAgcmV0dXJuIGJ0b2EoY29udGVudCkuc2xpY2UoMCwgMTYpIC8vIFNpbXBsZSBoYXNoLCBmaXJzdCAxNiBjaGFyc1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVTZXNzaW9uVmVyc2lvbihpZDogc3RyaW5nLCBwcm92aWRlZFZlcnNpb246IHN0cmluZyk6IGJvb2xlYW4ge1xuICBjb25zdCBjdXJyZW50VmVyc2lvbiA9IGdldFNlc3Npb25WZXJzaW9uKGlkKVxuICByZXR1cm4gY3VycmVudFZlcnNpb24gPT09IHByb3ZpZGVkVmVyc2lvblxufVxuIl0sIm5hbWVzIjpbInY0IiwidXVpZCIsInN0b3JlIiwiTWFwIiwicHVyZ2VFeHBpcmVkIiwidHRsTXMiLCJub3ciLCJEYXRlIiwiaWQiLCJzIiwiY3JlYXRlZEF0IiwiZGVsZXRlIiwiY3JlYXRlU2Vzc2lvbiIsIm9yaWdpbmFsIiwidGFpbG9yZWQiLCJqZFRleHQiLCJrZXl3b3JkU3RhdHMiLCJ2ZXJzaW9uIiwiZ2VuZXJhdGVTZXNzaW9uVmVyc2lvbiIsInNldCIsImdldFNlc3Npb24iLCJnZXQiLCJ1cGRhdGVTZXNzaW9uIiwidXBkYXRlcyIsInVwZGF0ZWQiLCJkZWxldGVTZXNzaW9uIiwiZ2V0U2Vzc2lvblZlcnNpb24iLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsImJ0b2EiLCJzbGljZSIsInZhbGlkYXRlU2Vzc2lvblZlcnNpb24iLCJwcm92aWRlZFZlcnNpb24iLCJjdXJyZW50VmVyc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/sessions.ts\n");

/***/ }),

/***/ "(rsc)/./lib/telemetry.ts":
/*!**************************!*\
  !*** ./lib/telemetry.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   logAIResponse: () => (/* binding */ logAIResponse),\n/* harmony export */   logError: () => (/* binding */ logError),\n/* harmony export */   logPDFGeneration: () => (/* binding */ logPDFGeneration),\n/* harmony export */   logRequestTelemetry: () => (/* binding */ logRequestTelemetry),\n/* harmony export */   logSessionActivity: () => (/* binding */ logSessionActivity),\n/* harmony export */   startTrace: () => (/* binding */ startTrace)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n\nconst TELEMETRY_PATH = \"/tmp/telemetry.jsonl\";\nconst AI_RESPONSES_PATH = \"/tmp/ai-responses.jsonl\";\nconst ERROR_LOG_PATH = \"/tmp/error-log.jsonl\";\nconst LOG_DRAIN_URL = process.env.LOG_DRAIN_URL || \"\";\nconst LOG_DRAIN_KEY = process.env.LOG_DRAIN_KEY || \"\";\nfunction startTrace(meta = {}) {\n    const id = (0,uuid__WEBPACK_IMPORTED_MODULE_1__[\"default\"])();\n    const t0 = Date.now();\n    function end(ok, extra = {}) {\n        const rec = {\n            req_id: id,\n            route: meta.route || \"unknown\",\n            timing: Date.now() - t0,\n            timestamp: new Date().toISOString(),\n            final_status: ok ? \"success\" : \"error\",\n            ...meta,\n            ...extra\n        };\n        try {\n            fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(rec) + \"\\n\");\n        } catch (e) {\n            console.warn(\"Failed to write telemetry:\", e);\n        }\n        void sendToDrain(rec);\n        return rec;\n    }\n    return {\n        id,\n        end\n    };\n}\nfunction logAIResponse(attempt, success, error, responseLength, model) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"ai_response\",\n        attempt,\n        success,\n        error: error?.substring(0, 500),\n        responseLength,\n        model: model || process.env.OPENAI_MODEL || \"gpt-4o-mini\"\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(AI_RESPONSES_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log AI response:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logError(error, context = {}) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"error\",\n        message: error.message,\n        stack: error.stack,\n        context: JSON.stringify(context)\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(ERROR_LOG_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log error:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logPDFGeneration(attempt, success, error, method, size) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"pdf_generation\",\n        attempt,\n        success,\n        error: error?.substring(0, 500),\n        method,\n        size\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log PDF generation:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logSessionActivity(sessionId, activity, details = {}) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"session_activity\",\n        sessionId,\n        activity,\n        details: JSON.stringify(details)\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log session activity:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nfunction logRequestTelemetry(data) {\n    const logEntry = {\n        timestamp: new Date().toISOString(),\n        type: \"request_telemetry\",\n        ...data\n    };\n    try {\n        fs__WEBPACK_IMPORTED_MODULE_0___default().appendFileSync(TELEMETRY_PATH, JSON.stringify(logEntry) + \"\\n\");\n    } catch (e) {\n        console.warn(\"Failed to log request telemetry:\", e);\n    }\n    void sendToDrain(logEntry);\n}\nasync function sendToDrain(entry) {\n    if (!LOG_DRAIN_URL) return;\n    try {\n        await fetch(LOG_DRAIN_URL, {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                ...LOG_DRAIN_KEY ? {\n                    \"Authorization\": `Bearer ${LOG_DRAIN_KEY}`\n                } : {}\n            },\n            body: JSON.stringify(entry)\n        });\n    } catch  {}\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUMsQ0FBQztJQUN2RixNQUFNZCxXQUFXO1FBQ2ZoQixXQUFXLElBQUlULE9BQU9VLFdBQVc7UUFDakNnQixNQUFNO1FBQ05XO1FBQ0FDO1FBQ0FDLFNBQVMxQixLQUFLQyxTQUFTLENBQUN5QjtJQUMxQjtJQUVBLElBQUk7UUFDRnJELHdEQUFpQixDQUFDRyxnQkFBZ0J3QixLQUFLQyxTQUFTLENBQUNXLFlBQVk7SUFDL0QsRUFBRSxPQUFPVixHQUFHO1FBQ1ZDLFFBQVFDLElBQUksQ0FBQyxtQ0FBbUNGO0lBQ2xEO0lBQ0EsS0FBS0csWUFBWU87QUFDbkI7QUFFTyxTQUFTZSxvQkFBb0JDLElBWW5DO0lBQ0MsTUFBTWhCLFdBQVc7UUFDZmhCLFdBQVcsSUFBSVQsT0FBT1UsV0FBVztRQUNqQ2dCLE1BQU07UUFDTixHQUFHZSxJQUFJO0lBQ1Q7SUFFQSxJQUFJO1FBQ0Z2RCx3REFBaUIsQ0FBQ0csZ0JBQWdCd0IsS0FBS0MsU0FBUyxDQUFDVyxZQUFZO0lBQy9ELEVBQUUsT0FBT1YsR0FBRztRQUNWQyxRQUFRQyxJQUFJLENBQUMsb0NBQW9DRjtJQUNuRDtJQUNBLEtBQUtHLFlBQVlPO0FBQ25CO0FBRUEsZUFBZVAsWUFBWXdCLEtBQVU7SUFDbkMsSUFBSSxDQUFDbEQsZUFBZTtJQUNwQixJQUFJO1FBQ0YsTUFBTW1ELE1BQU1uRCxlQUFlO1lBQ3pCMEMsUUFBUTtZQUNSVSxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsR0FBSWpELGdCQUFnQjtvQkFBRSxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVBLGNBQWMsQ0FBQztnQkFBQyxJQUFJLENBQUMsQ0FBQztZQUN6RTtZQUNBa0QsTUFBTWhDLEtBQUtDLFNBQVMsQ0FBQzRCO1FBQ3ZCO0lBQ0YsRUFBRSxPQUFNLENBQUM7QUFDWCIsInNvdXJjZXMiOlsid2VicGFjazovL2FpLXJlc3VtZS10YWlsb3IvLi9saWIvdGVsZW1ldHJ5LnRzPzJjNzMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnXG5cbmNvbnN0IFRFTEVNRVRSWV9QQVRIID0gJy90bXAvdGVsZW1ldHJ5Lmpzb25sJ1xuY29uc3QgQUlfUkVTUE9OU0VTX1BBVEggPSAnL3RtcC9haS1yZXNwb25zZXMuanNvbmwnXG5jb25zdCBFUlJPUl9MT0dfUEFUSCA9ICcvdG1wL2Vycm9yLWxvZy5qc29ubCdcblxuY29uc3QgTE9HX0RSQUlOX1VSTCA9IHByb2Nlc3MuZW52LkxPR19EUkFJTl9VUkwgfHwgJydcbmNvbnN0IExPR19EUkFJTl9LRVkgPSBwcm9jZXNzLmVudi5MT0dfRFJBSU5fS0VZIHx8ICcnXG5cbmV4cG9ydCBmdW5jdGlvbiBzdGFydFRyYWNlKG1ldGE6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGlkID0gdXVpZCgpXG4gIGNvbnN0IHQwID0gRGF0ZS5ub3coKVxuICBcbiAgZnVuY3Rpb24gZW5kKG9rOiBib29sZWFuLCBleHRyYTogYW55ID0ge30pIHtcbiAgICBjb25zdCByZWMgPSB7IFxuICAgICAgcmVxX2lkOiBpZCxcbiAgICAgIHJvdXRlOiBtZXRhLnJvdXRlIHx8ICd1bmtub3duJyxcbiAgICAgIHRpbWluZzogRGF0ZS5ub3coKSAtIHQwLFxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBmaW5hbF9zdGF0dXM6IG9rID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJyxcbiAgICAgIC4uLm1ldGEsIFxuICAgICAgLi4uZXh0cmEgXG4gICAgfVxuICAgIHRyeSB7IFxuICAgICAgZnMuYXBwZW5kRmlsZVN5bmMoVEVMRU1FVFJZX1BBVEgsIEpTT04uc3RyaW5naWZ5KHJlYykgKyAnXFxuJykgXG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgY29uc29sZS53YXJuKCdGYWlsZWQgdG8gd3JpdGUgdGVsZW1ldHJ5OicsIGUpXG4gICAgfVxuICAgIHZvaWQgc2VuZFRvRHJhaW4ocmVjKVxuICAgIHJldHVybiByZWNcbiAgfVxuICBcbiAgcmV0dXJuIHsgaWQsIGVuZCB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dBSVJlc3BvbnNlKGF0dGVtcHQ6IG51bWJlciwgc3VjY2VzczogYm9vbGVhbiwgZXJyb3I/OiBzdHJpbmcsIHJlc3BvbnNlTGVuZ3RoPzogbnVtYmVyLCBtb2RlbD86IHN0cmluZykge1xuICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB0eXBlOiAnYWlfcmVzcG9uc2UnLFxuICAgIGF0dGVtcHQsXG4gICAgc3VjY2VzcyxcbiAgICBlcnJvcjogZXJyb3I/LnN1YnN0cmluZygwLCA1MDApLCAvLyBUcnVuY2F0ZSBsb25nIGVycm9yc1xuICAgIHJlc3BvbnNlTGVuZ3RoLFxuICAgIG1vZGVsOiBtb2RlbCB8fCBwcm9jZXNzLmVudi5PUEVOQUlfTU9ERUwgfHwgJ2dwdC00by1taW5pJ1xuICB9XG4gIFxuICB0cnkge1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKEFJX1JFU1BPTlNFU19QQVRILCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkgKyAnXFxuJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvZyBBSSByZXNwb25zZTonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dFcnJvcihlcnJvcjogRXJyb3IsIGNvbnRleHQ6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHR5cGU6ICdlcnJvcicsXG4gICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSxcbiAgICBzdGFjazogZXJyb3Iuc3RhY2ssXG4gICAgY29udGV4dDogSlNPTi5zdHJpbmdpZnkoY29udGV4dClcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhFUlJPUl9MT0dfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgZXJyb3I6JywgZSlcbiAgfVxuICB2b2lkIHNlbmRUb0RyYWluKGxvZ0VudHJ5KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nUERGR2VuZXJhdGlvbihhdHRlbXB0OiBudW1iZXIsIHN1Y2Nlc3M6IGJvb2xlYW4sIGVycm9yPzogc3RyaW5nLCBtZXRob2Q/OiBzdHJpbmcsIHNpemU/OiBudW1iZXIpIHtcbiAgY29uc3QgbG9nRW50cnkgPSB7XG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdHlwZTogJ3BkZl9nZW5lcmF0aW9uJyxcbiAgICBhdHRlbXB0LFxuICAgIHN1Y2Nlc3MsXG4gICAgZXJyb3I6IGVycm9yPy5zdWJzdHJpbmcoMCwgNTAwKSxcbiAgICBtZXRob2QsXG4gICAgc2l6ZVxuICB9XG4gIFxuICB0cnkge1xuICAgIGZzLmFwcGVuZEZpbGVTeW5jKFRFTEVNRVRSWV9QQVRILCBKU09OLnN0cmluZ2lmeShsb2dFbnRyeSkgKyAnXFxuJylcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUud2FybignRmFpbGVkIHRvIGxvZyBQREYgZ2VuZXJhdGlvbjonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dTZXNzaW9uQWN0aXZpdHkoc2Vzc2lvbklkOiBzdHJpbmcsIGFjdGl2aXR5OiBzdHJpbmcsIGRldGFpbHM6IGFueSA9IHt9KSB7XG4gIGNvbnN0IGxvZ0VudHJ5ID0ge1xuICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHR5cGU6ICdzZXNzaW9uX2FjdGl2aXR5JyxcbiAgICBzZXNzaW9uSWQsXG4gICAgYWN0aXZpdHksXG4gICAgZGV0YWlsczogSlNPTi5zdHJpbmdpZnkoZGV0YWlscylcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhURUxFTUVUUllfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgc2Vzc2lvbiBhY3Rpdml0eTonLCBlKVxuICB9XG4gIHZvaWQgc2VuZFRvRHJhaW4obG9nRW50cnkpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2dSZXF1ZXN0VGVsZW1ldHJ5KGRhdGE6IHtcbiAgcmVxX2lkOiBzdHJpbmdcbiAgcm91dGU6IHN0cmluZ1xuICB0aW1pbmc6IG51bWJlclxuICBtb2RlbF90b2tlbnM/OiBudW1iZXJcbiAgcGRmX2xhdW5jaF9tcz86IG51bWJlclxuICBwZGZfcmVuZGVyX21zPzogbnVtYmVyXG4gIGRvY3hfbXM/OiBudW1iZXJcbiAgZmluYWxfc3RhdHVzOiAnc3VjY2VzcycgfCAnZXJyb3InXG4gIHdhc19zbmFwc2hvdF91c2VkPzogYm9vbGVhblxuICBlcnJvcl9jb2RlPzogc3RyaW5nXG4gIGFkZGl0aW9uYWxfbWV0cmljcz86IGFueVxufSkge1xuICBjb25zdCBsb2dFbnRyeSA9IHtcbiAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB0eXBlOiAncmVxdWVzdF90ZWxlbWV0cnknLFxuICAgIC4uLmRhdGFcbiAgfVxuICBcbiAgdHJ5IHtcbiAgICBmcy5hcHBlbmRGaWxlU3luYyhURUxFTUVUUllfUEFUSCwgSlNPTi5zdHJpbmdpZnkobG9nRW50cnkpICsgJ1xcbicpXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0byBsb2cgcmVxdWVzdCB0ZWxlbWV0cnk6JywgZSlcbiAgfVxuICB2b2lkIHNlbmRUb0RyYWluKGxvZ0VudHJ5KVxufVxuXG5hc3luYyBmdW5jdGlvbiBzZW5kVG9EcmFpbihlbnRyeTogYW55KSB7XG4gIGlmICghTE9HX0RSQUlOX1VSTCkgcmV0dXJuXG4gIHRyeSB7XG4gICAgYXdhaXQgZmV0Y2goTE9HX0RSQUlOX1VSTCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgIC4uLihMT0dfRFJBSU5fS0VZID8geyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtMT0dfRFJBSU5fS0VZfWAgfSA6IHt9KVxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGVudHJ5KVxuICAgIH0pXG4gIH0gY2F0Y2gge31cbn1cbiJdLCJuYW1lcyI6WyJmcyIsInY0IiwidXVpZCIsIlRFTEVNRVRSWV9QQVRIIiwiQUlfUkVTUE9OU0VTX1BBVEgiLCJFUlJPUl9MT0dfUEFUSCIsIkxPR19EUkFJTl9VUkwiLCJwcm9jZXNzIiwiZW52IiwiTE9HX0RSQUlOX0tFWSIsInN0YXJ0VHJhY2UiLCJtZXRhIiwiaWQiLCJ0MCIsIkRhdGUiLCJub3ciLCJlbmQiLCJvayIsImV4dHJhIiwicmVjIiwicmVxX2lkIiwicm91dGUiLCJ0aW1pbmciLCJ0aW1lc3RhbXAiLCJ0b0lTT1N0cmluZyIsImZpbmFsX3N0YXR1cyIsImFwcGVuZEZpbGVTeW5jIiwiSlNPTiIsInN0cmluZ2lmeSIsImUiLCJjb25zb2xlIiwid2FybiIsInNlbmRUb0RyYWluIiwibG9nQUlSZXNwb25zZSIsImF0dGVtcHQiLCJzdWNjZXNzIiwiZXJyb3IiLCJyZXNwb25zZUxlbmd0aCIsIm1vZGVsIiwibG9nRW50cnkiLCJ0eXBlIiwic3Vic3RyaW5nIiwiT1BFTkFJX01PREVMIiwibG9nRXJyb3IiLCJjb250ZXh0IiwibWVzc2FnZSIsInN0YWNrIiwibG9nUERGR2VuZXJhdGlvbiIsIm1ldGhvZCIsInNpemUiLCJsb2dTZXNzaW9uQWN0aXZpdHkiLCJzZXNzaW9uSWQiLCJhY3Rpdml0eSIsImRldGFpbHMiLCJsb2dSZXF1ZXN0VGVsZW1ldHJ5IiwiZGF0YSIsImVudHJ5IiwiZmV0Y2giLCJoZWFkZXJzIiwiYm9keSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/telemetry.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/formdata-node","vendor-chunks/node-fetch","vendor-chunks/openai","vendor-chunks/next","vendor-chunks/zod","vendor-chunks/@opentelemetry","vendor-chunks/web-streams-polyfill","vendor-chunks/event-target-shim","vendor-chunks/agentkeepalive","vendor-chunks/form-data-encoder","vendor-chunks/abort-controller","vendor-chunks/ms","vendor-chunks/uuid","vendor-chunks/humanize-ms"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprocess-line-selections%2Froute&page=%2Fapi%2Fprocess-line-selections%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprocess-line-selections%2Froute.ts&appDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fyassinkhalil%2FDownloads%2Fai-resume-tailor_v2_full&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();